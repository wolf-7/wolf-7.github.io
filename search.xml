<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[错误预算上线机制]]></title>
    <url>%2Funcategorized%2F2019%2F01%2F24%2F%E9%94%99%E8%AF%AF%E9%A2%84%E7%AE%97%E4%B8%8A%E7%BA%BF%E6%9C%BA%E5%88%B6.html</url>
    <content type="text"><![CDATA[&#x5728;&#x8BFB;&#x300A;SRE - Google&#x8FD0;&#x7EF4;&#x89E3;&#x5BC6;&#x300B;&#x7684;&#x65F6;&#x5019;&#x770B;&#x5230;Google&#x63D0;&#x51FA;&#x7684;&#x9519;&#x8BEF;&#x9884;&#x7B97;&#x4E0A;&#x7EBF;&#x673A;&#x5236;&#xFF0C;&#x89C9;&#x5F97;&#x4E0D;&#x9519;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#x7EC6;&#x5316;&#x4E00;&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x4EEC;&#x516C;&#x53F8;&#x7EBF;&#x4E0A;&#x53D8;&#x66F4;&#x8001;&#x662F;&#x51FA;&#x95EE;&#x9898;&#xFF0C;&#x6216;&#x8BB8;&#x53EF;&#x4EE5;&#x5C06;&#x8FD9;&#x4E2A;&#x673A;&#x5236;&#x5F15;&#x5165;&#x3002; 1&#x9519;&#x8BEF;&#x9884;&#x7B97; = 1 - &#x53EF;&#x9760;&#x6027;&#x76EE;&#x6807; &#x6BD4;&#x5982;&#x67D0;&#x4EA7;&#x54C1;&#x7684;&#x53EF;&#x9760;&#x6027;&#x76EE;&#x6807;&#x662F;4&#x4E2A;9&#xFF0C;&#x5373;99.99%&#xFF0C;&#x90A3;&#x4E48;&#x9519;&#x8BEF;&#x9884;&#x7B97;&#x5C31;&#x662F;0.01%&#xFF0C;&#x5373;&#xFF0C;&#x4E00;&#x4E2A;&#x6708;&#x5185;&#x603B;&#x5171;&#x7684;&#x4E0D;&#x53EF;&#x7528;&#x65F6;&#x957F;&#x662F;&#xFF1A; 11440 * 30 * 0.01% = 4.32&#x5206;&#x949F; &#x4E00;&#x6B21;&#x4E0A;&#x7EBF;&#xFF0C;&#x9020;&#x6210;&#x4E0D;&#x53EF;&#x7528;&#x65F6;&#x957F;1.22&#x5206;&#x949F;&#xFF0C;&#x90A3;&#x4E48;&#x8FD8;&#x5269;3.1&#x5206;&#x949F;&#xFF0C;&#x53C8;&#x4E00;&#x6B21;&#x4E0A;&#x7EBF;&#xFF0C;&#x9020;&#x6210;&#x4E0D;&#x53EF;&#x7528;&#x65F6;&#x957F;4&#x5206;&#x949F;&#xFF0C;&#x8FD8;&#x5269;-0.9&#x5206;&#x949F;&#xFF0C;&#x8D85;&#x8FC7;&#x4E86;&#x9884;&#x7B97;&#xFF0C;&#x90A3;&#x4E48;&#xFF0C;&#x672C;&#x6708;&#xFF08;&#x4E00;&#x4E2A;&#x6708;&#x662F;&#x4E00;&#x4E2A;&#x8BB0;&#x5206;&#x5468;&#x671F;&#xFF09;&#x5C31;&#x4E0D;&#x80FD;&#x518D;&#x4E0A;&#x7EBF;&#x4E86;&#x3002; &#x5982;&#x679C;&#x975E;&#x8981;&#x4E0A;&#x7EBF;&#x4E0D;&#x53EF;&#xFF0C;&#x9700;&#x7814;&#x53D1;&#x90E8;&#x95E8;&#x5927;&#x8001;&#x677F;&#x786E;&#x8BA4;&#x3002;&#x8FD9;&#x610F;&#x5473;&#x7740;&#xFF1A;&#x5E73;&#x65F6;&#x5927;&#x8001;&#x677F;&#x6839;&#x672C;&#x4E0D;&#x7528;&#x5BA1;&#x6838;&#x4E0A;&#x7EBF;&#x5355;&#xFF0C;&#x5982;&#x679C;&#x771F;&#x6709;&#x4E0A;&#x7EBF;&#x5355;&#x8D70;&#x5230;&#x5927;&#x8001;&#x677F;&#x8FD9;&#x4E86;&#xFF0C;&#x8BF4;&#x660E;&#x8FD9;&#x4E2A;&#x56E2;&#x961F;&#x5DF2;&#x7ECF;&#x7528;&#x5149;&#x4E86;&#x4ED6;&#x4EEC;&#x7684;&#x9519;&#x8BEF;&#x9884;&#x7B97;&#x3002;&#x7814;&#x53D1;&#x7684;&#x5927;&#x8001;&#x677F;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5E94;&#x8BE5;&#x5E72;&#x70B9;&#x5565;&#x4E86;&#x3002; &#x5E74;&#x5E95;&#x53EF;&#x4EE5;&#x5EFA;&#x7ACB;&#x5956;&#x52B1;&#x673A;&#x5236;&#xFF1A; &#x4E0D;&#x53EF;&#x7528;&#x65F6;&#x957F;&#x6700;&#x5C11;&#x7684;&#x56E2;&#x961F;&#xFF0C;&#x9881;&#x53D1;&#x6700;&#x4F73;&#x8D28;&#x91CF;&#x5956; :) *&#x9519;&#x8BEF;&#x9884;&#x7B97;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x4EC0;&#x4E48;&#x8303;&#x7574;&#x5462;&#xFF1F; &#x5EFA;&#x8BAE;&#x53EA;&#x7528;&#x4E8E;&#x4E0A;&#x7EBF;&#x5347;&#x7EA7;&#x8FC7;&#x7A0B;&#x5BFC;&#x81F4;&#x7684;&#x670D;&#x52A1;&#x77ED;&#x6682;&#x4E0D;&#x53EF;&#x7528;&#xFF0C;&#x4E3B;&#x6293;&#x4E0A;&#x7EBF;&#x9020;&#x6210;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5176;&#x4ED6;&#x6545;&#x969C;&#x7528;&#x5176;&#x4ED6;&#x673A;&#x5236;&#x907F;&#x514D;&#xFF0C;&#x907F;&#x514D;&#x626F;&#x76AE;&#x3002; *&#x90E8;&#x5206;&#x53EF;&#x7528;&#x7684;&#x60C5;&#x51B5;&#x5982;&#x4F55;&#x8BA1;&#x7B97;&#xFF1F; &#x5C06;&#x4E0D;&#x53EF;&#x7528;&#x65F6;&#x957F;&#x6309;&#x5BB9;&#x91CF;&#x6BD4;&#x4F8B;&#x8BA1;&#x7B97;&#x3002;&#x6BD4;&#x5982;&#x67D0;&#x4EA7;&#x54C1;&#x90E8;&#x7F72;&#x4E86;&#x5317;&#x4EAC;&#x3001;&#x4E0A;&#x6D77;&#x4E24;&#x4E2A;&#x673A;&#x623F;&#xFF0C;&#x5BB9;&#x91CF;&#x6BD4;&#x4F8B;&#x662F;1023&#xFF1A;2765&#xFF0C;&#x67D0;&#x4E2A;&#x4E0A;&#x7EBF;&#xFF0C;&#x5F53;&#x524D;&#x53EA;&#x662F;&#x7070;&#x5EA6;&#x4E86;&#x5317;&#x4EAC;&#x673A;&#x623F;&#xFF0C;&#x9020;&#x6210;&#x8FD9;&#x4E2A;&#x673A;&#x623F;3&#x5206;&#x949F;&#x4E0D;&#x53EF;&#x7528;&#xFF0C;&#x4F46;&#x662F;&#x53EA;&#x5360;&#x4E86;&#x6574;&#x4E2A;&#x96C6;&#x7FA4;&#x5BB9;&#x91CF;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x6574;&#x4E2A;&#x4EA7;&#x54C1;&#x7684;&#x4E0D;&#x53EF;&#x7528;&#x65F6;&#x957F;&#xFF1A; 13 * 1023 / (1023 + 2765) = 0.81&#x5206;&#x949F; *&#x8FD9;&#x4F1A;&#x5E26;&#x6765;&#x54EA;&#x4E9B;&#x597D;&#x5904;&#xFF1F; &#x7814;&#x53D1;&#x540C;&#x5B66;&#x5FC3;&#x7406;&#x4E0A;&#x4F1A;&#x7279;&#x522B;&#x5C0F;&#x5FC3;&#xFF0C;&#x63D0;&#x9AD8;&#x98CE;&#x9669;&#x610F;&#x8BC6; &#x4F1A;&#x60F3;&#x5404;&#x79CD;&#x62DB;&#x6765;&#x51CF;&#x5C11;&#x4E0D;&#x53EF;&#x7528;&#x65F6;&#x957F;&#xFF0C;&#x6BD4;&#x5982;&#x7070;&#x5EA6;&#x4E0A;&#x7EBF;&#x3001;AB&#x4E0A;&#x7EBF; &#x6700;&#x7EC8;&#x7ED3;&#x679C;&#x5C31;&#x662F;&#x670D;&#x52A1;&#x53EF;&#x9760;&#x6027;&#x63D0;&#x9AD8; &#x55EF;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x662F;&#x67D0;&#x516C;&#x53F8;&#x8FD0;&#x7EF4;&#x603B;&#x76D1;&#xFF0C;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x5C06;&#x4E0A;&#x9762;&#x8FD9;&#x4E2A;&#x673A;&#x5236;&#x9002;&#x914D;&#x5230;&#x81EA;&#x5DF1;&#x516C;&#x53F8;:) document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[Moosefs概念总结]]></title>
    <url>%2Funcategorized%2F2019%2F01%2F24%2FMoosefs%E6%A6%82%E5%BF%B5%E6%80%BB%E7%BB%93.html</url>
    <content type="text"><![CDATA[&#x8FD1;&#x6765;&#x4E86;&#x89E3;&#x4E86;&#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x2014;&#x2014;MooseFS&#xFF0C;&#x4E4B;&#x524D;&#x5BF9;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x4E1C;&#x897F;&#x77E5;&#x9053;&#x7684;&#x5F88;&#x5C11;&#xFF0C;&#x5206;&#x5E03;&#x5F0F;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3001;&#x5206;&#x5E03;&#x5F0F;&#x6570;&#x636E;&#x5E93;&#x90FD;&#x662F;&#x8FD1;&#x800C;&#x8FDC;&#x4E4B;&#xFF0C;&#x89C9;&#x5F97;&#x592A;&#x6742;&#x4E71;&#x4E86;&#x79BB;&#x6211;&#x8FD8;&#x5F88;&#x60A0;&#x8FDC;&#x3002;&#x5728;&#x5404;&#x4F4D;&#x6559;&#x5E08;&#x7684;&#x63A8;&#x52A8;&#x4E0B;&#x6211;&#x7528;6&#x53F0;&#x673A;&#x5668;&#x5B9E;&#x4E60;&#x4E86;&#x4E00;&#x4E0B;moosefs&#xFF0C;moosefs&#x7684;&#x5B89;&#x7F6E;&#x4ECD;&#x662F;&#x5F88;&#x7B80;&#x7565;&#x7684;&#xFF0C;&#x548C;&#x88C5;&#x5907;NFS&#x5F88;&#x50CF;&#xFF0C;&#x4FBF;&#x662F;&#x591A;&#x4E86;&#x4E24;&#x79CD;&#x4EBA;&#x7269;&#x7684;&#x673A;&#x5668;&#xFF0C;&#x6070;&#x662F;&#x6709;&#x4E86;&#x5B83;&#x4EEC;&#xFF0C;&#x624D;&#x4F7F;&#x5F97;moosefs&#x5728;&#x53EF;&#x6269;&#x5C55;&#x6027;&#x548C;&#x7A33;&#x5B9A;&#x6027;&#x4E0A;&#x90FD;&#x8981;&#x8FDC;&#x597D;&#x4E8E;NFS&#xFF0C;&#x5728;&#x8BFB;&#x5199;&#x7684;&#x529F;&#x7528;&#x65B9;&#x9762;&#xFF0C;&#x901A;&#x8FC7;dd&#x8FDB;&#x884C;&#x7684;&#x7B80;&#x7565;&#x68C0;&#x9A8C;&#x6765;&#x770B;&#xFF0C;moosefs&#x4E5F;&#x4FBF;&#x662F;&#x5199;&#x5165;&#x7684;&#x901F;&#x5EA6;&#x7A0D;&#x5FAE;&#x597D;&#x4E8E;NFS&#xFF0C;&#x8BFB;&#x4E0A;&#x6CA1;&#x6709;&#x4E0D;&#x540C;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x5173;&#x4E8E;MFS&#x77E5;&#x8BC6;&#x70B9;&#x7684;&#x4E00;&#x4E9B;&#x603B;&#x7ED3;&#x3002; MFS&#x7CFB;&#x7EDF;&#x7531;4&#x4E2A;&#x6709;&#x4E9B;&#x6784;&#x6210;&#xFF1A;master&#x3001;metalogger&#x3001;chunkserver&#x3001;client Master &#x2014;&#x2014; mfs&#x7684;&#x5927;&#x8111;&#xFF0C;&#x8BB0;&#x5F55;&#x7740;&#x5904;&#x7406;&#x4FE1;&#x606F;&#xFF0C;&#x6BD4;&#x65B9;&#xFF1A;&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#xFF0C;&#x5B58;&#x50A8;&#x7684;&#x65B9;&#x4F4D;&#xFF0C;&#x4EFD;&#x6570;&#x7B49;&#xFF0C;&#x548C;innodb&#x4E2D;&#x540C;&#x4EAB;&#x7A7A;&#x95F4;&#xFF08;ibdata&#xFF09;&#x4E2D;&#x5B58;&#x50A8;&#x7684;&#x4FE1;&#x606F;&#x7C7B;&#x4F3C;&#xFF0C;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x88AB;&#x8BB0;&#x5F55;&#x5230;metadata.mfs&#x4E2D;&#xFF0C;&#x5F53;&#x8BE5;&#x6587;&#x4EF6;&#x88AB;&#x8F7D;&#x5165;&#x5185;&#x5B58;&#x540E;&#xFF0C;&#x8BE5;&#x6587;&#x4EF6;&#x4F1A;&#x91CD;&#x547D;&#x540D;&#x4E3A;metadata.mfs.back&#xFF0C;&#x5F53;chunkserver&#x4E0A;&#x6709;&#x66F4;&#x65B0;&#x65F6;&#xFF0C;master&#x4F1A;&#x5B88;&#x65F6;&#x5C06;&#x53D6;&#x5F97;&#x7684;&#x65B0;&#x7684;&#x4FE1;&#x606F;&#x56DE;&#x5199;&#x5230;metadata.mfs.back&#x4E2D;&#xFF0C;&#x4FDD;&#x8BC1;&#x5143;&#x6570;&#x636E;&#x7684;&#x53EF;&#x9760;&#x3002; &#x786C;&#x4EF6;&#x63A8;&#x8350;&#xFF1A;&#x5927;&#x5185;&#x5B58;&#xFF0C;&#x7531;&#x4E8E;&#x5185;&#x5B58;&#x4E2D;&#x9700;&#x8981;&#x5C06;metadata.mfs&#x52A0;&#x8F7D;&#x8FDB;&#x6765;&#xFF0C;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x7684;&#x5927;&#x5C0F;&#x53D6;&#x51B3;&#x4E8E;&#x4F60;chunkserver&#x4E0A;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x91CF;&#xFF0C;&#x5185;&#x5B58;&#x7684;&#x5927;&#x5C0F;&#x4F1A;&#x6210;&#x4E3A;&#x4EE5;&#x540E;&#x7684;&#x7591;&#x95EE;&#xFF0C;&#x8981;ECC&#x7684;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x5DEE;&#x9519;&#x6821;&#x9A8C;&#xFF0C;&#x5F53;&#x5185;&#x5B58;&#x4E2D;&#x6570;&#x636E;&#x91CF;&#x62B5;&#x8FBE;&#x5FC5;&#x5B9A;&#x7A0B;&#x5EA6;&#xFF0C;&#x5047;&#x8BBE;&#x6CA1;&#x6709;&#x4E2A;&#x5BB9;&#x9519;&#x7684;&#x673A;&#x5236;&#xFF0C;&#x4F1A;&#x5F88;&#x53EF;&#x6015;&#xFF1B;&#x5197;&#x4F59;&#x7535;&#x6C60;&#xFF0C;&#x548C;&#x78C1;&#x76D8;&#x88C5;&#x5907;RAID1/RAID5/RAID10&#xFF0C;&#x90FD;&#x662F;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x9AD8;&#x53EF;&#x9760;&#x3002; Metalogger &#x2014;&#x2014; mfs&#x7684;&#x5907;&#x4EFD;&#xFF0C;&#x6BD4;&#x65B9;mysql&#x4E2D;&#x7684;m-s&#x7ED3;&#x6784;&#xFF0C;metalogger&#x4F1A;&#x5B88;&#x65F6;&#x91CD;master&#x5927;&#x5C06;&#x7684;metadata&#x3001;changelog&#x3001;session&#x7C7B;&#x578B;&#x7684;&#x6587;&#x4EF6;&#x4E0B;&#x8F7D;&#x540C;&#x6B65;&#x5230;&#x672C;&#x5730;&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x5E76;&#x52A0;&#x540E;&#x7F00;&#x201D;_ml&#x201D;&#x5C06;&#x5176;&#x91CD;&#x547D;&#x540D;&#x3002; &#x786C;&#x4EF6;&#x63A8;&#x8350;&#xFF1A;&#x4E0E;master&#x673A;&#x5668;&#x88C5;&#x5907;&#x4E00;&#x8D77;&#xFF0C;metalogger&#x672C;&#x8EAB;&#x4FBF;&#x662F;master&#x7684;&#x4E00;&#x4E2A;&#x5907;&#x673A;&#xFF0C;&#x5F53;master&#x5B95;&#x673A;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5C06;metalogger&#x63D0;&#x5347;&#x4E3A;master&#x3002; Chunkserver &#x2014;&#x2014; &#x6570;&#x636E;&#x5B58;&#x50A8;&#x5730;&#xFF0C;&#x6587;&#x4EF6;&#x4EE5;chunk&#x5927;&#x5C0F;&#x5B58;&#x50A8;&#xFF0C;&#x6BCF;chunk&#x6700;&#x5927;&#x4E3A;64M&#xFF0C;&#x5C0F;&#x4E8E;64M&#x7684;&#xFF0C;&#x8BE5;chunk&#x7684;&#x5927;&#x5C0F;&#x5373;&#x4E3A;&#x8BE5;&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#xFF0C;&#x903E;&#x8D8A;64M&#x7684;&#x6587;&#x4EF6;&#x5C06;&#x88AB;&#x5747;&#x5206;&#xFF0C;&#x6BCF;&#x4E00;&#x4EFD;&#xFF08;chunk&#xFF09;&#x7684;&#x5927;&#x5C0F;&#x4EE5;&#x4E0D;&#x903E;&#x8D8A;64M&#x4E3A;&#x539F;&#x5219;&#xFF1B;&#x6587;&#x4EF6;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4EFD;copy&#xFF0C;&#x5373;&#x9664;&#x4E86;&#x521D;&#x59CB;&#x6587;&#x4EF6;&#x4EE5;&#x5916;&#xFF0C;&#x8BE5;&#x6587;&#x4EF6;&#x8FD8;&#x5B58;&#x50A8;&#x7684;&#x4EFD;&#x6570;&#xFF0C;&#x5F53;goal&#x4E3A;1&#x65F6;&#xFF0C;&#x6807;&#x660E;&#x53EA;&#x9700;&#x4E00;&#x4EFD;copy&#xFF0C;&#x8FD9;&#x4EFD;copy&#x4F1A;&#x88AB;&#x968F;&#x673A;&#x5B58;&#x5230;&#x4E00;&#x53F0;chunkserver&#x4E0A;&#xFF0C;&#x5F53;goal&#x7684;&#x6570;&#x5927;&#x4E8E;1&#x65F6;&#xFF0C;&#x6BCF;&#x4E00;&#x4EFD;copy&#x4F1A;&#x88AB;&#x522B;&#x79BB;&#x4FDD;&#x5B58;&#x5230;&#x6BCF;&#x4E00;&#x4E2A;chunkserver&#x4E0A;&#xFF0C;goal&#x7684;&#x5927;&#x5C0F;&#x4E0D;&#x8981;&#x903E;&#x8D8A;chunkserver&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x5426;&#x5219;&#x591A;&#x51FA;&#x7684;copy&#xFF0C;&#x4E0D;&#x4F1A;&#x6709;chunkserver&#x53BB;&#x5B58;&#xFF0C;goal&#x8BBE;&#x7F6E;&#x518D;&#x591A;&#x5B9E;&#x4E60;&#x4E0A;&#x4E5F;&#x5C31;&#x6CA1;&#x6709;&#x610F;&#x4E49;&#x7684;&#x3002;Copy&#x7684;&#x4EFD;&#x6570;&#xFF0C;&#x901A;&#x5E38;&#x8BBE;&#x4E3A;&#x5927;&#x4E8E;1&#x4EFD;&#xFF0C;&#x8FD9;&#x4E48;&#x5047;&#x8BBE;&#x6709;&#x4E00;&#x53F0;chukserver&#x574F;&#x6389;&#x540E;&#xFF0C;&#x6700;&#x5C11;&#x8FD8;&#x6709;&#x4E00;&#x4EFD;copy&#xFF0C;&#x5F53;&#x8FD9;&#x53F0;&#x53C8;&#x88AB;&#x52A0;&#x8FDB;&#x6765;&#x540E;&#xFF0C;&#x4F1A;&#x5C06;&#x5931;&#x6389;&#x7684;&#x90A3;&#x4EFD;copy&#x8865;&#x56DE;&#x6765;&#xFF0C;&#x59CB;&#x7EC8;&#x4FDD;&#x6301;&#x539F;&#x6709;&#x7684;copy&#x6570;&#xFF0C;&#x800C;&#x5047;&#x8BBE;goal&#x8BBE;&#x4E3A;1copy&#xFF0C;&#x90A3;&#x4E48;&#x5F53;&#x5B58;&#x50A8;&#x8BE5;copy&#x7684;chunkserver&#x574F;&#x6389;&#xFF0C;&#x4EE5;&#x540E;&#x53C8;&#x91CD;&#x65B0;&#x52A0;&#x5165;&#x56DE;&#x6765;&#xFF0C;copy&#x6570;&#x5C06;&#x59CB;&#x7EC8;&#x662F;0&#xFF0C;&#x4E0D;&#x4F1A;&#x5EB7;&#x590D;&#x5230;&#x4E4B;&#x524D;&#x7684;1&#x4E2A;copy&#x3002; Chunkserver&#x4E0A;&#x7684;&#x5269;&#x4F59;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x8981;&#x5927;&#x4E8E;1GB&#xFF08;Reference Guide&#x6709;&#x8BF4;&#x5230;&#xFF09;&#xFF0C;&#x65B0;&#x7684;&#x6570;&#x636E;&#x624D;&#x4F1A;&#x88AB;&#x7B54;&#x5E94;&#x5199;&#x5165;&#xFF0C;&#x5426;&#x5219;&#xFF0C;&#x4F60;&#x4F1A;&#x770B;&#x5230;No space left on device&#x7684;&#x63D0;&#x793A;&#xFF0C;&#x5B9E;&#x4E60;&#x4E2D;&#xFF0C;&#x68C0;&#x9A8C;&#x53D1;&#x73B0;&#x5F53;&#x78C1;&#x76D8;&#x4F7F;&#x7528;&#x7387;&#x62B5;&#x8FBE;95%&#x652F;&#x914D;&#x7684;&#x65F6;&#x5206;&#xFF0C;&#x5C31;&#x73B0;&#x5DF2;&#x4E0D;&#x80FD;&#x5199;&#x5165;&#x4E86;&#xFF0C;&#x5F53;&#x65F6;&#x53EF;&#x7528;&#x7A7A;&#x95F4;&#x4E3A;1.9GB&#x3002; &#x786C;&#x4EF6;&#x63A8;&#x8350;&#xFF1A;&#x901A;&#x5E38;&#x7684;&#x673A;&#x5668;&#x5C31;&#x884C;&#xFF0C;&#x4FBF;&#x662F;&#x8981;&#x6765;&#x5B58;&#x51E0;&#x4EFD;&#x6570;&#x636E;&#xFF0C;&#x53EA;&#x9700;&#x78C1;&#x76D8;&#x591F;&#x5927;&#x5C31;&#x597D;&#x3002; Client &#x2014;&#x2014; &#x5BA2;&#x6237;&#x7AEF;&#x901A;&#x8FC7;&#x5185;&#x6838;&#x52A0;&#x8F7D;&#x7684;FUSE&#x6A21;&#x5757;&#xFF0C;&#x518D;&#x901A;&#x8FC7;&#x548C;master&#x7684;&#x6C9F;&#x901A;&#xFF0C;&#x5C06;chunkserver&#x540C;&#x4EAB;&#x7684;&#x5206;&#x533A;&#x6302;&#x8F7D;&#x5230;&#x672C;&#x5730;&#xFF0C;&#x7136;&#x540E;&#x8FDB;&#x884C;&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#x3002;&#x7531;&#x4E8E;FUSE&#x6A21;&#x5757;&#x662F;&#x5916;&#x52A0;&#x7684;&#x6A21;&#x5757;&#xFF0C;&#x5F53;&#x7CFB;&#x7EDF;&#x91CD;&#x542F;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x5C65;&#x884C;modprobe fuse&#xFF0C;&#x5C06;&#x5176;&#x52A0;&#x8F7D;&#x5230;&#x5185;&#x6838;&#x4E2D;&#x3002; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[linux下编译安装Python环境与iPython]]></title>
    <url>%2Funcategorized%2F2019%2F01%2F24%2Flinux%E4%B8%8B%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85Python%E7%8E%AF%E5%A2%83%E4%B8%8EiPython.html</url>
    <content type="text"><![CDATA[12&#x5B89;&#x88C5;readline-devel,&#x89E3;&#x51B3;&#x4EA4;&#x4E92;&#x9000;&#x683C;&#x5220;&#x9664;&#x952E;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;&#x95EE;&#x9898;yum insatll readline-deve 1234567891011121314151617181920212223python.org&#x4E0B;&#x8F7D;Python2.7.7wget https://www.python.org/ftp/python/2.7.7/Python-2.7.7.tar.xztar xf Python-2.7.7.tar.xzcd Python-2.7.7./configure --prefix=/usr/local/python27#&#x9A8C;&#x8BC1;&#xFF1A;[root@iZ28ixc7zmxZ Python-2.7.7]# /usr/local/python27/bin/python2.7Python 2.7.7 (default, Feb 28 2017, 23:52:42)[GCC 4.4.7 20120313 (Red Hat 4.4.7-16)] on linux2Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.&gt;&gt;&gt; print &quot;python27&quot;python27&gt;&gt;&gt;#Python2.7 &#x5B89;&#x88C5;&#x6210;&#x529F;#iPython&#x7A0B;&#x5E8F;&#x5305;&#x81EA;&#x884C;&#x767E;&#x5EA6;&#x4E0B;&#x8F7D;.&#xFF08;&#x589E;&#x52A0;tab&#x952E;&#x8865;&#x9F50;&#xFF09;#ipython&#x662F;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x65B0;&#x5B89;&#x88C5;&#x7684;Python27&#x6765;&#x5B89;&#x88C5;tar xvf ipython-1.2.1.tar.gzcd ipython-1.2.1/usr/local/python27/bin/python2.7 setup.py installln -sv /usr/local/python27/bin/python2.7 /usr/bin/python27`/usr/bin/python27&apos; -&gt; `/usr/local/python27/bin/python2.7&apos;ln -sv /usr/local/python27/bin/ipython /usr/bin/ipython&#x5B89;&#x88C5;&#x5B8C;&#x6BD5;&#x3002; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[Linux下如何选择文件系统：EXT4、Btrfs 和 XFS]]></title>
    <url>%2Funcategorized%2F2019%2F01%2F24%2FLinux%E4%B8%8B%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%9AEXT4%E3%80%81Btrfs-%E5%92%8C-XFS.html</url>
    <content type="text"><![CDATA[&#x8001;&#x5B9E;&#x8BF4;&#xFF0C;&#x4EBA;&#x4EEC;&#x6700;&#x4E0D;&#x66FE;&#x601D;&#x8003;&#x7684;&#x95EE;&#x9898;&#x4E4B;&#x4E00;&#x662F;&#x4ED6;&#x4EEC;&#x7684;&#x4E2A;&#x4EBA;&#x7535;&#x8111;&#x4E2D;&#x4F7F;&#x7528;&#x4E86;&#x4EC0;&#x4E48;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3002;Windows &#x548C; Mac OS X &#x7528;&#x6237;&#x66F4;&#x6CA1;&#x6709;&#x7406;&#x7531;&#x53BB;&#x8003;&#x8651;&#xFF0C;&#x56E0;&#x4E3A;&#x5BF9;&#x4E8E;&#x4ED6;&#x4EEC;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x79CD;&#x9009;&#x62E9;&#xFF0C;&#x90A3;&#x5C31;&#x662F; NTFS &#x548C; HFS+&#x3002;&#x76F8;&#x53CD;&#xFF0C;&#x5BF9;&#x4E8E; Linux &#x7CFB;&#x7EDF;&#x800C;&#x8A00;&#xFF0C;&#x6709;&#x5F88;&#x591A;&#x79CD;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#xFF0C;&#x73B0;&#x5728;&#x9ED8;&#x8BA4;&#x7684;&#x662F;&#x5E7F;&#x6CDB;&#x91C7;&#x7528;&#x7684; ext4&#x3002;&#x7136;&#x800C;&#xFF0C;&#x73B0;&#x5728;&#x4E5F;&#x6709;&#x6539;&#x7528;&#x4E00;&#x79CD;&#x79F0;&#x4E3A; btrfs &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x8D8B;&#x52BF;&#x3002;&#x90A3;&#x662F;&#x4EC0;&#x4E48;&#x4F7F;&#x5F97; btrfs &#x66F4;&#x4F18;&#x79C0;&#xFF0C;&#x5176;&#x5B83;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x53C8;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x53C8;&#x80FD;&#x770B;&#x5230; Linux &#x53D1;&#x884C;&#x7248;&#x4F5C;&#x51FA;&#x6539;&#x53D8;&#x5462;&#xFF1F; &#x9996;&#x5148;&#x8BA9;&#x6211;&#x4EEC;&#x5BF9;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4EE5;&#x53CA;&#x5B83;&#x4EEC;&#x771F;&#x6B63;&#x5E72;&#x4EC0;&#x4E48;&#x6709;&#x4E2A;&#x603B;&#x4F53;&#x7684;&#x8BA4;&#x8BC6;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x4EEC;&#x518D;&#x5BF9;&#x4E00;&#x4E9B;&#x6709;&#x540D;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x505A;&#x8BE6;&#x7EC6;&#x7684;&#x6BD4;&#x8F83;&#x3002; &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x662F;&#x5E72;&#x4EC0;&#x4E48;&#x7684;&#xFF1F;&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x6E05;&#x695A;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x662F;&#x5E72;&#x4EC0;&#x4E48;&#x7684;&#xFF0C;&#x4E00;&#x53E5;&#x8BDD;&#x603B;&#x7ED3;&#x8D77;&#x6765;&#x4E5F;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x3002;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x63A7;&#x5236;&#x6240;&#x6709;&#x7A0B;&#x5E8F;&#x5728;&#x4E0D;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x65F6;&#x5982;&#x4F55;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x3001;&#x5982;&#x4F55;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x4EE5;&#x53CA;&#x6709;&#x4EC0;&#x4E48;&#x5176;&#x5B83;&#x4FE1;&#x606F;&#xFF08;&#x5143;&#x6570;&#x636E;&#xFF09;&#x548C;&#x6570;&#x636E;&#x672C;&#x8EAB;&#x76F8;&#x5173;&#xFF0C;&#x7B49;&#x7B49;&#x3002;&#x542C;&#x8D77;&#x6765;&#x8981;&#x7F16;&#x7A0B;&#x5B9E;&#x73B0;&#x5E76;&#x4E0D;&#x662F;&#x8F7B;&#x800C;&#x6613;&#x4E3E;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x4E5F;&#x786E;&#x5B9E;&#x5982;&#x6B64;&#x3002;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4E00;&#x76F4;&#x5728;&#x6539;&#x8FDB;&#xFF0C;&#x5305;&#x62EC;&#x4E86;&#x66F4;&#x591A;&#x7684;&#x529F;&#x80FD;&#x3001;&#x66F4;&#x9AD8;&#x6548;&#x5730;&#x5B8C;&#x6210;&#x5B83;&#x9700;&#x8981;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#x3002;&#x603B;&#x800C;&#x8A00;&#x4E4B;&#xFF0C;&#x5B83;&#x662F;&#x6240;&#x6709;&#x8BA1;&#x7B97;&#x673A;&#x7684;&#x57FA;&#x672C;&#x9700;&#x6C42;&#x3001;&#x4F46;&#x5E76;&#x4E0D;&#x50CF;&#x542C;&#x8D77;&#x6765;&#x90A3;&#x4E48;&#x7B80;&#x5355;&#x3002; &#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5206;&#x533A;&#xFF1F;&#x7531;&#x4E8E;&#x6BCF;&#x4E2A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x90FD;&#x80FD;&#x521B;&#x5EFA;&#x6216;&#x8005;&#x5220;&#x9664;&#x5206;&#x533A;&#xFF0C;&#x5F88;&#x591A;&#x4EBA;&#x5BF9;&#x5206;&#x533A;&#x90FD;&#x6709;&#x6A21;&#x7CCA;&#x7684;&#x8BA4;&#x8BC6;&#x3002;Linux &#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5373;&#x4FBF;&#x4F7F;&#x7528;&#x6807;&#x51C6;&#x5B89;&#x88C5;&#x8FC7;&#x7A0B;&#xFF0C;&#x5728;&#x540C;&#x4E00;&#x5757;&#x78C1;&#x76D8;&#x4E0A;&#x4ECD;&#x4F7F;&#x7528;&#x591A;&#x4E2A;&#x5206;&#x533A;&#xFF0C;&#x8FD9;&#x770B;&#x8D77;&#x6765;&#x5F88;&#x5947;&#x602A;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x89E3;&#x91CA;&#x3002;&#x62E5;&#x6709;&#x4E0D;&#x540C;&#x5206;&#x533A;&#x7684;&#x4E00;&#x4E2A;&#x4E3B;&#x8981;&#x76EE;&#x7684;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x5728;&#x707E;&#x96BE;&#x53D1;&#x751F;&#x65F6;&#x80FD;&#x83B7;&#x5F97;&#x66F4;&#x597D;&#x7684;&#x6570;&#x636E;&#x5B89;&#x5168;&#x6027;&#x3002; &#x901A;&#x8FC7;&#x5C06;&#x786C;&#x76D8;&#x5212;&#x5206;&#x4E3A;&#x5206;&#x533A;&#xFF0C;&#x6570;&#x636E;&#x4F1A;&#x88AB;&#x5206;&#x9694;&#x4EE5;&#x53CA;&#x91CD;&#x7EC4;&#x3002;&#x5F53;&#x4E8B;&#x6545;&#x53D1;&#x751F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EA;&#x6709;&#x5B58;&#x50A8;&#x5728;&#x88AB;&#x635F;&#x574F;&#x5206;&#x533A;&#x4E0A;&#x7684;&#x6570;&#x636E;&#x4F1A;&#x88AB;&#x7834;&#x574F;&#xFF0C;&#x5F88;&#x5927;&#x53EF;&#x80FD;&#x4E0A;&#x5176;&#x5B83;&#x5206;&#x533A;&#x7684;&#x6570;&#x636E;&#x80FD;&#x5F97;&#x4EE5;&#x4FDD;&#x7559;&#x3002;&#x8FD9;&#x4E2A;&#x539F;&#x56E0;&#x53EF;&#x4EE5;&#x8FFD;&#x6EAF;&#x5230; Linux &#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8FD8;&#x6CA1;&#x6709;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3001;&#x4EFB;&#x4F55;&#x7535;&#x529B;&#x6545;&#x969C;&#x90FD;&#x6709;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x707E;&#x96BE;&#x53D1;&#x751F;&#x7684;&#x65F6;&#x5019;&#x3002; &#x4F7F;&#x7528;&#x5206;&#x533A;&#x4E5F;&#x8003;&#x8651;&#x5230;&#x4E86;&#x5B89;&#x5168;&#x548C;&#x5065;&#x58EE;&#x6027;&#x539F;&#x56E0;&#xFF0C;&#x56E0;&#x6B64;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x90E8;&#x5206;&#x635F;&#x574F;&#x5E76;&#x4E0D;&#x610F;&#x5473;&#x7740;&#x6574;&#x4E2A;&#x8BA1;&#x7B97;&#x673A;&#x5C31;&#x6709;&#x98CE;&#x9669;&#x6216;&#x8005;&#x4F1A;&#x53D7;&#x5230;&#x7834;&#x574F;&#x3002;&#x8FD9;&#x4E5F;&#x662F;&#x5F53;&#x524D;&#x91C7;&#x7528;&#x5206;&#x533A;&#x7684;&#x4E00;&#x4E2A;&#x6700;&#x91CD;&#x8981;&#x56E0;&#x7D20;&#x3002;&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x7528;&#x6237;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E9B;&#x4F1A;&#x586B;&#x6EE1;&#x78C1;&#x76D8;&#x7684;&#x811A;&#x672C;&#x3001;&#x7A0B;&#x5E8F;&#x6216;&#x8005; web &#x5E94;&#x7528;&#xFF0C;&#x5982;&#x679C;&#x8BE5;&#x78C1;&#x76D8;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x5927;&#x7684;&#x5206;&#x533A;&#xFF0C;&#x5982;&#x679C;&#x78C1;&#x76D8;&#x6EE1;&#x4E86;&#x90A3;&#x4E48;&#x6574;&#x4E2A;&#x7CFB;&#x7EDF;&#x5C31;&#x4E0D;&#x80FD;&#x5DE5;&#x4F5C;&#x3002;&#x5982;&#x679C;&#x7528;&#x6237;&#x628A;&#x6570;&#x636E;&#x4FDD;&#x5B58;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x5206;&#x533A;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x53EA;&#x6709;&#x90A3;&#x4E2A;&#x5206;&#x533A;&#x4F1A;&#x53D7;&#x5230;&#x5F71;&#x54CD;&#xFF0C;&#x800C;&#x7CFB;&#x7EDF;&#x5206;&#x533A;&#x6216;&#x8005;&#x5176;&#x5B83;&#x6570;&#x636E;&#x5206;&#x533A;&#x4ECD;&#x80FD;&#x6B63;&#x5E38;&#x8FD0;&#x884C;&#x3002; &#x8BB0;&#x4F4F;&#xFF0C;&#x62E5;&#x6709;&#x4E00;&#x4E2A;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x53EA;&#x80FD;&#x5728;&#x6389;&#x7535;&#x6216;&#x8005;&#x548C;&#x5B58;&#x50A8;&#x8BBE;&#x5907;&#x610F;&#x5916;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x65F6;&#x63D0;&#x4F9B;&#x6570;&#x636E;&#x5B89;&#x5168;&#x6027;&#xFF0C;&#x5E76;&#x4E0D;&#x80FD;&#x5728;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x51FA;&#x73B0;&#x574F;&#x5757;&#x6216;&#x8005;&#x53D1;&#x751F;&#x903B;&#x8F91;&#x9519;&#x8BEF;&#x65F6;&#x4FDD;&#x62A4;&#x6570;&#x636E;&#x3002;&#x5BF9;&#x4E8E;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x5EC9;&#x4EF7;&#x78C1;&#x76D8;&#x5197;&#x4F59;&#x9635;&#x5217;&#xFF08;RAID&#xFF1A;Redundant Array of Inexpensive Disks&#xFF09;&#x7684;&#x65B9;&#x6848;&#x3002; &#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5207;&#x6362;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF1F;ext4 &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7531; ext3 &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x6539;&#x8FDB;&#x800C;&#x6765;&#xFF0C;&#x800C;&#x540E;&#x8005;&#x53C8;&#x662F;&#x4ECE; ext2 &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x6539;&#x8FDB;&#x800C;&#x6765;&#x3002;&#x867D;&#x7136; ext4 &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5DF2;&#x7ECF;&#x975E;&#x5E38;&#x7A33;&#x5B9A;&#xFF0C;&#x662F;&#x8FC7;&#x53BB;&#x51E0;&#x5E74;&#x4E2D;&#x7EDD;&#x5927;&#x90E8;&#x5206;&#x53D1;&#x884C;&#x7248;&#x7684;&#x9ED8;&#x8BA4;&#x9009;&#x62E9;&#xFF0C;&#x4F46;&#x5B83;&#x662F;&#x57FA;&#x4E8E;&#x9648;&#x65E7;&#x7684;&#x4EE3;&#x7801;&#x5F00;&#x53D1;&#x800C;&#x6765;&#x3002;&#x53E6;&#x5916;&#xFF0C; Linux &#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7528;&#x6237;&#x4E5F;&#x9700;&#x8981;&#x5F88;&#x591A; ext4 &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x672C;&#x8EAB;&#x4E0D;&#x63D0;&#x4F9B;&#x7684;&#x65B0;&#x529F;&#x80FD;&#x3002;&#x867D;&#x7136;&#x901A;&#x8FC7;&#x67D0;&#x4E9B;&#x8F6F;&#x4EF6;&#x80FD;&#x6EE1;&#x8DB3;&#x8FD9;&#x79CD;&#x9700;&#x6C42;&#xFF0C;&#x4F46;&#x6027;&#x80FD;&#x4F1A;&#x53D7;&#x5230;&#x5F71;&#x54CD;&#xFF0C;&#x5728;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5C42;&#x6B21;&#x505A;&#x5230;&#x8FD9;&#x4E9B;&#x80FD;&#x83B7;&#x5F97;&#x66F4;&#x597D;&#x7684;&#x6027;&#x80FD;&#x3002; Ext4 &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;ext4 &#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x660E;&#x663E;&#x7684;&#x9650;&#x5236;&#x3002;&#x6700;&#x5927;&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#x662F; 16 tebibytes&#xFF08;&#x5927;&#x6982;&#x662F; 17.6 terabytes&#xFF09;&#xFF0C;&#x8FD9;&#x6BD4;&#x666E;&#x901A;&#x7528;&#x6237;&#x5F53;&#x524D;&#x80FD;&#x4E70;&#x5230;&#x7684;&#x786C;&#x76D8;&#x8FD8;&#x8981;&#x5927;&#x7684;&#x591A;&#x3002;&#x4F7F;&#x7528; ext4 &#x80FD;&#x521B;&#x5EFA;&#x7684;&#x6700;&#x5927;&#x5377;/&#x5206;&#x533A;&#x662F; 1 exbibyte&#xFF08;&#x5927;&#x6982;&#x662F; 1,152,921.5 terabytes&#xFF09;&#x3002;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x591A;&#x79CD;&#x6280;&#x5DE7;&#xFF0C; ext4 &#x6BD4; ext3 &#x6709;&#x5F88;&#x5927;&#x7684;&#x901F;&#x5EA6;&#x63D0;&#x5347;&#x3002;&#x7C7B;&#x4F3C;&#x4E00;&#x4E9B;&#x6700;&#x5148;&#x8FDB;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x610F;&#x5473;&#x7740;&#x5B83;&#x4F1A;&#x5BF9;&#x6587;&#x4EF6;&#x5728;&#x78C1;&#x76D8;&#x4E2D;&#x7684;&#x4F4D;&#x7F6E;&#x4EE5;&#x53CA;&#x4EFB;&#x4F55;&#x5176;&#x5B83;&#x5BF9;&#x78C1;&#x76D8;&#x7684;&#x66F4;&#x6539;&#x505A;&#x8BB0;&#x5F55;&#x3002;&#x7EB5;&#x89C2;&#x5B83;&#x7684;&#x6240;&#x6709;&#x529F;&#x80FD;&#xFF0C;&#x5B83;&#x8FD8;&#x4E0D;&#x652F;&#x6301;&#x900F;&#x660E;&#x538B;&#x7F29;&#x3001;&#x91CD;&#x590D;&#x6570;&#x636E;&#x5220;&#x9664;&#x6216;&#x8005;&#x900F;&#x660E;&#x52A0;&#x5BC6;&#x3002;&#x6280;&#x672F;&#x4E0A;&#x652F;&#x6301;&#x4E86;&#x5FEB;&#x7167;&#xFF0C;&#x4F46;&#x8BE5;&#x529F;&#x80FD;&#x8FD8;&#x5904;&#x4E8E;&#x5B9E;&#x9A8C;&#x6027;&#x9636;&#x6BB5;&#x3002; Btrfs &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;btrfs &#x6709;&#x5F88;&#x591A;&#x4E0D;&#x540C;&#x7684;&#x53EB;&#x6CD5;&#xFF0C;&#x4F8B;&#x5982; Better FS&#x3001;Butter FS &#x6216;&#x8005; B-Tree FS&#x3002;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x51E0;&#x4E4E;&#x5B8C;&#x5168;&#x4ECE;&#x5934;&#x5F00;&#x53D1;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3002;btrfs &#x51FA;&#x73B0;&#x7684;&#x539F;&#x56E0;&#x662F;&#x5B83;&#x7684;&#x5F00;&#x53D1;&#x8005;&#x8D77;&#x521D;&#x5E0C;&#x671B;&#x6269;&#x5C55;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x529F;&#x80FD;&#x4F7F;&#x5F97;&#x5B83;&#x5305;&#x62EC;&#x5FEB;&#x7167;&#x3001;&#x6C60;&#x5316;&#xFF08;pooling&#xFF09;&#x3001;&#x6821;&#x9A8C;&#x4EE5;&#x53CA;&#x5176;&#x5B83;&#x4E00;&#x4E9B;&#x529F;&#x80FD;&#x3002;&#x867D;&#x7136;&#x548C; ext4 &#x65E0;&#x5173;&#xFF0C;&#x5B83;&#x4E5F;&#x5E0C;&#x671B;&#x80FD;&#x4FDD;&#x7559; ext4 &#x4E2D;&#x80FD;&#x4F7F;&#x6D88;&#x8D39;&#x8005;&#x548C;&#x4F01;&#x4E1A;&#x53D7;&#x76CA;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5E76;&#x6574;&#x5408;&#x989D;&#x5916;&#x7684;&#x80FD;&#x4F7F;&#x6BCF;&#x4E2A;&#x4EBA;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x4F01;&#x4E1A;&#x53D7;&#x76CA;&#x7684;&#x529F;&#x80FD;&#x3002;&#x5BF9;&#x4E8E;&#x4F7F;&#x7528;&#x5927;&#x578B;&#x8F6F;&#x4EF6;&#x4EE5;&#x53CA;&#x5927;&#x89C4;&#x6A21;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4F01;&#x4E1A;&#xFF0C;&#x8BA9;&#x591A;&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x786C;&#x76D8;&#x770B;&#x8D77;&#x6765;&#x4E00;&#x81F4;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x80FD;&#x4F7F;&#x4ED6;&#x4EEC;&#x53D7;&#x76CA;&#x5E76;&#x4E14;&#x4F7F;&#x6570;&#x636E;&#x6574;&#x5408;&#x53D8;&#x5F97;&#x66F4;&#x52A0;&#x7B80;&#x5355;&#x3002;&#x5220;&#x9664;&#x91CD;&#x590D;&#x6570;&#x636E;&#x80FD;&#x964D;&#x4F4E;&#x6570;&#x636E;&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x7684;&#x7A7A;&#x95F4;&#xFF0C;&#x5F53;&#x9700;&#x8981;&#x955C;&#x50CF;&#x4E00;&#x4E2A;&#x5355;&#x4E00;&#x800C;&#x5DE8;&#x5927;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x65F6;&#x4F7F;&#x7528; btrfs &#x4E5F;&#x80FD;&#x4F7F;&#x6570;&#x636E;&#x955C;&#x50CF;&#x53D8;&#x5F97;&#x7B80;&#x5355;&#x3002; &#x7528;&#x6237;&#x5F53;&#x7136;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x9009;&#x62E9;&#x521B;&#x5EFA;&#x591A;&#x4E2A;&#x5206;&#x533A;&#x4ECE;&#x800C;&#x65E0;&#x9700;&#x955C;&#x50CF;&#x4EFB;&#x4F55;&#x4E1C;&#x897F;&#x3002;&#x8003;&#x8651;&#x5230;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;btrfs &#x80FD;&#x6A2A;&#x8DE8;&#x591A;&#x79CD;&#x786C;&#x76D8;&#xFF0C;&#x548C; ext4 &#x76F8;&#x6BD4;&#xFF0C;&#x5B83;&#x80FD;&#x652F;&#x6301; 16 &#x500D;&#x4EE5;&#x4E0A;&#x7684;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x3002;btrfs &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4E00;&#x4E2A;&#x5206;&#x533A;&#x6700;&#x5927;&#x662F; 16 exbibytes&#xFF0C;&#x6700;&#x5927;&#x7684;&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#x4E5F;&#x662F; 16 exbibytes&#x3002; XFS &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;XFS &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x662F;&#x6269;&#x5C55;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF08;extent file system&#xFF09;&#x7684;&#x4E00;&#x4E2A;&#x6269;&#x5C55;&#x3002;XFS &#x662F; 64 &#x4F4D;&#x9AD8;&#x6027;&#x80FD;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3002;&#x5BF9; XFS &#x7684;&#x652F;&#x6301;&#x5927;&#x6982;&#x5728; 2002 &#x5E74;&#x5408;&#x5E76;&#x5230;&#x4E86; Linux &#x5185;&#x6838;&#xFF0C;&#x5230;&#x4E86; 2009 &#x5E74;&#xFF0C;&#x7EA2;&#x5E3D;&#x4F01;&#x4E1A;&#x7248; Linux 5.4 &#x4E5F;&#x652F;&#x6301;&#x4E86; XFS &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3002;&#x5BF9;&#x4E8E; 64 &#x4F4D;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;XFS &#x652F;&#x6301;&#x6700;&#x5927;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5927;&#x5C0F;&#x4E3A; 8 exbibytes&#x3002;XFS &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x6709;&#x4E00;&#x4E9B;&#x7F3A;&#x9677;&#xFF0C;&#x4F8B;&#x5982;&#x5B83;&#x4E0D;&#x80FD;&#x538B;&#x7F29;&#xFF0C;&#x5220;&#x9664;&#x5927;&#x91CF;&#x6587;&#x4EF6;&#x65F6;&#x6027;&#x80FD;&#x4F4E;&#x4E0B;&#x3002;&#x76EE;&#x524D;RHEL 7.0 &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528; XFS&#x3002; &#x603B;&#x7ED3;&#x4E0D;&#x5E78;&#x7684;&#x662F;&#xFF0C;&#x8FD8;&#x4E0D;&#x77E5;&#x9053; btrfs &#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x80FD;&#x5230;&#x6765;&#x3002;&#x5B98;&#x65B9;&#x8BF4;&#xFF0C;&#x5176;&#x4E0B;&#x4E00;&#x4EE3;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4ECD;&#x7136;&#x88AB;&#x5F52;&#x7C7B;&#x4E3A;&#x201C;&#x4E0D;&#x7A33;&#x5B9A;&#x201D;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x7528;&#x6237;&#x4E0B;&#x8F7D;&#x6700;&#x65B0;&#x7248;&#x672C;&#x7684; Ubuntu&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x5B89;&#x88C5;&#x5230; btrfs &#x5206;&#x533A;&#x4E0A;&#x3002;&#x4EC0;&#x4E48;&#x65F6;&#x5019; btrfs &#x4F1A;&#x88AB;&#x5F52;&#x7C7B;&#x5230; &#x201C;&#x7A33;&#x5B9A;&#x201D; &#x4ECD;&#x7136;&#x662F;&#x4E2A;&#x8C1C;&#xFF0C; &#x76F4;&#x5230;&#x771F;&#x7684;&#x8BA4;&#x4E3A;&#x5B83;&#x201C;&#x7A33;&#x5B9A;&#x201D;&#x4E4B;&#x524D;&#xFF0C;&#x7528;&#x6237;&#x4E5F;&#x4E0D;&#x5E94;&#x8BE5;&#x671F;&#x671B; Ubuntu &#x4F1A;&#x9ED8;&#x8BA4;&#x91C7;&#x7528; btrfs&#x3002;&#x6709;&#x62A5;&#x9053;&#x8BF4; Fedora 18 &#x4F1A;&#x7528; btrfs &#x4F5C;&#x4E3A;&#x5B83;&#x7684;&#x9ED8;&#x8BA4;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x56E0;&#x4E3A;&#x5230;&#x4E86;&#x53D1;&#x5E03;&#x5B83;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5E94;&#x8BE5;&#x6709;&#x4E86; btrfs &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x6821;&#x9A8C;&#x5668;&#x3002;&#x7531;&#x4E8E;&#x8FD8;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#x6240;&#x6709;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x53E6;&#x5916;&#x548C; ext4 &#x76F8;&#x6BD4;&#x6027;&#x80FD;&#x4E0A;&#x4E5F;&#x6BD4;&#x8F83;&#x7F13;&#x6162;&#xFF0C;btrfs &#x8FD8;&#x6709;&#x5F88;&#x591A;&#x7684;&#x5DE5;&#x4F5C;&#x8981;&#x505A;&#x3002; &#x90A3;&#x4E48;&#xFF0C;&#x7A76;&#x7ADF;&#x4F7F;&#x7528;&#x54EA;&#x4E2A;&#x66F4;&#x597D;&#x5462;&#xFF1F;&#x5C3D;&#x7BA1;&#x6027;&#x80FD;&#x51E0;&#x4E4E;&#x76F8;&#x540C;&#xFF0C;&#x4F46; ext4 &#x8FD8;&#x662F;&#x8D62;&#x5BB6;&#x3002;&#x4E3A;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x7B54;&#x6848;&#x5728;&#x4E8E;&#x6613;&#x7528;&#x6027;&#x4EE5;&#x53CA;&#x5E7F;&#x6CDB;&#x6027;&#x3002;&#x5BF9;&#x4E8E;&#x684C;&#x9762;&#x6216;&#x8005;&#x5DE5;&#x4F5C;&#x7AD9;&#xFF0C; ext4 &#x4ECD;&#x7136;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x597D;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3002;&#x7531;&#x4E8E;&#x5B83;&#x662F;&#x9ED8;&#x8BA4;&#x63D0;&#x4F9B;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x5728;&#x4E0A;&#x9762;&#x5B89;&#x88C5;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x3002;&#x540C;&#x65F6;&#xFF0C; ext4 &#x652F;&#x6301;&#x6700;&#x5927; 1 exabytes &#x7684;&#x5377;&#x548C; 16 terabytes &#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x56E0;&#x6B64;&#x8003;&#x8651;&#x5230;&#x5927;&#x5C0F;&#xFF0C;&#x5B83;&#x4E5F;&#x8FD8;&#x6709;&#x5F88;&#x5927;&#x7684;&#x8FDB;&#x6B65;&#x7A7A;&#x95F4;&#x3002; btrfs &#x80FD;&#x63D0;&#x4F9B;&#x66F4;&#x5927;&#x7684;&#x9AD8;&#x8FBE; 16 exabytes &#x7684;&#x5377;&#x4EE5;&#x53CA;&#x66F4;&#x597D;&#x7684;&#x5BB9;&#x9519;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x5230;&#x73B0;&#x5728;&#x4E3A;&#x6B62;&#xFF0C;&#x5B83;&#x611F;&#x89C9;&#x66F4;&#x50CF;&#x662F;&#x4E00;&#x4E2A;&#x9644;&#x52A0;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x800C;&#x90E8;&#x7F72;&#x4E00;&#x4E2A;&#x96C6;&#x6210;&#x5230; Linux &#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x5C3D;&#x7BA1; btrfs &#x652F;&#x6301;&#x4E0D;&#x540C;&#x7684;&#x53D1;&#x884C;&#x7248;&#xFF0C;&#x4F7F;&#x7528; btrfs &#x683C;&#x5F0F;&#x5316;&#x786C;&#x76D8;&#x4E4B;&#x524D;&#x5148;&#x8981;&#x6709; btrfs-tools &#x5DE5;&#x5177;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5B89;&#x88C5; Linux &#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x65F6;&#x5019;&#x5B83;&#x5E76;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x53EF;&#x9009;&#x9879;&#xFF0C;&#x5373;&#x4FBF;&#x4E0D;&#x540C;&#x53D1;&#x884C;&#x7248;&#x4E4B;&#x95F4;&#x4F1A;&#x6709;&#x6240;&#x4E0D;&#x540C;&#x3002; &#x5C3D;&#x7BA1;&#x4F20;&#x8F93;&#x901F;&#x7387;&#x975E;&#x5E38;&#x91CD;&#x8981;&#xFF0C;&#x8BC4;&#x4EF7;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x9664;&#x4E86;&#x6587;&#x4EF6;&#x4F20;&#x8F93;&#x901F;&#x5EA6;&#x4E4B;&#x5916;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#x56E0;&#x7D20;&#x3002;btrfs &#x6709;&#x5F88;&#x591A;&#x597D;&#x7528;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4F8B;&#x5982;&#x5199;&#x590D;&#x5236;&#xFF08;Copy-on-Write&#xFF09;&#x3001;&#x6269;&#x5C55;&#x6821;&#x9A8C;&#x3001;&#x5FEB;&#x7167;&#x3001;&#x6E05;&#x6D17;&#x3001;&#x81EA;&#x4FEE;&#x590D;&#x6570;&#x636E;&#x3001;&#x5197;&#x4F59;&#x5220;&#x9664;&#x4EE5;&#x53CA;&#x5176;&#x5B83;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x5B8C;&#x6574;&#x6027;&#x7684;&#x529F;&#x80FD;&#x3002;&#x548C; ZFS &#x76F8;&#x6BD4; btrfs &#x7F3A;&#x5C11; RAID-Z &#x529F;&#x80FD;&#xFF0C;&#x56E0;&#x6B64;&#x5BF9;&#x4E8E; btrfs&#xFF0C; RAID &#x8FD8;&#x5904;&#x4E8E;&#x5B9E;&#x9A8C;&#x6027;&#x9636;&#x6BB5;&#x3002;&#x5BF9;&#x4E8E;&#x5355;&#x7EAF;&#x7684;&#x6570;&#x636E;&#x5B58;&#x50A8;&#xFF0C;&#x548C; ext4 &#x76F8;&#x6BD4; btrfs &#x4F3C;&#x4E4E;&#x66F4;&#x52A0;&#x4F18;&#x79C0;&#xFF0C;&#x4F46;&#x65F6;&#x95F4;&#x4F1A;&#x9A8C;&#x8BC1;&#x4E00;&#x5207;&#x3002; &#x8FC4;&#x4ECA;&#x4E3A;&#x6B62;&#xFF0C;&#x5BF9;&#x4E8E;&#x684C;&#x9762;&#x7CFB;&#x7EDF;&#x800C;&#x8A00;&#xFF0C;ext4 &#x4F3C;&#x4E4E;&#x662F;&#x4E00;&#x4E2A;&#x66F4;&#x597D;&#x7684;&#x9009;&#x62E9;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x662F;&#x9ED8;&#x8BA4;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x4F20;&#x8F93;&#x6587;&#x4EF6;&#x65F6;&#x4E5F;&#x6BD4; btrfs &#x66F4;&#x5FEB;&#x3002;btrfs &#x5F53;&#x7136;&#x503C;&#x5F97;&#x5C1D;&#x8BD5;&#x3001;&#x4F46;&#x8981;&#x5728;&#x684C;&#x9762; Linux &#x4E0A;&#x5B8C;&#x5168;&#x53D6;&#x4EE3; ext4 &#x53EF;&#x80FD;&#x8FD8;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x65F6;&#x95F4;&#x3002;&#x6570;&#x636E;&#x573A;&#x548C;&#x5927;&#x5B58;&#x50A8;&#x6C60;&#x4F1A;&#x63ED;&#x793A;&#x5173;&#x4E8E; ext4&#x3001;XCF &#x4EE5;&#x53CA; btrfs &#x4E0D;&#x540C;&#x7684;&#x573A;&#x666F;&#x548C;&#x5DEE;&#x5F02;&#x3002; &#x5982;&#x679C;&#x4F60;&#x6709;&#x4E0D;&#x540C;&#x6216;&#x8005;&#x5176;&#x5B83;&#x7684;&#x89C2;&#x70B9;&#xFF0C;&#x5728;&#x4E0B;&#x9762;&#x7684;&#x8BC4;&#x8BBA;&#x6846;&#x4E2D;&#x544A;&#x8BC9;&#x6211;&#x4EEC;&#x5427;&#x3002; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[Nginx+Tomcat+Redis实现负载均衡、资源分离、session共享]]></title>
    <url>%2Funcategorized%2F2019%2F01%2F24%2FNginx-Tomcat-Redis%E5%AE%9E%E7%8E%B0%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E3%80%81%E8%B5%84%E6%BA%90%E5%88%86%E7%A6%BB%E3%80%81session%E5%85%B1%E4%BA%AB.html</url>
    <content type="text"><![CDATA[Nginx+Tomcat+Redis&#x5B9E;&#x73B0;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x3001;&#x8D44;&#x6E90;&#x5206;&#x79BB;&#x3001;session&#x5171;&#x4EAB; 1&#x3001;Nginx&#x5B9E;&#x73B0;&#x591A;Tomcat&#x8D1F;&#x8F7D;&#x5747;&#x8861; Tomcat&#x670D;&#x52A1;12345192.168.1.177:8001192.168.1.177:8002192.168.1.177:8003 Nginx&#x914D;&#x7F6E;12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455upstream mytomcats { server 192.168.1.177:8001; server 192.168.1.177:8002; server 192.168.1.177:8003; } server { listen 80; server_name www.xxx.com; location ~* \.(jpg|gif|png|swf|flv|wma|wmv|asf|mp3|mmf|zip|rar)$ { root /web/www/html/; } location / { proxy_pass http://mytomcats; proxy_redirect off; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; client_max_body_size 10m; client_body_buffer_size 128k; proxy_connect_timeout 90; proxy_send_timeout 90; proxy_read_timeout 90; proxy_buffer_size 4k; proxy_buffers 4 32k; proxy_busy_buffers_size 64k; proxy_temp_file_write_size 64k; } } upstream&#x6307;&#x5B9A;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7EC4;&#xFF0C;&#x6307;&#x5B9A;&#x5176;Tomcat&#x6210;&#x5458; location ~* \.(jpg|gif|&#x2026;&#x2026;&#x5B9E;&#x73B0;&#x4E86;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x5206;&#x79BB;&#x3002;ps&#xFF1A;&#x5728;location&#x6307;&#x4EE4;&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x540E;&#x518D;&#x7528;alias&#x6307;&#x4EE4;&#xFF0C;Nginx&#x662F;&#x4E0D;&#x652F;&#x6301;&#x7684;&#x3002; 2&#x3001;Nginx&#x5B9E;&#x73B0;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x5206;&#x79BB; Tomcat&#x670D;&#x52A1;1192.168.1.177:8000 Nginx&#x914D;&#x7F6E;1234567891011121314151617181920212223242526272829303132333435363738394041424344454647server { listen 80; server_name www.xxx.com; root /web/www/html; location /img/ { alias /web/www/html/img/; } location ~ (\.jsp)|(\.do)$ { proxy_pass http://192.168.1.177:8000; proxy_redirect off; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; client_max_body_size 10m; client_body_buffer_size 128k; proxy_connect_timeout 90; proxy_send_timeout 90; proxy_read_timeout 90; proxy_buffer_size 4k; proxy_buffers 4 32k; proxy_busy_buffers_size 64k; proxy_temp_file_write_size 64k; } } &#x7B2C;&#x4E00;&#x4E2A;location&#x6307;&#x4EE4;&#x5C06;/web/www/html/img/&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x9759;&#x6001;&#x6587;&#x4EF6;&#x4EA4;&#x7ED9;Nginx&#x6765;&#x5B8C;&#x6210;&#x3002;&#x6700;&#x540E;&#x4E00;&#x4E2A;location&#x6307;&#x4EE4;&#x5C06;&#x6240;&#x6709;&#x4EE5;.jsp&#x3001;.do&#x7ED3;&#x5C3E;&#x7684;&#x6587;&#x4EF6;&#x90FD;&#x4EA4;&#x7ED9;Tomcat&#x670D;&#x52A1;&#x5668;&#x7684;8080&#x7AEF;&#x53E3;&#x6765;&#x5904;&#x7406;&#x3002; 3&#x3001;Nginx+Tomcat+Redis&#x5B9E;&#x73B0;session&#x5171;&#x4EAB;12345678910Redis&#x670D;&#x52A1;192.168.1.178:6379Tomcat&#x670D;&#x52A1;192.168.1.177:8001192.168.1.177:8002192.168.1.177:8003Nginx&#x670D;&#x52A1;192.168.1.179 &#x914D;&#x7F6E;Tomcat&#x8BA9;&#x5176;session&#x4FDD;&#x5B58;&#x5230;redis&#x4E0A;&#xFF0C;&#x5728;context.xml&#x914D;&#x7F6E;(Value&#x6807;&#x7B7E;&#x4E00;&#x5B9A;&#x8981;&#x5728;Manager&#x6807;&#x7B7E;&#x524D;&#x9762;)&#xFF1A; 12345678&lt;Context path=&quot;&quot; docBase=&quot;ajax&quot; debug=&quot;0&quot; reloadable=&quot;false&quot;&gt; &lt;Valve className=&quot;com.radiadesign.catalina.session.RedisSessionHandlerValve&quot; /&gt; &lt;Manager className=&quot;com.radiadesign.catalina.session.RedisSessionManager&quot; host=&quot;192.168.1.178&quot; port=&quot;6379&quot; database=&quot;0&quot; maxInactiveInterval=&quot;60&quot;/&gt; &lt;/Context&gt; &#x914D;&#x7F6E;Nginx123456789101112131415161718192021222324252627282930313233upstream mytomcats { server 192.168.1.177:8001; server 192.168.1.177:8002; server 192.168.1.177:8003; } log_format www_iu14_com &apos;$remote_addr - $remote_user [$time_local] $request &apos; &apos;&quot;$status&quot; $body_bytes_sent &quot;$http_referer&quot;&apos; &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;; server { listen 80; server_name www.iu14.com; location / { proxy_pass http:// mytomcats; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; } access_log /usr/tmp/logs/redis.iu14.log www_iu14_com; } &#x4F9D;&#x6B21;&#x542F;&#x52A8;Redis&#x3001;Tomcat&#x3001;Nginx&#xFF0C;&#x8BBF;&#x95EE;Nginx. document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[Nginx 配置选项整理]]></title>
    <url>%2Funcategorized%2F2019%2F01%2F24%2FNginx-%E9%85%8D%E7%BD%AE%E9%80%89%E9%A1%B9%E6%95%B4%E7%90%86.html</url>
    <content type="text"><![CDATA[Nginx &#x914D;&#x7F6E;&#x9009;&#x9879;&#x6574;&#x7406; Include &#x6587;&#x4EF6;&#x4E0D;&#x8981;&#x5728;&#x60A8;&#x7684;&#x4E3B; nginx.conf &#x6587;&#x4EF6;&#x4E2D;&#x914D;&#x7F6E;&#x6240;&#x6709;&#x7684;&#x4E1C;&#x897F;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x5206;&#x6210;&#x51E0;&#x4E2A;&#x8F83;&#x5C0F;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x60A8;&#x7684;&#x540C;&#x4E8B;&#x4F1A;&#x5F88;&#x611F;&#x6FC0;&#x4F60;&#x7684;&#x3002;&#x6BD4;&#x5982;&#x6211;&#x7684;&#x7ED3;&#x6784;&#xFF0C;&#x6211;&#x5B9A;&#x4E49;&#x6211;&#x7684; upstream &#x7684; pool &#x7684;&#x4E3A;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x548C;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x5B9A;&#x4E49; location &#x5904;&#x7406;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x5176;&#x5B83;&#x7684;&#x5E94;&#x7528;&#x3002; &#x4F8B;&#x5B50;&#xFF1A; upstreams.conf12345678910111213141516#&#x8D1F;&#x8F7D;1upstream cluster1 { fair; server app01:8080; server app01:8081; server app02:8082; server app02:8083;}#&#x8D1F;&#x8F7D;2upstream cluster2 { fair; server app01:7071; server app01:7072; server app02:7071; server app02:7072;} locations.conf1234567891011121314151617181920212223242526location / { root /var/www; include cache-control.conf; index index.html index.htm;}location /services/service1 { proxy_pass_header Server; proxy_set_header host $http_host; proxy_redirect off; proxy_set_header X-Real-ip $remote_addr; proxy_set_header X-Scheme $scheme; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; add_header Pragma &quot;no-cache&quot;; proxy_pass http://cluster1/;}location /services/service2 { proxy_pass_header Server; proxy_set_header Host $http_host; proxy_redirect off; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Scheme $scheme; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; add_header Pragma &quot;no-cache&quot;; proxy_pass http://cluster2/service2;} servers.conf1234server { listen 80; include locations.conf;} &#x73B0;&#x5728;&#xFF0C;&#x4F60;&#x7684; nginx.conf &#x770B;&#x8D77;&#x6765;&#x975E;&#x5E38;&#x7684;&#x5E72;&#x51C0;&#x548C;&#x7B80;&#x5355;&#xFF08;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x5206;&#x5F00;&#x66F4;&#x591A;&#xFF0C;&#x6765;&#x66F4;&#x5305;&#x62EC;&#x6587;&#x4EF6;&#xFF0C;&#x6BD4;&#x5982;&#x5206;&#x79BB;gzip&#x7684;&#x914D;&#x7F6E;&#x9009;&#x9879;&#xFF09; nginx.conf12345678910111213141516171819202122232425262728293031323334worker_processes 4;worker_rlimit_nofile 20480;events { worker_connections 20480; use epoll;}http {include upstreams.conf; include mime.types; default_type application/octet-stream;log_format custom &apos;$remote_addr - $remote_user [$time_local] &apos; &apos;&quot;$request&quot; $status $bytes_sent &apos; &apos;&quot;$http_referer&quot; &quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot; $request_time&apos;; access_log /usr/local/app/nginx/logs/access.log custom; proxy_buffering off; sendfile on; tcp_nopush on; tcp_nodelay on; gzip on; gzip_min_length 10240; gzip_proxied expired no-cache no-store private auth; gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml application/xml+rss image/svg+xml application/x-font-ttf application/vnd.ms-fontobject; gzip_disable &quot;MSIE [1-6]\.&quot;;# proxy cache config proxy_cache_path /mnt/nginx_cache levels=1:2 keys_zone=one:10m inactive=7d max_size=10g; proxy_temp_path /var/tmp/nginx_temp; proxy_next_upstream error; include servers.conf; } &#x8FD9; nginx.conf &#x6587;&#x4EF6;&#x662F;&#x4F7F;&#x7528;&#x4E86;&#x4E00;&#x4E9B;&#x4E0D;&#x592A;&#x5E38;&#x89C1;&#x7684;&#x914D;&#x7F6E;&#x9009;&#x9879;&#xFF0C;&#x5B83;&#x503C;&#x5F97;&#x6307;&#x51FA;&#x5176;&#x4E2D;&#x4E00;&#x4E9B;&#x91CD;&#x8981;&#x7684;&#x3002;&#x591A;&#x4E2A; worker &#x7684;&#x914D;&#x7F6E;(&#x8FDB;&#x7A0B;)&#x5982;&#x679C;&#x4F60;&#x7684; Nginx &#x662F;&#x591A;&#x4E2A; CPU &#x548C;&#x591A;&#x6838;&#xFF0C;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x6210;&#x591A;&#x6838;&#x7684;&#x6570;&#x91CF;&#x6BD4;&#x8F83;&#x597D;&#x3002;1worker_processes 4; &#x589E;&#x52A0;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x53E5;&#x67C4;&#x5982;&#x679C; Nginx &#x670D;&#x52A1;&#x5F88;&#x5927;&#x7684;&#x6D41;&#x91CF;&#xFF0C;&#x589E;&#x52A0;&#x6700;&#x5927;&#x53EF;&#x4EE5;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x53E5;&#x67C4;&#x8FD8;&#x662F;&#x5F88;&#x6709;&#x7528;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x9ED8;&#x8BA4;&#x53EA;&#x6709; 1024 &#x4E2A;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; &#x2018;ulimit -n&#x2019; &#x770B;&#x5230;&#x5F53;&#x524D;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x8BBE;&#x7F6E;&#x3002;1worker_rlimit_nofile 10240; &#x5B9A;&#x5236;&#x7684;&#x65E5;&#x5FD7;1&#x53EF;&#x4EE5;&#x770B;&#x770B; log_format &#x548C; access_log &#x4E8C;&#x4E2A;&#x9009;&#x9879;&#x7684;&#x8BBE;&#x7F6E;&#x3002;&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x6709;&#x51E0;&#x4E2A;&#x53C2;&#x6570;&#x6700;&#x5E38;&#x4F7F;&#x7528;&#xFF0C;&#x4F8B;&#x5982; &apos;$http_x_forwarded_for&apos;&#x53EF;&#x4EE5;&#x89C1;&#x5230; load balancer &#x7684;&#x8BBE;&#x5907;&#x4E4B;&#x524D;&#x7684; IP&#xFF0C;&#x8FD8;&#x6709;&apos;$request_time&apos;&#x53EF;&#x4EE5;&#x89C1;&#x5230; Nginx &#x6765;&#x5904;&#x7406;&#x8FD9;&#x4E2A;&#x4E3B;&#x52A8;&#x6240;&#x82B1;&#x7684;&#x65F6;&#x95F4;&#x3002; &#x538B;&#x7F29;&#x538B;&#x7F29;&#x5BF9;&#x4E8E;&#x6587;&#x672C;&#x975E;&#x5E38;&#x975E;&#x5E38;&#x7684;&#x6709;&#x7528;12345gzip on;gzip_min_length 10240;gzip_proxied expired no-cache no-store private auth;gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml application/xml+rss image/svg+xml application/x-font-ttf application/vnd.ms-fontobject;gzip_disable &quot;MSIE [1-6]\.&quot;; &#x4EE3;&#x7406;&#x7684;&#x9009;&#x9879;&#x8FD9;&#x4E9B;&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x5728;&#x6BCF;&#x4E2A; location &#x4E2D;&#x8BBE;&#x7F6E;1234567proxy_pass_header Server;proxy_set_header Host $http_host;proxy_redirect off;proxy_set_header X-Real-IP $remote_addr;proxy_set_header X-Scheme $scheme;proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;add_header Pragma &quot;no-cache&quot;; &#x8FD9;&#x4E2A;&#x4E2D;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x5B9A;&#x5236;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x5C31;&#x662F; &#x2018;no-cache&#x2019;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x4E0D;&#x4F1A;&#x4F7F;&#x7528; cache &#x7684;&#x5185;&#x5BB9;&#x4E86;&#x3002;&#x4EE3;&#x7406;&#x7684; Cache&#x4F7F;&#x7528; Nginx &#x53EF;&#x4EE5;&#x7ED9;&#x4E00;&#x4E9B;&#x6587;&#x4EF6;&#x6765; cache &#x5230;&#x672C;&#x5730;&#x6765;&#x5F53; Cache &#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x9700;&#x8981;&#x8BBE;&#x7F6E; proxy_cache_path &#x548C; proxy_temp_path &#x5728;&#x4F60;&#x7684; HTTP &#x7684; directive &#x4E2D;&#x3002;&#x5728; location &#x4E2D;&#x914D;&#x7F6E;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x4F60;&#x60F3; cache &#x7684;&#x5185;&#x5BB9;&#x7684;&#x8BDD;&#x3002;1234proxy_cache_path /mnt/nginx_cache levels=1:2keys_zone=one:10minactive=7d max_size=10g;proxy_temp_path /var/tmp/nginx_temp; &#x8FD9;&#x53EF;&#x80FD;&#x8FD8;&#x60F3;&#x589E;&#x52A0;&#x4E00;&#x4E9B;&#x5176;&#x5B83;&#x7684;&#x53C2;&#x6570;1234567proxy_cache one;proxy_cache_key mylocation.$request_uri;proxy_cache_valid 200 302 304 10m;proxy_cache_valid 301 1h;proxy_cache_valid any 1m;proxy_cache_use_stale error timeout invalid_header http_500 http_502 http_503 http_504 http_404;HTTP caching options &#x6709;&#x65F6;&#x4F60;&#x60F3;&#x4F7F;&#x7528;&#x5176;&#x5B83;&#x7684;&#x4E1C;&#x897F;&#x6765;&#x505A; Cache&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x600E;&#x4E48;&#x6837; cache&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x7ED9; cache &#x7684;&#x4FE1;&#x606F;&#x7684;&#x6587;&#x4EF6; include &#x5230;&#x4F60;&#x7684; root &#x7684; location &#x4E2D;12345location / {root /var/www;include cache-control.conf;index index.html index.htm;} &#x4F60;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4E0D;&#x540C;&#x7684;&#x5934;&#x5230;&#x4E8E;&#x4E0D;&#x540C;&#x7684;&#x6587;&#x4EF6;default cache 1 day12345678910expires +1d; if ($request_uri ~* &quot;^/services/.*$&quot;) { expires +0d; add_header Pragma &quot;no-cache&quot;;} if ($request_uri ~* &quot;^/(index.html)?$&quot;) { expires +1h;} SSL&#x5982;&#x679C;&#x4F60;&#x8981;&#x914D;&#x7F6E; ssl &#x7684;&#x8FDE;&#x63A5;&#x7684;&#x8BDD;12345678server { server_name www.example.com; listen 443; ssl on; ssl_certificate /usr/local/nginx/ssl/cert.pem; ssl_certificate_key /usr/local/nginx/ssl/cert.key; include locations.conf;} END&#xFF01; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[手动本地添加static route]]></title>
    <url>%2Funcategorized%2F2019%2F01%2F24%2F%E6%89%8B%E5%8A%A8%E6%9C%AC%E5%9C%B0%E6%B7%BB%E5%8A%A0static-route.html</url>
    <content type="text"><![CDATA[mac route&#x547D;&#x4EE4;&#x540C;&#x65F6;&#x8BBF;&#x95EE;&#x5185;&#x5916;&#x7F51;123sudo route -n add -net 192.168.0.0 -netmask 255.255.255.0 192.168.5.254 sudo route -n add -net 192.168.3.0 -netmask 255.255.255.0 192.168.5.254 sudo route -n add -net 192.168.2.0 -netmask 255.255.255.0 192.168.5.254 Windows route&#x547D;&#x4EE4;&#x540C;&#x65F6;&#x8BBF;&#x95EE;&#x5185;&#x5916;&#x7F51;123route add -p 192.168.3.0 mask 255.255.255.0 192.168.5.254 route add -p 192.168.0.0 mask 255.255.255.0 192.168.5.254 route add -p 192.168.2.0 mask 255.255.255.0 192.168.5.254 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[linux opepvpn客户端配置静态ip地址]]></title>
    <url>%2Funcategorized%2F2019%2F01%2F24%2Flinux-opepvpn%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%85%8D%E7%BD%AE%E9%9D%99%E6%80%81ip%E5%9C%B0%E5%9D%80.html</url>
    <content type="text"><![CDATA[&#x5B89;&#x88C5;openvpn&#x5BA2;&#x6237;&#x7AEF;1# yum install or apt-get install openvpn &#x670D;&#x52A1;&#x7AEF;&#x751F;&#x6210;key&#x5BC6;&#x94A5;zgc.ovpn&#x4E0A;&#x4F20;&#x5230;/etc/openvpn/etc&#x542F;&#x52A8;&#x547D;&#x4EE4;1# openvpn --daemon --cd /etc/openvpn/etc --config zgc.ovpn --log-append /var/log/openvpn.log &#x670D;&#x52A1;&#x7AEF;&#x67E5;&#x770B;/var/log/openvpn/server.log12# taif -f /var/log/openvpn/server.log### &#x6DFB;&#x52A0;&#x672C;&#x5730;&#x9759;&#x6001;&#x8DEF;&#x7531; &#x914D;&#x7F6E;&#x6587;&#x4EF6;-1123456789101112131415161718192021222324252627282930313233343536port 1194proto udpdev tuncomp-lzokeepalive 10 120persist-keypersist-tunuser nobodygroup nogroupchroot /etc/openvpn/easy-rsa/keys/crl.jailcrl-verify crl.pemca /etc/openvpn/easy-rsa/keys/ca.crtdh /etc/openvpn/easy-rsa/keys/dh2048.pemtls-auth /etc/openvpn/easy-rsa/keys/ta.key 0key /etc/openvpn/easy-rsa/keys/server.keycert /etc/openvpn/easy-rsa/keys/server.crtserver 10.10.10.0 255.255.255.0ifconfig-pool-persist ipp.txtpush &quot;route 10.10.10.0 255.255.255.0&quot; //&#x58F0;&#x660E;192.168.10&#x6BB5;&#x7684;IPpush &quot;route 10.0.0.0 255.255.255.0&quot; //&#x58F0;&#x660E;10.0.0.0&#x6BB5;&#x7684;ipclient-config-dir ccd //&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x63A7;&#x5236;&#x6587;&#x4EF6;route 192.168.10.0 255.255.255.0 //&#x589E;&#x52A0;&#x7684;&#x8DEF;&#x7531;route 10.0.0.0 255.255.255.0 //&#x589E;&#x52A0;&#x7684;&#x8DEF;&#x7531;client-to-clientkeepalive 10 120comp-lzopersist-keypersist-tunstatus /var/log/openvpn/server.logverb 4 //&#x65E5;&#x5FD7;&#x7684;&#x8BB0;&#x5F55;&#x7B49;&#x7EA7; &#x914D;&#x7F6E;&#x6587;&#x4EF6;-2123456789101112131415161718192021222324252627282930313233port 1194proto udpdev tuncomp-lzokeepalive 10 120persist-keypersist-tunuser nobodygroup nogroupchroot /etc/openvpn/easy-rsa/keys/crl.jailcrl-verify crl.pemca /etc/openvpn/easy-rsa/keys/ca.crtdh /etc/openvpn/easy-rsa/keys/dh2048.pemtls-auth /etc/openvpn/easy-rsa/keys/ta.key 0key /etc/openvpn/easy-rsa/keys/server.keycert /etc/openvpn/easy-rsa/keys/server.crtifconfig-pool-persist /var/lib/openvpn/server.ippclient-config-dir ccdstatus /var/log/openvpn/server.logverb 4// virtual subnet unique for openvpn to draw client addresses from// the server will be configured with x.x.x.1// important: must not be used on your networkserver 10.10.10.0 255.255.255.0// configure clients to route all their traffic through the vpnpush &quot;redirect-gateway def1 bypass-dhcp&quot; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[Centos7 内核参数优化]]></title>
    <url>%2Funcategorized%2F2019%2F01%2F24%2FCentos7-%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96.html</url>
    <content type="text"><![CDATA[CentOS7 &#x5185;&#x6838;&#x53C2;&#x6570;&#x4F18;&#x5316; &#x67E5;&#x770B;sysctl.confcat /etc/sysctl.conf &#x5173;&#x95ED;ipv6net.ipv6.conf.all.disable_ipv6 = 1net.ipv6.conf.default.disable_ipv6 = 1 &#x907F;&#x514D;&#x653E;&#x5927;&#x653B;&#x51FB;net.ipv4.icmp_echo_ignore_broadcasts = 1 &#x5F00;&#x542F;&#x6076;&#x610F;icmp&#x9519;&#x8BEF;&#x6D88;&#x606F;&#x4FDD;&#x62A4;net.ipv4.icmp_ignore_bogus_error_responses = 1 &#x5173;&#x95ED;&#x8DEF;&#x7531;&#x8F6C;&#x53D1;net.ipv4.ip_forward = 0net.ipv4.conf.all.send_redirects = 0net.ipv4.conf.default.send_redirects = 0 &#x5F00;&#x542F;&#x53CD;&#x5411;&#x8DEF;&#x5F84;&#x8FC7;&#x6EE4;net.ipv4.conf.all.rp_filter = 1net.ipv4.conf.default.rp_filter = 1 &#x5904;&#x7406;&#x65E0;&#x6E90;&#x8DEF;&#x7531;&#x7684;&#x5305;net.ipv4.conf.all.accept_source_route = 0net.ipv4.conf.default.accept_source_route = 0 &#x5173;&#x95ED;sysrq&#x529F;&#x80FD;kernel.sysrq = 0 core&#x6587;&#x4EF6;&#x540D;&#x4E2D;&#x6DFB;&#x52A0;pid&#x4F5C;&#x4E3A;&#x6269;&#x5C55;&#x540D;kernel.core_uses_pid = 1 &#x5F00;&#x542F;SYN&#x6D2A;&#x6C34;&#x653B;&#x51FB;&#x4FDD;&#x62A4;net.ipv4.tcp_syncookies = 1 &#x4FEE;&#x6539;&#x6D88;&#x606F;&#x961F;&#x5217;&#x957F;&#x5EA6;kernel.msgmnb = 65536kernel.msgmax = 65536 &#x8BBE;&#x7F6E;&#x6700;&#x5927;&#x5185;&#x5B58;&#x5171;&#x4EAB;&#x6BB5;&#x5927;&#x5C0F;byteskernel.shmmax = 68719476736kernel.shmall = 4294967296 timewait&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x9ED8;&#x8BA4;180000net.ipv4.tcp_max_tw_buckets = 6000net.ipv4.tcp_sack = 1net.ipv4.tcp_window_scaling = 1net.ipv4.tcp_rmem = 4096 87380 4194304net.ipv4.tcp_wmem = 4096 16384 4194304net.core.wmem_default = 8388608net.core.rmem_default = 8388608net.core.rmem_max = 16777216net.core.wmem_max = 16777216 &#x6BCF;&#x4E2A;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x63A5;&#x6536;&#x6570;&#x636E;&#x5305;&#x7684;&#x901F;&#x7387;&#x6BD4;&#x5185;&#x6838;&#x5904;&#x7406;&#x8FD9;&#x4E9B;&#x5305;&#x7684;&#x901F;&#x7387;&#x5FEB;&#x65F6;&#xFF0C;&#x5141;&#x8BB8;&#x9001;&#x5230;&#x961F;&#x5217;&#x7684;&#x6570;&#x636E;&#x5305;&#x7684;&#x6700;&#x5927;&#x6570;&#x76EE;net.core.netdev_max_backlog = 262144 &#x9650;&#x5236;&#x4EC5;&#x4EC5;&#x662F;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x7B80;&#x5355;&#x7684;DoS &#x653B;&#x51FB;net.ipv4.tcp_max_orphans = 3276800 &#x672A;&#x6536;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x786E;&#x8BA4;&#x4FE1;&#x606F;&#x7684;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x7684;&#x6700;&#x5927;&#x503C;net.ipv4.tcp_max_syn_backlog = 262144net.ipv4.tcp_timestamps = 0 &#x5185;&#x6838;&#x653E;&#x5F03;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x4E4B;&#x524D;&#x53D1;&#x9001;SYNACK &#x5305;&#x7684;&#x6570;&#x91CF;net.ipv4.tcp_synack_retries = 1 &#x5185;&#x6838;&#x653E;&#x5F03;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x4E4B;&#x524D;&#x53D1;&#x9001;SYN &#x5305;&#x7684;&#x6570;&#x91CF;net.ipv4.tcp_syn_retries = 1 &#x542F;&#x7528;timewait &#x5FEB;&#x901F;&#x56DE;&#x6536;net.ipv4.tcp_tw_recycle = 1 &#x5F00;&#x542F;&#x91CD;&#x7528;&#x3002;&#x5141;&#x8BB8;&#x5C06;TIME-WAIT sockets &#x91CD;&#x65B0;&#x7528;&#x4E8E;&#x65B0;&#x7684;TCP &#x8FDE;&#x63A5;net.ipv4.tcp_tw_reuse = 1net.ipv4.tcp_mem = 94500000 915000000 927000000net.ipv4.tcp_fin_timeout = 1 &#x5F53;keepalive &#x8D77;&#x7528;&#x7684;&#x65F6;&#x5019;&#xFF0C;TCP &#x53D1;&#x9001;keepalive &#x6D88;&#x606F;&#x7684;&#x9891;&#x5EA6;&#x3002;&#x7F3A;&#x7701;&#x662F;2 &#x5C0F;&#x65F6;net.ipv4.tcp_keepalive_time = 30 &#x5141;&#x8BB8;&#x7CFB;&#x7EDF;&#x6253;&#x5F00;&#x7684;&#x7AEF;&#x53E3;&#x8303;&#x56F4;net.ipv4.ip_local_port_range = 1024 65000 &#x4FEE;&#x6539;&#x9632;&#x706B;&#x5899;&#x8868;&#x5927;&#x5C0F;&#xFF0C;&#x9ED8;&#x8BA4;65536net.netfilter.nf_conntrack_max=655350net.netfilter.nf_conntrack_tcp_timeout_established=1200 &#x786E;&#x4FDD;&#x65E0;&#x4EBA;&#x80FD;&#x4FEE;&#x6539;&#x8DEF;&#x7531;&#x8868;net.ipv4.conf.all.accept_redirects = 0net.ipv4.conf.default.accept_redirects = 0net.ipv4.conf.all.secure_redirects = 0net.ipv4.conf.default.secure_redirects = 0 &#x628A;&#x53C2;&#x6570;&#x6DFB;&#x52A0;&#x5230;/etc/sysctl.conf&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x6267;&#x884C;sysctl -p&#x4F7F;&#x53C2;&#x6570;&#x751F;&#x6548;&#xFF0C;&#x6C38;&#x4E45;&#x751F;&#x6548;sysctl -p document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[常用的Linux运维小命令]]></title>
    <url>%2Funcategorized%2F2019%2F01%2F24%2F%E5%B8%B8%E7%94%A8%E7%9A%84Linux%E8%BF%90%E7%BB%B4%E5%B0%8F%E5%91%BD%E4%BB%A4.html</url>
    <content type="text"><![CDATA[&#x6574;&#x7406;&#x4E00;&#x4E9B;&#x670D;&#x52A1;&#x5668;&#x65E5;&#x5FD7;&#x5206;&#x6790;&#x547D;&#x4EE4;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x8BD5;&#x8BD5;&#xFF01; 1&#x3001;&#x67E5;&#x770B;&#x6709;&#x591A;&#x5C11;&#x4E2A;IP&#x8BBF;&#x95EE;&#xFF1A; 1awk &apos;{print $1}&apos; log_file|sort|uniq|wc -l PS: wc -l &#x770B;&#x770B;&#x6709;&#x591A;&#x5C11;&#x884C; 2&#x3001;&#x67E5;&#x770B;&#x67D0;&#x4E00;&#x4E2A;&#x9875;&#x9762;&#x88AB;&#x8BBF;&#x95EE;&#x7684;&#x6B21;&#x6570;&#xFF1A; 1grep &quot;/index.php&quot; log_file | wc -l 3&#x3001;&#x67E5;&#x770B;&#x6BCF;&#x4E00;&#x4E2A;IP&#x8BBF;&#x95EE;&#x4E86;&#x591A;&#x5C11;&#x4E2A;&#x9875;&#x9762;&#xFF1A; 12awk &apos;{++S[$1]} END {for (a in S) print a,S[a]}&apos; log_file &gt; log.txtsort -n -t &apos; &apos; -k 2 log.txt # &#x914D;&#x5408;sort&#x8FDB;&#x4E00;&#x6B65;&#x6392;&#x5E8F; 4&#x3001;&#x5C06;&#x6BCF;&#x4E2A;IP&#x8BBF;&#x95EE;&#x7684;&#x9875;&#x9762;&#x6570;&#x8FDB;&#x884C;&#x4ECE;&#x5C0F;&#x5230;&#x5927;&#x6392;&#x5E8F;&#xFF1A; 1awk &apos;{++S[$1]} END {for (a in S) print S[a],a}&apos; log_file | sort -n 5&#x3001;&#x67E5;&#x770B;&#x67D0;&#x4E00;&#x4E2A;IP&#x8BBF;&#x95EE;&#x4E86;&#x54EA;&#x4E9B;&#x9875;&#x9762;&#xFF1A; 1grep ^111.111.111.111 log_file| awk &apos;{print $1,$7}&apos; 6&#x3001;&#x53BB;&#x6389;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x7EDF;&#x8BA1;&#x7684;&#x9875;&#x9762;&#xFF1A; 1awk &apos;{print $12,$1}&apos; log_file | grep ^\&quot;Mozilla | awk &apos;{print $2}&apos; |sort | uniq | wc -l 7&#x3001;&#x67E5;&#x770B;2015&#x5E74;8&#x6708;16&#x65E5;14&#x65F6;&#x8FD9;&#x4E00;&#x4E2A;&#x5C0F;&#x65F6;&#x5185;&#x6709;&#x591A;&#x5C11;IP&#x8BBF;&#x95EE;: 1awk &apos;{print $4,$1}&apos; log_file | grep 16/Aug/2015:14 | awk &apos;{print $2}&apos;| sort | uniq | wc -l 8&#x3001;&#x67E5;&#x770B;&#x8BBF;&#x95EE;&#x524D;&#x5341;&#x4E2A;ip&#x5730;&#x5740; 123456awk &apos;{print $1}&apos; |sort|uniq -c|sort -nr |head -10 access_loguniq -c &#x76F8;&#x5F53;&#x4E8E;&#x5206;&#x7EC4;&#x7EDF;&#x8BA1;&#x5E76;&#x628A;&#x7EDF;&#x8BA1;&#x6570;&#x653E;&#x5728;&#x6700;&#x524D;&#x9762;cat access.log|awk &apos;{print $1}&apos;|sort|uniq -c|sort -nr|head -10 cat access.log|awk &apos;{counts[$(11)]+=1}; END {for(url in counts) print counts[url], url} 9&#x3001;&#x8BBF;&#x95EE;&#x6B21;&#x6570;&#x6700;&#x591A;&#x7684;10&#x4E2A;&#x6587;&#x4EF6;&#x6216;&#x9875;&#x9762; 1234cat log_file|awk &apos;{print $11}&apos;|sort|uniq -c|sort -nr | head -10cat log_file|awk &apos;{print $11}&apos;|sort|uniq -c|sort -nr|head -20awk &apos;{print $1}&apos; log_file |sort -n -r |uniq -c | sort -n -r | head -20 # &#x8BBF;&#x95EE;&#x91CF;&#x6700;&#x5927;&#x7684;&#x524D;20&#x4E2A;ip 10&#x3001;&#x901A;&#x8FC7;&#x5B50;&#x57DF;&#x540D;&#x8BBF;&#x95EE;&#x6B21;&#x6570;&#xFF0C;&#x4F9D;&#x636E;referer&#x6765;&#x8BA1;&#x7B97;&#xFF0C;&#x7A0D;&#x6709;&#x4E0D;&#x51C6; 1cat access.log | awk &apos;{print $11}&apos; | sed -e &apos; s/http:\/\///&apos; -e &apos; s/\/.*//&apos; | sort | uniq -c | sort -rn | head -20 11&#x3001;&#x5217;&#x51FA;&#x4F20;&#x8F93;&#x5927;&#x5C0F;&#x6700;&#x5927;&#x7684;&#x51E0;&#x4E2A;&#x6587;&#x4EF6; 1cat www.access.log |awk &apos;($7~/\.php/){print $10 &quot; &quot; $1 &quot; &quot; $4 &quot; &quot; $7}&apos;|sort -nr|head -100 12&#x3001;&#x5217;&#x51FA;&#x8F93;&#x51FA;&#x5927;&#x4E8E;200000byte(&#x7EA6;200kb)&#x7684;&#x9875;&#x9762;&#x4EE5;&#x53CA;&#x5BF9;&#x5E94;&#x9875;&#x9762;&#x53D1;&#x751F;&#x6B21;&#x6570; 1cat www.access.log |awk &apos;($10 &gt; 200000 &amp;&amp; $7~/\.php/){print $7}&apos;|sort -n|uniq -c|sort -nr|head -100 13&#x3001;&#x5982;&#x679C;&#x65E5;&#x5FD7;&#x6700;&#x540E;&#x4E00;&#x5217;&#x8BB0;&#x5F55;&#x7684;&#x662F;&#x9875;&#x9762;&#x6587;&#x4EF6;&#x4F20;&#x8F93;&#x65F6;&#x95F4;&#xFF0C;&#x5219;&#x6709;&#x5217;&#x51FA;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x6700;&#x8017;&#x65F6;&#x7684;&#x9875;&#x9762; 1cat www.access.log |awk &apos;($7~/\.php/){print $NF &quot; &quot; $1 &quot; &quot; $4 &quot; &quot; $7}&apos;|sort -nr|head -100 14&#x3001;&#x5217;&#x51FA;&#x6700;&#x6700;&#x8017;&#x65F6;&#x7684;&#x9875;&#x9762;(&#x8D85;&#x8FC7;60&#x79D2;&#x7684;)&#x7684;&#x4EE5;&#x53CA;&#x5BF9;&#x5E94;&#x9875;&#x9762;&#x53D1;&#x751F;&#x6B21;&#x6570; 1cat www.access.log |awk &apos;($NF &gt; 60 &amp;&amp; $7~/\.php/){print $7}&apos;|sort -n|uniq -c|sort -nr|head -100 15&#x3001;&#x5217;&#x51FA;&#x4F20;&#x8F93;&#x65F6;&#x95F4;&#x8D85;&#x8FC7; 30 &#x79D2;&#x7684;&#x6587;&#x4EF6; 1cat www.access.log |awk &apos;($NF &gt; 30){print $7}&apos;|sort -n|uniq -c|sort -nr|head -20 16&#x3001;&#x5217;&#x51FA;&#x5F53;&#x524D;&#x670D;&#x52A1;&#x5668;&#x6BCF;&#x4E00;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x5012;&#x5E8F;&#x6392;&#x5217; 1ps -ef | awk -F &apos; &apos; &apos;{print $8 &quot; &quot; $9}&apos; |sort | uniq -c |sort -nr |head -20 17&#x3001;&#x67E5;&#x770B;apache&#x5F53;&#x524D;&#x5E76;&#x53D1;&#x8BBF;&#x95EE;&#x6570;&#x5BF9;&#x6BD4;httpd.conf&#x4E2D;MaxClients&#x7684;&#x6570;&#x5B57;&#x5DEE;&#x8DDD;&#x591A;&#x5C11;&#x3002; 1netstat -an | grep ESTABLISHED | wc -l 18&#x3001;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x53C2;&#x6570;&#x67E5;&#x770B;&#x6570;&#x636E; 1ps -ef|grep httpd|wc -l &#x7EDF;&#x8BA1;httpd&#x8FDB;&#x7A0B;&#x6570;&#xFF0C;&#x8FDE;&#x4E2A;&#x8BF7;&#x6C42;&#x4F1A;&#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#xFF0C;&#x4F7F;&#x7528;&#x4E8E;Apache&#x670D;&#x52A1;&#x5668;&#x3002;&#x8868;&#x793A;Apache&#x80FD;&#x591F;&#x5904;&#x7406;1388&#x4E2A;&#x5E76;&#x53D1;&#x8BF7;&#x6C42;&#xFF0C;&#x8FD9;&#x4E2A;&#x503C;Apache&#x53EF;&#x6839;&#x636E;&#x8D1F;&#x8F7D;&#x60C5;&#x51B5;&#x81EA;&#x52A8;&#x8C03;&#x6574;&#x3002; 1netstat -nat|grep -i &quot;80&quot;|wc -l netstat -an&#x4F1A;&#x6253;&#x5370;&#x7CFB;&#x7EDF;&#x5F53;&#x524D;&#x7F51;&#x7EDC;&#x94FE;&#x63A5;&#x72B6;&#x6001;&#xFF0C;&#x800C;grep -i &#x201C;80&#x201D;&#x662F;&#x7528;&#x6765;&#x63D0;&#x53D6;&#x4E0E;80&#x7AEF;&#x53E3;&#x6709;&#x5173;&#x7684;&#x8FDE;&#x63A5;&#x7684;&#xFF0C;wc -l&#x8FDB;&#x884C;&#x8FDE;&#x63A5;&#x6570;&#x7EDF;&#x8BA1;&#x3002;&#x6700;&#x7EC8;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x5B57;&#x5C31;&#x662F;&#x5F53;&#x524D;&#x6240;&#x6709;80&#x7AEF;&#x53E3;&#x7684;&#x8BF7;&#x6C42;&#x603B;&#x6570;&#x3002; 1netstat -na|grep ESTABLISHED|wc -l netstat -an&#x4F1A;&#x6253;&#x5370;&#x7CFB;&#x7EDF;&#x5F53;&#x524D;&#x7F51;&#x7EDC;&#x94FE;&#x63A5;&#x72B6;&#x6001;&#xFF0C;&#x800C;grep ESTABLISHED &#x63D0;&#x53D6;&#x51FA;&#x5DF2;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x7684;&#x4FE1;&#x606F;&#x3002; &#x7136;&#x540E;wc -l&#x7EDF;&#x8BA1;&#x3002;&#x6700;&#x7EC8;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x5B57;&#x5C31;&#x662F;&#x5F53;&#x524D;&#x6240;&#x6709;80&#x7AEF;&#x53E3;&#x7684;&#x5DF2;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x7684;&#x603B;&#x6570;&#x3002; 1netstat -nat||grep ESTABLISHED|wc &#x53EF;&#x67E5;&#x770B;&#x6240;&#x6709;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x7684;&#x8BE6;&#x7EC6;&#x8BB0;&#x5F55; 19&#x3001;&#x8F93;&#x51FA;&#x6BCF;&#x4E2A;ip&#x7684;&#x8FDE;&#x63A5;&#x6570;&#xFF0C;&#x4EE5;&#x53CA;&#x603B;&#x7684;&#x5404;&#x4E2A;&#x72B6;&#x6001;&#x7684;&#x8FDE;&#x63A5;&#x6570; 1netstat -n | awk &apos;/^tcp/ {n=split($(NF-1),array,&quot;:&quot;);if(n&lt;=2)++S[array[(1)]];else++S[array[(4)]];++s[$NF];++N} END {for(a in S){printf(&quot;%-20s %s\n&quot;, a, S[a]);++I}printf(&quot;%-20s %s\n&quot;,&quot;TOTAL_IP&quot;,I);for(a in s) printf(&quot;%-20s %s\n&quot;,a, s[a]);printf(&quot;%-20s %s\n&quot;,&quot;TOTAL_LINK&quot;,N);}&apos; 20&#x3001;&#x5176;&#x4ED6;&#x7684;&#x6536;&#x96C6;&#x5206;&#x6790;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x4E0B;2012-05-04&#x8BBF;&#x95EE;&#x9875;&#x9762;&#x6700;&#x9AD8;&#x7684;&#x524D;20&#x4E2A;URL&#x5E76;&#x6392;&#x5E8F; 1cat access.log |grep &apos;04/May/2012&apos;| awk &apos;{print $11}&apos;|sort|uniq -c|sort -nr|head -20 &#x67E5;&#x8BE2;&#x53D7;&#x8BBF;&#x95EE;&#x9875;&#x9762;&#x7684;URL&#x5730;&#x5740;&#x4E2D; &#x542B;&#x6709; www.abc.com &#x7F51;&#x5740;&#x7684; IP &#x5730;&#x5740; 1cat access_log | awk &apos;($11~/\www.abc.com/){print $1}&apos;|sort|uniq -c|sort -nr &#x83B7;&#x53D6;&#x8BBF;&#x95EE;&#x6700;&#x9AD8;&#x7684;10&#x4E2A;IP&#x5730;&#x5740; &#x540C;&#x65F6;&#x4E5F;&#x53EF;&#x4EE5;&#x6309;&#x65F6;&#x95F4;&#x6765;&#x67E5;&#x8BE2; 1cat linewow-access.log|awk &apos;{print $1}&apos;|sort|uniq -c|sort -nr|head -10 &#x65F6;&#x95F4;&#x6BB5;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x65F6;&#x95F4;&#x6BB5;&#x7684;&#x60C5;&#x51B5; 1cat log_file | egrep &apos;15/Aug/2015|16/Aug/2015&apos; |awk &apos;{print $1}&apos;|sort|uniq -c|sort -nr|head -10 &#x5206;&#x6790;2015/8/15&#x5230;2015/8/16&#x8BBF;&#x95EE;&#x201D;/index.php?g=Member&amp;m=Public&amp;a=sendValidCode&#x201D;&#x7684;IP&#x5012;&#x5E8F;&#x6392;&#x5217; 1cat log_file | egrep &apos;15/Aug/2015|16/Aug/2015&apos; | awk &apos;{if($7 == &quot;/index.php?g=Member&amp;m=Public&amp;a=sendValidCode&quot;) print $1,$7}&apos;|sort|uniq -c|sort -nr ($7~/.php/) $7&#x91CC;&#x9762;&#x5305;&#x542B;.php&#x7684;&#x5C31;&#x8F93;&#x51FA;,&#x672C;&#x53E5;&#x7684;&#x610F;&#x601D;&#x662F;&#x6700;&#x8017;&#x65F6;&#x7684;&#x4E00;&#x767E;&#x4E2A;PHP&#x9875;&#x9762; 1cat log_file |awk &apos;($7~/\.php/){print $NF &quot; &quot; $1 &quot; &quot; $4 &quot; &quot; $7}&apos;|sort -nr|head -100 &#x5217;&#x51FA;&#x6700;&#x6700;&#x8017;&#x65F6;&#x7684;&#x9875;&#x9762;(&#x8D85;&#x8FC7;60&#x79D2;&#x7684;)&#x7684;&#x4EE5;&#x53CA;&#x5BF9;&#x5E94;&#x9875;&#x9762;&#x53D1;&#x751F;&#x6B21;&#x6570;* 1cat access.log |awk &apos;($NF &gt; 60 &amp;&amp; $7~/.php/){print $7}&apos;|sort -n|uniq -c|sort -nr|head -100 &#x7EDF;&#x8BA1;&#x7F51;&#x7AD9;&#x6D41;&#x91CF;&#xFF08;G) 1cat access.log |awk &apos;{sum+=$10} END {print sum/1024/1024/1024}&apos; &#x7EDF;&#x8BA1;404&#x7684;&#x8FDE;&#x63A5; 1awk &apos;($9 ~/404/)&apos; access.log | awk &apos;{print $9,$7}&apos; | sort &#x7EDF;&#x8BA1;http status. 12cat access.log |awk &apos;{counts[$(9)]+=1}; END {for(code in counts) print code, counts[code]}&apos; cat access.log |awk &apos;{print $9}&apos;|sort|uniq -c|sort -rn &#x6BCF;&#x79D2;&#x5E76;&#x53D1;&#xFF1A; 1watch &quot;awk &apos;{if($9~/200|30|404/)COUNT[$4]++}END{for( a in COUNT) print a,COUNT[a]}&apos; log_file|sort -k 2 -nr|head -n10&quot; &#x5E26;&#x5BBD;&#x7EDF;&#x8BA1; 12cat apache.log |awk &apos;{if($7~/GET/) count++}END{print &quot;client_request=&quot;count}&apos; cat apache.log |awk &apos;{BYTE+=$11}END{print &quot;client_kbyte_out=&quot;BYTE/1024&quot;KB&quot;}&apos; &#x627E;&#x51FA;&#x67D0;&#x5929;&#x8BBF;&#x95EE;&#x6B21;&#x6570;&#x6700;&#x591A;&#x7684;10&#x4E2A;IP 1cat /tmp/access.log | grep &quot;20/Mar/2011&quot; |awk &apos;{print $3}&apos;|sort |uniq -c|sort -nr|head &#x5F53;&#x5929;ip&#x8FDE;&#x63A5;&#x6570;&#x6700;&#x9AD8;&#x7684;ip&#x90FD;&#x5728;&#x5E72;&#x4E9B;&#x4EC0;&#x4E48;: 1cat access.log | grep &quot;10.0.21.17&quot; | awk &apos;{print $8}&apos; | sort | uniq -c | sort -nr | head -n 10 &#x5C0F;&#x65F6;&#x5355;&#x4F4D;&#x91CC;ip&#x8FDE;&#x63A5;&#x6570;&#x6700;&#x591A;&#x7684;10&#x4E2A;&#x65F6;&#x6BB5; 1awk -vFS=&quot;[:]&quot; &apos;{gsub(&quot;-.*&quot;,&quot;&quot;,$1);num[$2&quot; &quot;$1]++}END{for(i in num)print i,num[i]}&apos; log_file | sort -n -k 3 -r | head -10 &#x627E;&#x51FA;&#x8BBF;&#x95EE;&#x6B21;&#x6570;&#x6700;&#x591A;&#x7684;&#x51E0;&#x4E2A;&#x5206;&#x949F; 1awk &apos;{print $1}&apos; access.log | grep &quot;20/Mar/2011&quot; |cut -c 14-18|sort|uniq -c|sort -nr|head &#x53D6;5&#x5206;&#x949F;&#x65E5;&#x5FD7; 1if [ $DATE_MINUTE != $DATE_END_MINUTE ] ;then #&#x5219;&#x5224;&#x65AD;&#x5F00;&#x59CB;&#x65F6;&#x95F4;&#x6233;&#x4E0E;&#x7ED3;&#x675F;&#x65F6;&#x95F4;&#x6233;&#x662F;&#x5426;&#x76F8;&#x7B49;START_LINE=sed -n &quot;/$DATE_MINUTE/=&quot; $APACHE_LOG|head -n1#&#x5982;&#x679C;&#x4E0D;&#x76F8;&#x7B49;&#xFF0C;&#x5219;&#x53D6;&#x51FA;&#x5F00;&#x59CB;&#x65F6;&#x95F4;&#x6233;&#x7684;&#x884C;&#x53F7;&#xFF0C;&#x4E0E;&#x7ED3;&#x675F;&#x65F6;&#x95F4;&#x6233;&#x7684;&#x884C;&#x53F7; &#x67E5;&#x770B;tcp&#x7684;&#x94FE;&#x63A5;&#x72B6;&#x6001; 12345678910111213141516netstat -nat |awk &apos;{print $6}&apos;|sort|uniq -c|sort -rn netstat -n | awk &apos;/^tcp/ {++S[$NF]};END {for(a in S) print a, S[a]}&apos; netstat -n | awk &apos;/^tcp/ {++state[$NF]}; END {for(key in state) print key,&quot;\t&quot;,state[key]}&apos; netstat -n | awk &apos;/^tcp/ {++arr[$NF]};END {for(k in arr) print k,&quot;\t&quot;,arr[k]}&apos; netstat -n |awk &apos;/^tcp/ {print $NF}&apos;|sort|uniq -c|sort -rn netstat -ant | awk &apos;{print $NF}&apos; | grep -v &apos;[a-z]&apos; | sort | uniq -cnetstat -ant|awk &apos;/ip:80/{split($5,ip,&quot;:&quot;);++S[ip[1]]}END{for (a in S) print S[a],a}&apos; |sort -n netstat -ant|awk &apos;/:80/{split($5,ip,&quot;:&quot;);++S[ip[1]]}END{for (a in S) print S[a],a}&apos; |sort -rn|head -n 10 awk &apos;BEGIN{printf (&quot;http_code\tcount_num\n&quot;)}{COUNT[$10]++}END{for (a in COUNT) printf a&quot;\t\t&quot;COUNT[a]&quot;\n&quot;}&apos; &#x67E5;&#x627E;&#x8BF7;&#x6C42;&#x6570;&#x524D;20&#x4E2A;IP&#xFF08;&#x5E38;&#x7528;&#x4E8E;&#x67E5;&#x627E;&#x653B;&#x6765;&#x6E90;&#xFF09;&#xFF1A; 12netstat -anlp|grep 80|grep tcp|awk &apos;{print $5}&apos;|awk -F: &apos;{print $1}&apos;|sort|uniq -c|sort -nr|head -n20 netstat -ant |awk &apos;/:80/{split($5,ip,&quot;:&quot;);++A[ip[1]]}END{for(i in A) print A[i],i}&apos; |sort -rn|head -n20 &#x7528;tcpdump&#x55C5;&#x63A2;80&#x7AEF;&#x53E3;&#x7684;&#x8BBF;&#x95EE;&#x770B;&#x770B;&#x8C01;&#x6700;&#x9AD8; 1tcpdump -i eth0 -tnn dst port 80 -c 1000 | awk -F&quot;.&quot; &apos;{print $1&quot;.&quot;$2&quot;.&quot;$3&quot;.&quot;$4}&apos; | sort | uniq -c | sort -nr |head -20 &#x67E5;&#x627E;&#x8F83;&#x591A;time_wait&#x8FDE;&#x63A5; 1netstat -n|grep TIME_WAIT|awk &apos;{print $5}&apos;|sort|uniq -c|sort -rn|head -n20 &#x627E;&#x67E5;&#x8F83;&#x591A;&#x7684;SYN&#x8FDE;&#x63A5; 1netstat -an | grep SYN | awk &apos;{print $5}&apos; | awk -F: &apos;{print $1}&apos; | sort | uniq -c | sort -nr | more &#x6839;&#x636E;&#x7AEF;&#x53E3;&#x5217;&#x8FDB;&#x7A0B; 1netstat -ntlp | grep 80 | awk &apos;{print $7}&apos; | cut -d/ -f1 &#x67E5;&#x770B;&#x4E86;&#x8FDE;&#x63A5;&#x6570;&#x548C;&#x5F53;&#x524D;&#x7684;&#x8FDE;&#x63A5;&#x6570; 12netstat -ant | grep $ip:80 | wc -l netstat -ant | grep $ip:80 | grep EST | wc -l &#x67E5;&#x770B;IP&#x8BBF;&#x95EE;&#x6B21;&#x6570; 1netstat -nat|grep &quot;:80&quot;|awk &apos;{print $5}&apos; |awk -F: &apos;{print $1}&apos; | sort| uniq -c|sort -n Linux&#x547D;&#x4EE4;&#x5206;&#x6790;&#x5F53;&#x524D;&#x7684;&#x94FE;&#x63A5;&#x72B6;&#x51B5; 1234567891011121314netstat -n | awk &apos;/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}&apos;watch &quot;netstat -n | awk &apos;/^tcp/ {++S[\$NF]} END {for(a in S) print a, S[a]}&apos;&quot; # &#x901A;&#x8FC7;watch&#x53EF;&#x4EE5;&#x4E00;&#x76F4;&#x76D1;&#x63A7;LAST_ACK 5 &#x5173;&#x95ED;&#x4E00;&#x4E2A;TCP&#x8FDE;&#x63A5;&#x9700;&#x8981;&#x4ECE;&#x4E24;&#x4E2A;&#x65B9;&#x5411;&#x4E0A;&#x5206;&#x522B;&#x8FDB;&#x884C;&#x5173;&#x95ED;&#xFF0C;&#x53CC;&#x65B9;&#x90FD;&#x662F;&#x901A;&#x8FC7;&#x53D1;&#x9001;FIN&#x6765;&#x8868;&#x793A;&#x5355;&#x65B9;&#x5411;&#x6570;&#x636E;&#x7684;&#x5173;&#x95ED;&#xFF0C;&#x5F53;&#x901A;&#x4FE1;&#x53CC;&#x65B9;&#x53D1;&#x9001;&#x4E86;&#x6700;&#x540E;&#x4E00;&#x4E2A;FIN&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53D1;&#x9001;&#x65B9;&#x6B64;&#x65F6;&#x5904;&#x4E8E;LAST_ACK&#x72B6;&#x6001;&#xFF0C;&#x5F53;&#x53D1;&#x9001;&#x65B9;&#x6536;&#x5230;&#x5BF9;&#x65B9;&#x7684;&#x786E;&#x8BA4;&#xFF08;Fin&#x7684;Ack&#x786E;&#x8BA4;&#xFF09;&#x540E;&#x624D;&#x771F;&#x6B63;&#x5173;&#x95ED;&#x6574;&#x4E2A;TCP&#x8FDE;&#x63A5;&#xFF1B;SYN_RECV 30 # &#x8868;&#x793A;&#x6B63;&#x5728;&#x7B49;&#x5F85;&#x5904;&#x7406;&#x7684;&#x8BF7;&#x6C42;&#x6570;&#xFF1B;ESTABLISHED 1597 # &#x8868;&#x793A;&#x6B63;&#x5E38;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x72B6;&#x6001;&#xFF1B;FIN_WAIT1 51 # &#x8868;&#x793A;server&#x7AEF;&#x4E3B;&#x52A8;&#x8981;&#x6C42;&#x5173;&#x95ED;tcp&#x8FDE;&#x63A5;&#xFF1B;FIN_WAIT2 504 # &#x8868;&#x793A;&#x5BA2;&#x6237;&#x7AEF;&#x4E2D;&#x65AD;&#x8FDE;&#x63A5;&#xFF1B;TIME_WAIT 1057 # &#x8868;&#x793A;&#x5904;&#x7406;&#x5B8C;&#x6BD5;&#xFF0C;&#x7B49;&#x5F85;&#x8D85;&#x65F6;&#x7ED3;&#x675F;&#x7684;&#x8BF7;&#x6C42;&#x6570;&#xFF1B; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[Centos7防火墙]]></title>
    <url>%2Funcategorized%2F2019%2F01%2F24%2FCentos7%E9%98%B2%E7%81%AB%E5%A2%99.html</url>
    <content type="text"><![CDATA[&#x5F00;&#x542F;&#x9632;&#x706B;&#x5899;&#x5E76;&#x52A0;&#x5165;&#x5F00;&#x673A;&#x542F;&#x52A8;systemctl start firewalld # &#x5F00;&#x542F;&#x9632;&#x706B;&#x5899; systemctl enable firewalld # &#x5F00;&#x673A;&#x542F;&#x52A8; &#x63A7;&#x5236;&#x7AEF;&#x53E3;/&#x670D;&#x52A1;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#x63A7;&#x5236;&#x7AEF;&#x53E3;&#x7684;&#x5F00;&#x653E;&#xFF0C;&#x4E00;&#x79CD;&#x662F;&#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#x53F7;&#x53E6;&#x4E00;&#x79CD;&#x662F;&#x6307;&#x5B9A;&#x670D;&#x52A1;&#x540D;&#x3002;&#x867D;&#x7136;&#x5F00;&#x653E;http&#x670D;&#x52A1;&#x5C31;&#x662F;&#x5F00;&#x653E;&#x4E86;80&#x7AEF;&#x53E3;&#xFF0C;&#x4F46;&#x662F;&#x8FD8;&#x662F;&#x4E0D;&#x80FD;&#x901A;&#x8FC7;&#x7AEF;&#x53E3;&#x53F7;&#x6765;&#x5173;&#x95ED;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x901A;&#x8FC7;&#x6307;&#x5B9A;&#x670D;&#x52A1;&#x540D;&#x5F00;&#x653E;&#x7684;&#x5C31;&#x8981;&#x901A;&#x8FC7;&#x6307;&#x5B9A;&#x670D;&#x52A1;&#x540D;&#x5173;&#x95ED;&#xFF1B;&#x901A;&#x8FC7;&#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#x53F7;&#x5F00;&#x653E;&#x7684;&#x5C31;&#x8981;&#x901A;&#x8FC7;&#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#x53F7;&#x5173;&#x95ED;&#x3002;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x5C31;&#x662F;&#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#x7684;&#x65F6;&#x5019;&#x4E00;&#x5B9A;&#x8981;&#x6307;&#x5B9A;&#x662F;&#x4EC0;&#x4E48;&#x534F;&#x8BAE;&#xFF0C;tcp&#x8FD8;&#x662F;udp&#x3002;&#x77E5;&#x9053;&#x8FD9;&#x4E2A;&#x4E4B;&#x540E;&#x4EE5;&#x540E;&#x5C31;&#x4E0D;&#x7528;&#x6BCF;&#x6B21;&#x5148;&#x5173;&#x9632;&#x706B;&#x5899;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9;&#x9632;&#x706B;&#x5899;&#x771F;&#x6B63;&#x7684;&#x751F;&#x6548;&#x3002; firewall-cmd --add-service=mysql # &#x5F00;&#x653E;mysql&#x7AEF;&#x53E3; firewall-cmd --remove-service=http # &#x963B;&#x6B62;http&#x7AEF;&#x53E3; firewall-cmd --list-services # &#x67E5;&#x770B;&#x5F00;&#x653E;&#x7684;&#x670D;&#x52A1; firewall-cmd --add-port=``3306``/tcp # &#x5F00;&#x653E;&#x901A;&#x8FC7;tcp&#x8BBF;&#x95EE;``3306 firewall-cmd --remove-port=80tcp # &#x963B;&#x6B62;&#x901A;&#x8FC7;tcp&#x8BBF;&#x95EE;``3306 firewall-cmd --add-port=``233``/udp # &#x5F00;&#x653E;&#x901A;&#x8FC7;udp&#x8BBF;&#x95EE;``233 firewall-cmd --list-ports # &#x67E5;&#x770B;&#x5F00;&#x653E;&#x7684;&#x7AEF;&#x53E3; firewall-cmd --permanent --zone=public --add-port=443/tcp #&#x6C38;&#x4E45;&#x751F;&#x6548; firewall-cmd --permanent --zone=public --add-port=80/tcp #&#x6C38;&#x4E45;&#x751F;&#x6548; firewall-cmd --reload #&#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x9632;&#x706B;&#x5899; &#x4F2A;&#x88C5;IP&#x9632;&#x706B;&#x5899;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x4F2A;&#x88C5;IP&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x5C31;&#x4F1A;&#x7528;&#x5230;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x3002;firewall-cmd --query-masquerade # &#x68C0;&#x67E5;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x4F2A;&#x88C5;IP firewall-cmd --add-masquerade # &#x5141;&#x8BB8;&#x9632;&#x706B;&#x5899;&#x4F2A;&#x88C5;IP firewall-cmd --remove-masquerade# &#x7981;&#x6B62;&#x9632;&#x706B;&#x5899;&#x4F2A;&#x88C5;IP &#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x53EF;&#x4EE5;&#x5C06;&#x6307;&#x5B9A;&#x5730;&#x5740;&#x8BBF;&#x95EE;&#x6307;&#x5B9A;&#x7684;&#x7AEF;&#x53E3;&#x65F6;&#xFF0C;&#x5C06;&#x6D41;&#x91CF;&#x8F6C;&#x53D1;&#x81F3;&#x6307;&#x5B9A;&#x5730;&#x5740;&#x7684;&#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#x3002;&#x8F6C;&#x53D1;&#x7684;&#x76EE;&#x7684;&#x5982;&#x679C;&#x4E0D;&#x6307;&#x5B9A;ip&#x7684;&#x8BDD;&#x5C31;&#x9ED8;&#x8BA4;&#x4E3A;&#x672C;&#x673A;&#xFF0C;&#x5982;&#x679C;&#x6307;&#x5B9A;&#x4E86;ip&#x5374;&#x6CA1;&#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#xFF0C;&#x5219;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;&#x6765;&#x6E90;&#x7AEF;&#x53E3;&#x3002; &#x5982;&#x679C;&#x914D;&#x7F6E;&#x597D;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x4E4B;&#x540E;&#x4E0D;&#x80FD;&#x7528;&#xFF0C;&#x53EF;&#x4EE5;&#x68C0;&#x67E5;&#x4E0B;&#x9762;&#x4E24;&#x4E2A;&#x95EE;&#x9898;&#xFF1A; &#x6BD4;&#x5982;&#x6211;&#x5C06;80&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x81F3;8080&#x7AEF;&#x53E3;&#xFF0C;&#x9996;&#x5148;&#x68C0;&#x67E5;&#x672C;&#x5730;&#x7684;80&#x7AEF;&#x53E3;&#x548C;&#x76EE;&#x6807;&#x7684;8080&#x7AEF;&#x53E3;&#x662F;&#x5426;&#x5F00;&#x653E;&#x76D1;&#x542C;&#x4E86; &#x5176;&#x6B21;&#x68C0;&#x67E5;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x4F2A;&#x88C5;IP&#xFF0C;&#x6CA1;&#x5141;&#x8BB8;&#x7684;&#x8BDD;&#x8981;&#x5F00;&#x542F;&#x4F2A;&#x88C5;IP firewall-cmd --add-forward-port=port=``80``:proto=tcp:toport=``8080 # &#x5C06;``80``&#x7AEF;&#x53E3;&#x7684;&#x6D41;&#x91CF;&#x8F6C;&#x53D1;&#x81F3;``8080 firewall-cmd --add-forward-port=port=``80``:proto=tcp:toaddr=``192.168``.``0.1 # &#x5C06;``80``&#x7AEF;&#x53E3;&#x7684;&#x6D41;&#x91CF;&#x8F6C;&#x53D1;&#x81F3;``192.168``.``0.1 firewall-cmd --add-forward-port=port=``80``:proto=tcp:toaddr=``192.168``.``0.1``:toport=``8080 # &#x5C06;``80``&#x7AEF;&#x53E3;&#x7684;&#x6D41;&#x91CF;&#x8F6C;&#x53D1;&#x81F3;``192.168``.``0.1``&#x7684;``8080``&#x7AEF;&#x53E3; &#x5F53;&#x6211;&#x4EEC;&#x60F3;&#x628A;&#x67D0;&#x4E2A;&#x7AEF;&#x53E3;&#x9690;&#x85CF;&#x8D77;&#x6765;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x9632;&#x706B;&#x5899;&#x4E0A;&#x963B;&#x6B62;&#x90A3;&#x4E2A;&#x7AEF;&#x53E3;&#x8BBF;&#x95EE;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5F00;&#x4E00;&#x4E2A;&#x4E0D;&#x89C4;&#x5219;&#x7684;&#x7AEF;&#x53E3;&#xFF0C;&#x4E4B;&#x540E;&#x914D;&#x7F6E;&#x9632;&#x706B;&#x5899;&#x7684;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#xFF0C;&#x5C06;&#x6D41;&#x91CF;&#x8F6C;&#x53D1;&#x8FC7;&#x53BB;&#x3002; &#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x8FD8;&#x53EF;&#x4EE5;&#x505A;&#x6D41;&#x91CF;&#x5206;&#x53D1;&#xFF0C;&#x4E00;&#x4E2A;&#x9632;&#x706B;&#x5899;&#x62D6;&#x7740;&#x597D;&#x591A;&#x53F0;&#x8FD0;&#x884C;&#x7740;&#x4E0D;&#x540C;&#x670D;&#x52A1;&#x7684;&#x673A;&#x5668;&#xFF0C;&#x7136;&#x540E;&#x7528;&#x9632;&#x706B;&#x5899;&#x5C06;&#x4E0D;&#x540C;&#x7AEF;&#x53E3;&#x7684;&#x6D41;&#x91CF;&#x8F6C;&#x53D1;&#x81F3;&#x4E0D;&#x540C;&#x673A;&#x5668;&#x3002; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[CentOS7利用systemctl添加自定义系统服务]]></title>
    <url>%2Funcategorized%2F2019%2F01%2F24%2FCentOS7%E5%88%A9%E7%94%A8systemctl%E6%B7%BB%E5%8A%A0%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1.html</url>
    <content type="text"><![CDATA[CentOS 7&#x7684;&#x670D;&#x52A1;systemctl&#x811A;&#x672C;&#x5B58;&#x653E;&#x5728;&#xFF1A;/usr/lib/systemd/&#xFF0C;&#x6709;&#x7CFB;&#x7EDF;&#xFF08;system&#xFF09;&#x548C;&#x7528;&#x6237;&#xFF08;user&#xFF09;&#x4E4B;&#x5206;&#xFF0C;&#x9700;&#x8981;&#x5F00;&#x673A;&#x4E0D;&#x767B;&#x9646;&#x5C31;&#x80FD;&#x8FD0;&#x884C;&#x7684;&#x7A0B;&#x5E8F;&#xFF0C;&#x5B58;&#x5728;&#x7CFB;&#x7EDF;&#x670D;&#x52A1;&#x91CC;&#xFF0C;&#x5373;&#xFF1A;/usr/lib/systemd/system&#x76EE;&#x5F55;&#x4E0B; &#x6BCF;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x4EE5;.service&#x7ED3;&#x5C3E;&#xFF0C;&#x4E00;&#x822C;&#x4F1A;&#x5206;&#x4E3A;3&#x90E8;&#x5206;&#xFF1A;[Unit]&#x3001;[Service]&#x548C;[Install]&#xFF0C;&#x6211;&#x5199;&#x7684;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x7528;&#x4E8E;&#x5F00;&#x673A;&#x8FD0;&#x884C;tomcat&#x9879;&#x76EE;:123456789101112131415vim /usr/lib/systemd/system/tomcat.service[Unit]Description=tomcatapiAfter=network.target[Service]Type=forkingPIDFile=/usr/local/tomcat/tomcat.pidExecStart=/usr/local/tomcat/bin/startup.shExecReload=ExecStop=/usr/local/tomcat/bin/shutdown.shPrivateTmp=true[Install]WantedBy=multi-user.target [Unit]&#x90E8;&#x5206;&#x4E3B;&#x8981;&#x662F;&#x5BF9;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x7684;&#x8BF4;&#x660E;&#xFF0C;&#x5185;&#x5BB9;&#x5305;&#x62EC;Description&#x548C;After&#xFF0C;Description&#x7528;&#x4E8E;&#x63CF;&#x8FF0;&#x670D;&#x52A1;&#xFF0C;After&#x7528;&#x4E8E;&#x63CF;&#x8FF0;&#x670D;&#x52A1;&#x7C7B;&#x522B;;[Service]&#x90E8;&#x5206;&#x662F;&#x670D;&#x52A1;&#x7684;&#x5173;&#x952E;&#xFF0C;&#x662F;&#x670D;&#x52A1;&#x7684;&#x4E00;&#x4E9B;&#x5177;&#x4F53;&#x8FD0;&#x884C;&#x53C2;&#x6570;&#x7684;&#x8BBE;&#x7F6E;&#xFF0C;&#x8FD9;&#x91CC;Type=forking&#x662F;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;PIDFile&#x4E3A;&#x5B58;&#x653E;PID&#x7684;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#xFF0C;ExecStart&#x4E3A;&#x670D;&#x52A1;&#x7684;&#x8FD0;&#x884C;&#x547D;&#x4EE4;&#xFF0C;ExecReload&#x4E3A;&#x91CD;&#x542F;&#x547D;&#x4EE4;&#xFF0C;ExecStop&#x4E3A;&#x505C;&#x6B62;&#x547D;&#x4EE4;&#xFF0C;PrivateTmp=True&#x8868;&#x793A;&#x7ED9;&#x670D;&#x52A1;&#x5206;&#x914D;&#x72EC;&#x7ACB;&#x7684;&#x4E34;&#x65F6;&#x7A7A;&#x95F4;&#xFF0C;&#x6CE8;&#x610F;&#xFF1A;[Service]&#x90E8;&#x5206;&#x7684;&#x542F;&#x52A8;&#x3001;&#x91CD;&#x542F;&#x3001;&#x505C;&#x6B62;&#x547D;&#x4EE4;&#x5168;&#x90E8;&#x8981;&#x6C42;&#x4F7F;&#x7528;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;&#xFF0C;&#x4F7F;&#x7528;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#x5219;&#x4F1A;&#x62A5;&#x9519;;[Install]&#x90E8;&#x5206;&#x662F;&#x670D;&#x52A1;&#x5B89;&#x88C5;&#x7684;&#x76F8;&#x5173;&#x8BBE;&#x7F6E;&#xFF0C;&#x53EF;&#x8BBE;&#x7F6E;&#x4E3A;&#x591A;&#x7528;&#x6237;&#x7684;&#x670D;&#x52A1;&#x811A;&#x672C;&#x6309;&#x7167;&#x4E0A;&#x9762;&#x7F16;&#x5199;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x4EE5;754&#x7684;&#x6743;&#x9650;&#x4FDD;&#x5B58;&#x5728;/usr/lib/systemd/system&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x8FD9;&#x65F6;&#x5C31;&#x53EF;&#x4EE5;&#x5229;&#x7528;systemctl&#x8FDB;&#x884C;&#x6D4B;&#x8BD5;&#x4E86; &#x6700;&#x540E;&#x7528;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x5C06;&#x670D;&#x52A1;&#x52A0;&#x5165;&#x5F00;&#x673A;&#x542F;&#x52A8;&#x5373;&#x53EF;&#xFF1A;1systemctl enable tomcat &#x5982;&#x679C;&#x4FEE;&#x6539;&#x8FC7;&#x8FC7;&#x811A;&#x672C;&#x6216;&#x8005;&#x914D;&#x7F6E;&#xFF0C;&#x9700;&#x8981;&#x91CD;&#x65B0;reload&#x4E0B;1systemctl daemon-reload document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[给OpenVPN添加用户访问日志]]></title>
    <url>%2Funcategorized%2F2019%2F01%2F24%2F%E7%BB%99OpenVPN%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97.html</url>
    <content type="text"><![CDATA[1&#x3001;&#x5EFA;&#x7ACB;openvpn&#x7684;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x548C;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x811A;&#x672C;&#x5EFA;&#x7ACB;/etc/openvpn/connect&#x6587;&#x4EF6;&#xFF0C;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;12345678#!/bin/bashday=`date +%F`if [ -f /var/log/openvpn/$day ];thenecho &quot;`date &apos;+%F %H:%M:%S&apos;` User $common_name is logged in&quot; &gt;&gt;/var/log/openvpn/$dayelsetouch /var/log/openvpn/$dayecho &quot;`date &apos;+%F %H:%M:%S&apos;` User $common_name is logged in&quot; &gt;&gt;/var/log/openvpn/$dayfi &#x5EFA;&#x7ACB;/etc/openvpn/disconnect&#x6587;&#x4EF6;&#xFF0C;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;12345678#!/bin/bashday=`date +%F`if [ -f /var/log/openvpn/$day ];thenecho &quot;`date &apos;+%F %H:%M:%S&apos;` User $common_name is logged off&quot; &gt;&gt;/var/log/openvpn/$dayelsetouch /var/log/openvpn/$dayecho &quot;`date &apos;+%F %H:%M:%S&apos;` User $common_name is logged off&quot; &gt;&gt;/var/log/openvpn/$dayfi &#x8981;&#x5C06;&#x8FD9;&#x4E24;&#x4E2A;&#x811A;&#x672C;&#x8D4B;&#x4E88;&#x6267;&#x884C;&#x6743;&#x9650;12chmod +x /etc/openvpn/connectchmod +x /etc/openvpn/disconnect &#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x4E00;&#x70B9;&#x662F;&#x56E0;&#x4E3A;openvpn&#x662F;&#x4EE5;nodody&#x5E10;&#x53F7;&#x5728;&#x8FD0;&#x884C;&#xFF0C;&#x56E0;&#x6B64;&#x5FC5;&#x987B;&#x8D4B;&#x4E88;nodody&#x5E10;&#x53F7;&#x5BF9;/var/log/openvpn&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;&#x7684;&#x5199;&#x6743;&#x9650;&#xFF0C;&#x5426;&#x5219;openvpn&#x7684;&#x8FD0;&#x884C;&#x5C06;&#x53D7;&#x5230;&#x5F71;&#x54CD;&#xFF0C;&#x7528;&#x6237;&#x767B;&#x5F55;&#x8FC7;&#x7A0B;&#x4E0D;&#x80FD;&#x5B8C;&#x6210;&#x3002;**2&#x3001;&#x4FEE;&#x6539;openvpn&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x542F;&#x7528;&#x811A;&#x672C;&#x4FEE;&#x6539;/etc/openvpn/server.conf&#xFF0C;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4E24;&#x884C;12client-connect /etc/openvpn/connectclient-disconnect /etc/openvpn/disconnect &#x8FD9;&#x6837;&#x6BCF;&#x5929;&#x5C31;&#x4F1A;&#x5728;/var/log/openvpn&#x4E0B;&#x9762;&#x5EFA;&#x7ACB;&#x6587;&#x4EF6;&#x540D;&#x4E3A;2007-06-04&#x8FD9;&#x6837;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x8BE5;&#x6587;&#x4EF6;&#x8BB0;&#x5F55;&#x4E86;&#x5F53;&#x5929;&#x767B;&#x9646;openvpn&#x7684;&#x7528;&#x6237;&#x540D;&#x548C;&#x65F6;&#x95F4;&#xFF0C;&#x8F93;&#x51FA;&#x4F8B;&#x5982;&#xFF1A;122007-06-04 11:51:53 User rwen is logged in2007-06-04 11:55:54 User rwen is logged off &#xFF08;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x56E0;&#x4E3A;openvpn&#x672C;&#x8EAB;&#x5224;&#x65AD;&#x673A;&#x5236;&#x7684;&#x539F;&#x56E0;&#xFF0C;&#x767B;&#x51FA;&#x65F6;&#x95F4;&#x6BD4;&#x5B9E;&#x9645;&#x767B;&#x51FA;&#x65F6;&#x95F4;&#x6162;3&#x5206;&#x949F;&#xFF09; 3&#x3001;&#x542F;&#x52A8;&#x672C;&#x673A;&#x7684;sendmail12chkconfig --level 3 sendmail onservice sendmail start 4&#x3001;&#x5EFA;&#x7ACB;/etc/openvpn/mail2admin,&#x5E76;&#x8D4B;&#x4E88;&#x6267;&#x884C;&#x6743;&#x9650; chmod +x mail2admin12345#!/bin/bashtoday=`date +%F`if [ -f /var/log/openvpn/$today ];thenmail -s &quot;$today openvpn user access log&quot; [username@yourcompany.com](http://www.360doc.com/mailto:rwen@corp.netease.com)&lt; /var/log/openvpn/$todayfi 5&#x3001;&#x5EFA;&#x7ACB;cron&#x5DE5;&#x4F5C;&#x8868;&#xFF0C;&#x6BCF;&#x5929;&#x5B9A;&#x65F6;23&#xFF1A;55&#x5206;&#x53D1;&#x9001;&#x5F53;&#x5929;&#x7684;&#x65E5;&#x5FD7;&#x7ED9;&#x7BA1;&#x7406;&#x5458;12#crontab -e55 23 * * * /etc/openvpn/mail2admin &#x641E;&#x5B9A;&#xFF01; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[Docker私有仓库Harbor部署https]]></title>
    <url>%2Funcategorized%2F2019%2F01%2F24%2FDocker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93Harbor%E9%83%A8%E7%BD%B2https.html</url>
    <content type="text"><![CDATA[&#x79C1;&#x6709;&#x4ED3;&#x5E93;harbor&#x914D;&#x7F6E;HTTPS&#x90E8;&#x7F72;1.&#x73AF;&#x5883;&#x88C5;&#x5907;&#xFF1A;Portus,Portus&#x548C;harbor&#x90FD;&#x662F;&#x5F00;&#x6E90;&#x7684;Registry&#x670D;&#x52A1;&#x5668; ,Portusv&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#xFF1A;docker-Portusv2.1&#x955C;&#x50CF;&#x4ED3;&#x5E93;&#x5FEB;&#x901F;&#x90E8;&#x7F72;&#x4F7F;&#x7528;http://www.linuxea.com/1547.html&#x5F53;&#x7136;&#xFF0C;&#x8FD8;&#x6709;gitlab8.8.0&#x63D0;&#x4F9B;&#x7684;docker Registry&#xFF0C;&#x4E5F;&#x662F;&#x975E;&#x5E38;&#x597D;&#x7528;&#x7684;,&#x53EF;&#x53C2;&#x8003;https://about.gitlab.com/2016/05/23/gitlab-container-registry/centos7.2.1511,python2.7&#x4EE5;&#x4E0A;&#x7248;&#x672C;&#xFF0C;docker&#x5F15;&#x64CE;1.10&#x6216;&#x8005;&#x66F4;&#x9AD8;&#x7248;&#x672C;&#xFF0C;docker compose&#x9700;&#x8981;1.6.0&#x6216;&#x8005;&#x66F4;&#x9AD8;&#x7248;&#x672C;harbor&#x5B89;&#x88C5;&#x53C2;&#x8003;&#xFF1A;https://github.com/vmware/harbor/blob/master/docs/installation_guide.mdharbor&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A;https://github.com/vmware/harbor/releasesvmware&#x5B89;&#x88C5;&#x53C2;&#x8003;&#xFF1A;https://github.com/vmware/harbor/blob/master/docs/installation_guide_ova.md&#x5B89;&#x88C5;&#x5305;&#x5206;&#x4E3A;&#x79BB;&#x7EBF;&#xFF0C;&#x7F51;&#x7EDC;&#xFF0C;&#x6E90;&#x7801;&#x5B89;&#x88C5;&#x7F51;&#x7EDC;&#x5B89;&#x88C5;&#x5305;&#xFF1A;https://github.com/vmware/harbor/releases/download/1.1.2/harbor-online-installer-1.1.2.tgz&#x79BB;&#x7EBF;&#x5B89;&#x88C5;&#x5305;&#xFF1A;https://github.com/vmware/harbor/releases/download/1.1.2/harbor-offline-installer-1.1.2.tgz&#x6E90;&#x4EE3;&#x7801;&#xFF1B;https://github.com/vmware/harbor/archive/1.1.2.tar.gz&#x4EC0;&#x4E48;&#x662F;harbor&#x7B80;&#x5355;&#x7684;&#x8BF4;&#xFF0C;Harbor &#x662F;&#x4E00;&#x4E2A;&#x4F01;&#x4E1A;&#x7EA7;&#x7684; Docker Registry&#xFF0C;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0; images &#x7684;&#x79C1;&#x6709;&#x5B58;&#x50A8;&#x548C;&#x65E5;&#x5FD7;&#x7EDF;&#x8BA1;&#x6743;&#x9650;&#x63A7;&#x5236;&#x7B49;&#x529F;&#x80FD;&#xFF0C;&#x5E76;&#x652F;&#x6301;&#x521B;&#x5EFA;&#x591A;&#x9879;&#x76EE;(Harbor &#x63D0;&#x51FA;&#x7684;&#x6982;&#x5FF5;)&#xFF0C;&#x57FA;&#x4E8E;&#x5B98;&#x65B9; Registry V2 &#x5B9E;&#x73B0;&#x3002; 2.&#x914D;&#x7F6E;&#x53C2;&#x6570;&#xFF1A;12345678910111213141516171819202122232425262728&#x5728;harbor.cfg&#x4E2D;&#x4FEE;&#x6539;hostname = &#x57DF;&#x540D;&#x914D;&#x7F6E;&#x53C2;&#x6570;&#x4F4D;&#x4E8E;&#x6587;&#x4EF6;harbor.cfg&#x3002;&#x53C2;&#x6570;&#x8BF4;&#x660E;&#x5982;&#x4E0B;-&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x6700;&#x8D77;&#x7801;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x6539;&#x53D8;&#x4E3B;&#x673A;&#x5C5E;&#x6027;&#x3002;&#x4E3B;&#x673A;&#xFF1A;&#x76EE;&#x6807;&#x4E3B;&#x673A;&#x7684;&#x4E3B;&#x673A;&#x540D;&#xFF0C;&#x8FD9;&#x662F;&#x7528;&#x4E8E;&#x8BBF;&#x95EE;&#x7528;&#x6237;&#x754C;&#x9762;&#x548C;&#x6CE8;&#x518C;&#x8868;&#x670D;&#x52A1;&#x3002;&#x5B83;&#x5E94;&#x8BE5;&#x662F;IP&#x5730;&#x5740;&#x6216;&#x76EE;&#x6807;&#x8BA1;&#x7B97;&#x673A;&#x7684;&#x5B8C;&#x5168;&#x9650;&#x5B9A;&#x57DF;&#x540D;&#xFF08;FQDN&#xFF09;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;192.168.1.10&#x6216;reg.yourdomain.com&#x3002;&#x4E0D;&#x8981;&#x4F7F;&#x7528;localhost&#x6216;127.0.0.1&#x4F5C;&#x4E3A;&#x4E3B;&#x673A;&#x540D;-&#x6CE8;&#x518C;&#x8868;&#x670D;&#x52A1;&#x9700;&#x8981;&#x7531;&#x5916;&#x90E8;&#x5BA2;&#x6237;&#x7AEF;&#x8BBF;&#x95EE;&#xFF01;ui_url_protocol&#xFF1A;&#xFF08;HTTP&#x6216;HTTPS&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;HTTP&#xFF09;&#x7528;&#x4E8E;&#x8BBF;&#x95EE;&#x7528;&#x6237;&#x754C;&#x9762;&#x548C;&#x4EE4;&#x724C;/&#x901A;&#x77E5;&#x670D;&#x52A1;&#x7684;&#x534F;&#x8BAE;&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD9;&#x662F;HTTP&#x3002;&#x8981;&#x5EFA;&#x7ACB;HTTPS&#x534F;&#x8BAE;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;&#x914D;&#x7F6E;&#x4E0E;&#x6E2F;HTTPS&#x8BBF;&#x95EE;&#x3002;&#x7535;&#x5B50;&#x90AE;&#x4EF6;&#x8BBE;&#x7F6E;&#xFF1A;&#x9700;&#x8981;&#x5BF9;&#x6E2F;&#x8FD9;&#x4E9B;&#x53C2;&#x6570;&#xFF0C;&#x4EE5;&#x4FBF;&#x80FD;&#x591F;&#x5411;&#x7528;&#x6237;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x201C;&#x5BC6;&#x7801;&#x91CD;&#x8BBE;&#x201D;&#x7535;&#x5B50;&#x90AE;&#x4EF6;&#xFF0C;&#x4EE5;&#x53CA;&#x662F;&#x5426;&#x9700;&#x8981;&#x8BE5;&#x529F;&#x80FD;&#x53EA;&#x662F;&#x5FC5;&#x8981;&#x7684;&#x3002;&#x8FD8;&#x6709;&#xFF0C;&#x5343;&#x4E07;&#x6CE8;&#x610F;&#xFF0C;&#x5728;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;SSL&#x8FDE;&#x63A5;&#x662F;&#x6CA1;&#x6709;&#x542F;&#x7528;-&#x5982;&#x679C;&#x4F60;&#x7684;SMTP&#x670D;&#x52A1;&#x5668;&#x9700;&#x8981;SSL&#xFF0C;&#x4F46;&#x4E0D;&#x652F;&#x6301;STARTTLS&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x5E94;&#x8BE5;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;&#x542F;&#x7528;SSL email_ssl = TRUE&#x3002;email_server = smtp.mydomain.comemail_server_port = 25email_username = sample_admin@mydomain.comemail_password = abcEMAIL_FROM =&#x7BA1;&#x7406;&#x5458;sample_admin@mydomain.comemail_ssl = falseharbor_admin_password&#xFF1A;&#x7BA1;&#x7406;&#x5458;&#x7684;&#x521D;&#x59CB;&#x5BC6;&#x7801;&#x3002;&#x6B64;&#x5BC6;&#x7801;&#x4EC5;&#x5728;&#x6E2F;&#x53E3;&#x9996;&#x6B21;&#x53D1;&#x5E03;&#x65F6;&#x751F;&#x6548;&#x3002;&#x4E4B;&#x540E;&#xFF0C;&#x5C06;&#x5FFD;&#x7565;&#x6B64;&#x8BBE;&#x7F6E;&#xFF0C;&#x5E76;&#x4E14;&#x5E94;&#x5728;UI&#x4E2D;&#x8BBE;&#x7F6E;&#x7BA1;&#x7406;&#x5458;&#x7684;&#x5BC6;&#x7801;&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#x9ED8;&#x8BA4;&#x7684;&#x7528;&#x6237;&#x540D;/&#x5BC6;&#x7801;&#x7BA1;&#x7406;/ Harbor12345&#x3002;auth_mode&#xFF1A;&#x7528;&#x4E8E;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x7684;&#x7C7B;&#x578B;&#x3002;&#x7F3A;&#x7701;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5B83;&#x662F;db_auth&#xFF0C;&#x5373;&#x51ED;&#x8BC1;&#x5B58;&#x50A8;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x3002;&#x5BF9;&#x4E8E;LDAP&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#xFF0C;&#x6B64;&#x8BBE;&#x7F6E;&#x4E86;ldap_auth&#x3002;ldap_url&#xFF1A;&#x672C;LDAP&#x7AEF;&#x70B9;URL&#xFF08;&#x4F8B;&#x5982;ldaps://ldap.mydomain.com&#xFF09;&#x3002; &#x4EC5;&#x5F53;&#x4F7F;&#x7528;auth_mode&#x8BBE;&#x4E3A;&#x4E86;ldap_auth&#x3002;ldap_searchdn&#xFF1A;&#x8C01;&#x6709;&#x6743;&#x641C;&#x7D22;LDAP / AD&#x670D;&#x52A1;&#x5668;&#xFF08;&#x4F8B;&#x5982;&#x6743;&#x9650;&#x7684;&#x7528;&#x6237;&#x7684;DN uid=admin,ou=people,dc=mydomain,dc=com&#xFF09;&#x3002;ldap_search_pwd&#xFF1A;&#x7531;&#x6307;&#x5B9A;&#x7684;&#x7528;&#x6237;&#x7684;&#x5BC6;&#x7801;ldap_searchdn&#x3002;LDAP_BASEDN&#xFF1A;&#x57FA;&#x672C;DN&#x6765;&#x67E5;&#x627E;&#x7528;&#x6237;&#xFF0C;&#x4F8B;&#x5982;ou=people,dc=mydomain,dc=com&#x3002; &#x4EC5;&#x5F53;&#x4F7F;&#x7528;auth_mode&#x8BBE;&#x4E3A;&#x4E86;ldap_auth&#x3002;ldap_filter&#xFF1A;&#x7528;&#x4E8E;&#x67E5;&#x627E;&#x7528;&#x6237;&#xFF0C;&#x4F8B;&#x5982;&#x641C;&#x7D22;&#x7B5B;&#x9009;&#x5668;(objectClass=person)&#x3002;LDAP_UID&#xFF1A;&#x7528;&#x4E8E;&#x4E00;&#x4E2A;LDAP&#x641C;&#x7D22;&#x671F;&#x95F4;&#x7528;&#x6237;&#x5339;&#x914D;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x6D41;&#x4F53;&#xFF0C;CN&#xFF0C;&#x7535;&#x5B50;&#x90AE;&#x4EF6;&#x6216;&#x5176;&#x4ED6;&#x5C5E;&#x6027;&#x3002;ldap_scope&#xFF1A;&#x8303;&#x56F4;&#x4EE5;&#x641C;&#x7D22;&#x7528;&#x6237;&#xFF0C;1- LDAP_SCOPE_BASE&#xFF0C;2- LDAP_SCOPE_ONELEVEL&#xFF0C;3- LDAP_SCOPE_SUBTREE&#x3002;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;3&#x3002;DB_PASSWORD&#xFF1A;&#x5BF9;&#x4E8E;&#x7528;&#x4E8E;MySQL&#x6570;&#x636E;&#x5E93;&#x7684;root&#x5BC6;&#x7801;db_auth&#x3002;&#x66F4;&#x6539;&#x6B64;&#x5BC6;&#x7801;&#x4EE5;&#x7528;&#x4E8E;&#x4EFB;&#x4F55;&#x751F;&#x4EA7;&#x4F7F;&#x7528;&#xFF01;self_registration&#xFF1A;&#xFF08;&#x4E0A;&#x6216;&#x5173;&#x95ED;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x4E0A;&#xFF09;&#x542F;&#x7528;/&#x7981;&#x7528;&#x7528;&#x6237;&#x6CE8;&#x518C;&#x81EA;&#x5DF1;&#x7684;&#x80FD;&#x529B;&#x3002;&#x7981;&#x7528;&#x65F6;&#xFF0C;&#x65B0;&#x7528;&#x6237;&#x53EA;&#x80FD;&#x7531;&#x7BA1;&#x7406;&#x5458;&#x7528;&#x6237;&#x521B;&#x5EFA;&#xFF0C;&#x53EA;&#x6709;&#x7BA1;&#x7406;&#x5458;&#x7528;&#x6237;&#x624D;&#x80FD;&#x5728;Harbor&#x4E2D;&#x521B;&#x5EFA;&#x65B0;&#x7528;&#x6237;&#x3002; &#x6CE8;&#xFF1A;&#x5F53;auth_mode&#x8BBE;&#x4E3A;&#x4E86;ldap_auth&#xFF0C;&#x81EA;&#x6CE8;&#x518C;&#x529F;&#x80FD;&#x603B;&#x662F;&#x7981;&#x7528;&#xFF0C;&#x8FD9;&#x4E2A;&#x6807;&#x5FD7;&#x5C06;&#x88AB;&#x5FFD;&#x7565;&#x3002;use_compressed_js&#xFF1A;&#xFF08;&#x4E0A;&#x6216;&#x5173;&#x95ED;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x4E0A;&#xFF09;&#xFF0C;&#x4F9B;&#x751F;&#x4EA7;&#x4F7F;&#x7528;&#xFF0C;&#x628A;&#x8FD9;&#x4E2A;&#x6807;&#x5FD7;&#x4E0A;&#x3002;&#x5728;&#x5F00;&#x53D1;&#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;&#x5C06;&#x5176;&#x8BBE;&#x7F6E;&#x4E3A;&#x5173;&#x95ED;&#xFF0C;&#x8FD9;&#x6837;&#x7684;JS&#x6587;&#x4EF6;&#x53EF;&#x4EE5;&#x5355;&#x72EC;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x3002;max_job_workers&#xFF1A;&#xFF08;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;3&#xFF09;&#x590D;&#x5236;&#x5DE5;&#x4EBA;&#x5C31;&#x4E1A;&#x670D;&#x52A1;&#x7684;&#x6700;&#x5927;&#x6570;&#x91CF;&#x3002;&#x5BF9;&#x4E8E;&#x6BCF;&#x4E2A;&#x56FE;&#x50CF;&#x590D;&#x5236;&#x4F5C;&#x4E1A;&#xFF0C;&#x5DE5;&#x4F5C;&#x7A0B;&#x5E8F;&#x5C06;&#x5B58;&#x50A8;&#x5E93;&#x7684;&#x6240;&#x6709;&#x6807;&#x8BB0;&#x540C;&#x6B65;&#x5230;&#x8FDC;&#x7A0B;&#x76EE;&#x6807;&#x3002;&#x589E;&#x52A0;&#x6B64;&#x6570;&#x76EE;&#x5141;&#x8BB8;&#x7CFB;&#x7EDF;&#x4E2D;&#x66F4;&#x591A;&#x7684;&#x5E76;&#x53D1;&#x590D;&#x5236;&#x4F5C;&#x4E1A;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x7531;&#x4E8E;&#x6BCF;&#x4E2A;&#x5DE5;&#x4EBA;&#x6D88;&#x8017;&#x4E00;&#x5B9A;&#x91CF;&#x7684;&#x7F51;&#x7EDC;/ CPU / IO&#x8D44;&#x6E90;&#xFF0C;&#x8BF7;&#x6839;&#x636E;&#x4E3B;&#x673A;&#x7684;&#x786C;&#x4EF6;&#x8D44;&#x6E90;&#x4ED4;&#x7EC6;&#x9009;&#x62E9;&#x6B64;&#x5C5E;&#x6027;&#x7684;&#x503C;&#x3002;token_expiration&#xFF1A;&#x5230;&#x671F;&#x65F6;&#x95F4;&#xFF08;&#x5206;&#x949F;&#xFF09;&#x901A;&#x8FC7;&#x4EE4;&#x724C;&#x670D;&#x52A1;&#x521B;&#x5EFA;&#x7684;&#x4EE4;&#x724C;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;30&#x5206;&#x949F;&#x3002;verify_remote_cert&#xFF1A;&#xFF08;&#x4E0A;&#x6216;&#x5173;&#x95ED;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x4E0A;&#xFF09;&#x8BE5;&#x6807;&#x5FD7;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x9A8C;&#x8BC1;SSL / TLS&#x8BC1;&#x4E66;&#x65F6;&#xFF0C;&#x6E2F;&#x53E3;&#xFF0C;&#x8FDC;&#x7A0B;&#x6CE8;&#x518C;&#x8868;&#x5B9E;&#x4F8B;&#x901A;&#x4FE1;&#x3002;&#x8BBE;&#x7F6E;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x5173;&#x7ED5;&#x8FC7;SSL / TLS&#x9A8C;&#x8BC1;&#xFF0C;&#x8FD9;&#x662F;&#x901A;&#x5E38;&#x7528;&#x5728;&#x8FDC;&#x7A0B;&#x5B9E;&#x4F8B;&#x6709;&#x81EA;&#x7B7E;&#x540D;&#x6216;&#x4E0D;&#x53D7;&#x4FE1;&#x4EFB;&#x7684;&#x8BC1;&#x4E66;&#x3002;customize_crt&#xFF1A;&#xFF08;&#x4E0A;&#x6216;&#x5173;&#x95ED;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x4E0A;&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x6B64;&#x5C5E;&#x6027;&#x4E0A;&#xFF0C;&#x5728;&#x51C6;&#x5907;&#x811A;&#x672C;&#x521B;&#x5EFA;&#x6CE8;&#x518C;&#x8868;&#x7684;&#x4EE4;&#x724C;&#x751F;&#x6210;/&#x9A8C;&#x8BC1;&#x79C1;&#x94A5;&#x548C;&#x6839;&#x8BC1;&#x4E66;&#x3002;&#x4EE5;&#x4E0B;&#x5C5E;&#x6027;&#xFF1A;crt_country&#xFF0C;crt_state&#xFF0C;crt_location&#xFF0C;crt_organization&#xFF0C;crt_organizationalunit&#xFF0C;crt_commonname&#xFF0C;crt_email&#x88AB;&#x7528;&#x4F5C;&#x7528;&#x4E8E;&#x4EA7;&#x751F;&#x5BC6;&#x94A5;&#x7684;&#x53C2;&#x6570;&#x3002;&#x8BE5;&#x5C5E;&#x6027;&#x8BBE;&#x7F6E;&#x4E3A;&#x5173;&#x95ED;&#x65F6;&#xFF0C;&#x5BC6;&#x94A5;&#x548C;&#x6839;&#x8BC1;&#x4E66;&#x662F;&#x7531;&#x5916;&#x90E8;&#x6765;&#x6E90;&#x63D0;&#x4F9B;&#x3002;&#x8BF7;&#x53C2;&#x9605;&#x81EA;&#x5B9A;&#x4E49;&#x952E;&#x548C;&#x6E2F;&#x4EE4;&#x724C;&#x670D;&#x52A1;&#x8BC1;&#x4E66;&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#x3002; 3.&#x5F00;&#x59CB;&#x5B89;&#x88C5;1234567[root@harbor ~]# yum install epel-release;[root@harbor ~]# yum install openssl openssl-devel docker-io[root@harbor ~]# mkdir -p /data/cert &amp;&amp; cd /data/cert/[root@harbor ~]# openssl req -newkey rsa:4096 -nodes -sha256 -keyout ca.key -x509 -days 365 -out ca.crt -subj &quot;/C=CN/L=London/O=Company Ltd/CN=nginx-docker&quot;[root@harbor ~]# openssl req -newkey rsa:4096 -nodes -sha256 -keyout harbor.wolf7.org.key -out server.csr -subj &quot;/C=CN/L=London/O=Company Ltd/CN=harbor.wolf7.org&quot;[root@harbor ~]# openssl x509 -req -days 365 -in server.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out harbor.wolf7.org.crt[root@harbor ~]# cd .. &#x5B89;&#x88C5;docker-compose12curl -L https://github.com/docker/compose/releases/download/1.6.2/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose;chmod +x /usr/local/bin/docker-compose; Download Harbor 1.1.2Harbor git&#x5730;&#x5740;&#xFF1A;https://github.com/vmware/harbor/releases&#x4E0B;&#x8F7D; Harbor &#x79BB;&#x7EBF;&#x5B89;&#x88C5;&#x5305;12cd /usr/local/src;wget https://github.com/vmware/harbor/releases/download/v1.1.2/harbor-offline-installer-v1.1.2.tgz`tar xvf harbor-offline-installer-v1.1.2.tgz &#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;1234567891011121314151617[root@harbor ~]# cd harbor [root@harbor ~]# sed -i &apos;s/ui_url_protocol = http/ui_url_protocol = https/&apos; harbor.cfg[root@harbor ~]# sed -i &apos;s/hostname = reg.mydomain.com/hostname = harbor.wolf7.org/&apos; harbor.cfg[root@harbor ~]# sed -i &apos;s@ssl_cert = /data/cert/server.crt@ssl_cert = /data/cert/harbor.wolf7.org.crt@g&apos; harbor.cfg[root@harbor ~]# sed -i &apos;s@ssl_cert_key = /data/cert/server.key@ssl_cert_key = /data/cert/harbor.wolf7.org.key@g&apos; harbor.cfg[root@harbor ~]# ./prepare loaded secret keyGenerated configuration file: ./common/config/nginx/nginx.confGenerated configuration file: ./common/config/ui/envGenerated configuration file: ./common/config/ui/app.confGenerated configuration file: ./common/config/registry/config.ymlGenerated configuration file: ./common/config/db/envGenerated configuration file: ./common/config/jobservice/envGenerated configuration file: ./common/config/jobservice/app.confGenerated configuration file: ./common/config/ui/private_key.pemGenerated configuration file: ./common/config/registry/root.crtThe configuration files are ready, please use docker-compose to start the service. &#x6267;&#x884C;.install &#x4F1A;&#x8FD0;&#x884C;docker-compose&#xFF0C;&#x5176;&#x4E2D;&#x4F1A;&#x53BB;dockerhub&#x62C9;&#x53D6;&#x955C;&#x50CF;&#xFF0C;&#x5982;&#x679C;&#x94FE;&#x63A5;dockerhub&#x8F83;&#x5361;&#xFF0C;&#x53EF;&#x4F7F;&#x7528;&#x79BB;&#x7EBF;&#x5B89;&#x88C5;&#x5305;12345678[root@harbor ~]# ./install.sh [Step 0]: checking installation environment ...Note: docker version: 1.12.3Note: docker-compose version: 1.8.0.....&#x7565;&#x8FC7; 3.1 web&#x767B;&#x9646;&#x548C;&#x521B;&#x5EFA;&#x9879;&#x76EE;url:&#x57DF;&#x540D;admin / Harbor12345 4.push12[root@harbor ~]# docker login -u admin -p Harbor12345 harbor.wolf7.orgError response from daemon: Get https://harbor.wolf7.org/v1/users/: x509: certificate signed by unknown authority 509: certificate signed by unknown authority&#x89E3;&#x51B3;&#x5982;&#x4E0B;:12345[root@harbor ~]# mkdir -p /etc/docker/certs.d/harbor.wolf7.org[root@harbor ~]# cp /data/cert/ca.crt /etc/docker/certs.d/harbor.wolf7.org[root@harbor ~]# docker login -u admin -p Harbor12345 harbor.wolf7.orgLogin Succeeded[root@harbor ~]# &#x6253;&#x5305;&#x4E0A;&#x4F20;1234567891011121314151617181920212223241.&#x4F7F;&#x7528;docker images &#x83B7;&#x53D6;image id[root@harbor ~]# docker tag 05a60462f8ba harbor.wolf7.org/test/nginx:1.11.5[root@harbor ~]# docker push harbor.wolf7.org/test/nginx:1.11.5The push refers to a repository [harbor.wolf7.org/test/nginx]3f117c44afbb: Pushed c4a8b7411af4: Pushed fe4c16cbf7a4: Pushed 1.11.5: digest: sha256:e5c82328a509aeb7c18c1d7fb36633dc638fcf433f651bdcda59c1cc04d3ee55 size: 9482.&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5B8C;&#x6574;&#x4ED3;&#x5E93;&#x8DEF;&#x5F84; tag images:tag images:tag[root@harbor ~]# docker tag vmware/harbor-notary-db:mariadb-10.1.10 harbor.wolf7.org/test/mariadb:10.1.10[root@harbor ~]# docker push harbor.wolf7.org/test/mariadb:10.1.10The push refers to a repository [harbor.wolf7.org/test/mariadb]c2385ae7d6e5: Pushed 5f70bf18a086: Pushed 978a35efaa8c: Pushed c3014bbccb0b: Pushed 8aa2c772121c: Pushed eaa3924b054e: Pushed d8f2cde2eef8: Pushed 574ab36807f2: Pushed 8deec01122be: Pushed 78dbfa5b7cbc: Pushed 10.1.10: digest: sha256:0f561ad96b9d86edca4010569ce3eb501c2aa8bf1596af88b2ca82d05d57e974 size: 3642[root@harbor ~]# &#x67E5;&#x770B;&#xFF1A; 5.pull&#x6362;&#x4E00;&#x53F0;&#x673A;&#x5668;pull1&#xFF0C;&#x9996;&#x5148;&#x9700;&#x8981;harbor&#x7684;ca&#x4FE1;&#x4EFB;&#xFF0C;&#x521B;&#x5EFA;&#x8DEF;&#x5F84;&#x540E;&#xFF0C;&#x5728;harbor&#x5C06;ca&#x4F20;&#x9012;&#x8FC7;&#x6765;1[root@test01 ~]# mkdir -p /etc/docker/certs.d/harbor.wolf7.org 2&#xFF0C;&#x5728;harbor&#x4E0A;&#x628A;ca&#x590D;&#x5236;&#x5230;pull&#x7684;&#x673A;&#x5668;&#x4E0A;12345678[root@harbor cert]# scp -r /data/cert/ca.crt root@test01.wolf7.org:/etc/docker/certs.d/harbor.wolf7.orgThe authenticity of host &apos;test01.wolf7.org (192.168.77.201)&apos; can&apos;t be established.ECDSA key fingerprint is 1f:b8:e0:19:ac:78:87:a7:79:50:ba:89:12:8f:20:d5.Are you sure you want to continue connecting (yes/no)? yesWarning: Permanently added &apos;test01.wolf7.org,192.168.77.201&apos; (ECDSA) to the list of known hosts.root@test01.wolf7.org&apos;s password:ca.crt 100% 1935 1.9KB/s 00:00[root@harbor cert]# 3&#xFF0C;&#x975E;&#x516C;&#x5F00;&#x9879;&#x76EE;&#x9700;&#x8981;&#x767B;&#x9646;&#xFF0C;&#x516C;&#x5F00;&#x9879;&#x76EE;&#x4E0D;&#x9700;&#x8981;&#x767B;&#x9646;123[root@LinuxEA-COM /data/harbor/cert]# docker login -u admin -p Harbor12345 harbor.wolf7.orgWARNING: Error loading config file:/root/.docker/config.json - EOFLogin Succeeded 4&#xFF0C;&#x5F00;&#x59CB;pull123456789[root@test01 harbor.wolf7.org]# mkdir /data[root@test01 harbor.wolf7.org]# cd /data/[root@test01 data]# docker pull harbor.wolf7.org/test/nginx:1.11.5Trying to pull repository harbor.wolf7.org/test/nginx ...1.11.5: Pulling from harbor.wolf7.org/test/nginx1fad42e8a0d9: Pull completec600959992d4: Pull complete52894f103317: Pull completeDigest: sha256:e5c82328a509aeb7c18c1d7fb36633dc638fcf433f651bdcda59c1cc04d3ee55 5&#xFF0C;&#x67E5;&#x770B;1234[root@test01 data]# docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEharbor.wolf7.org/test/nginx 1.11.5 05a60462f8ba 7 months ago 181.4 MB[root@test01 data]# &#x51FA;&#x73B0;unauthorized: authentication required&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#xFF0C;&#x4E00;&#x822C;&#x5728;web&#x4E2D;&#x521B;&#x5EFA;&#x4E86;&#x9879;&#x76EE;&#x662F;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x7684;&#x5219;&#x53EF;&#x4EE5;&#x5728;/data/harborcommon/config/nginx/nginx.conf&#x4E2D;&#x6DFB;&#x52A0;proxy_set_header X-Forwarded-Proto https; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[Docker1.7脚本安装]]></title>
    <url>%2Funcategorized%2F2019%2F01%2F24%2FDocker1-7%E8%84%9A%E6%9C%AC%E5%AE%89%E8%A3%85.html</url>
    <content type="text"><![CDATA[1-Easypack_docker.sh123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158#!/bin/sh#################################################################################VARS INIT#################################################################################################################################################################Confirm Env################################################################################dateecho &quot;## Install Preconfirm&quot;echo &quot;## Uname&quot;uname -rechoecho &quot;## OS bit&quot;getconf LONG_BITecho#################################################################################INSTALL yum-utils################################################################################dateecho &quot;## Install begins : yum-utils&quot;yum install -y yum-utils &gt;/dev/null 2&gt;&amp;1if [ $? -ne 0 ]; then echo &quot;Install failed...&quot; exit 1fiecho &quot;## Install ends : yum-utils&quot;echo#################################################################################Setting yum-config-manager################################################################################echo &quot;## Setting begins : yum-config-manager&quot;yum-config-manager \ --add-repo \ https://download.docker.com/linux/centos/docker-ce.repo &gt;/dev/null 2&gt;&amp;1if [ $? -ne 0 ]; then echo &quot;Install failed...&quot; exit 1fiecho &quot;## Setting ends : yum-config-manager&quot;echo#################################################################################Update Package Cache################################################################################echo &quot;## Setting begins : Update package cache&quot;yum makecache fast &gt;/dev/null 2&gt;&amp;1if [ $? -ne 0 ]; then echo &quot;Install failed...&quot; exit 1fiecho &quot;## Setting ends : Update package cache&quot;echo#################################################################################INSTALL Docker-engine################################################################################dateecho &quot;## Install begins : docker-ce&quot;yum install -y docker-ceif [ $? -ne 0 ]; then echo &quot;Install failed...&quot; exit 1fiecho &quot;## Install ends : docker-ce&quot;dateecho#################################################################################Stop Firewalld################################################################################echo &quot;## Setting begins : stop firewall&quot;systemctl stop firewalldif [ $? -ne 0 ]; then echo &quot;Install failed...&quot; exit 1fisystemctl disable firewalldif [ $? -ne 0 ]; then echo &quot;Install failed...&quot; exit 1fiecho &quot;## Setting ends : stop firewall&quot;echo#################################################################################Clear Iptable rules################################################################################echo &quot;## Setting begins : clear iptable rules&quot;iptables -Fif [ $? -ne 0 ]; then echo &quot;Install failed...&quot; exit 1fiecho &quot;## Setting ends : clear iptable rules&quot;echo#################################################################################Enable docker################################################################################echo &quot;## Setting begins : systemctl enable docker&quot;systemctl enable dockerif [ $? -ne 0 ]; then echo &quot;Install failed...&quot; exit 1fiecho &quot;## Setting ends : systemctl enable docker&quot;echo#################################################################################start docker################################################################################echo &quot;## Setting begins : systemctl restart docker&quot;systemctl restart dockerif [ $? -ne 0 ]; then echo &quot;Install failed...&quot; exit 1fiecho &quot;## Setting ends : systemctl restart docker&quot;echo#################################################################################confirm docker version################################################################################echo &quot;## docker info&quot;docker infoechoecho &quot;## docker version&quot;docker version 2-install-docker.sh123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869#!/bin/shSYSTEMDDIR=/usr/lib/systemd/systemSERVICEFILE=docker.serviceDOCKERDIR=/usr/binDOCKERBIN=dockerSERVICENAME=dockerFILETARGZ=docker-1.13.1.tgzif [ ! -f ${FILETARGZ} ]; then echo &quot;Docker binary tgz files does not exist, please check it&quot; exit 1fiecho &quot;##unzip : tar xvpf ${FILETARGZ}&quot;tar xvpf ${FILETARGZ}echoecho &quot;##binary : ${DOCKERBIN} copy to ${DOCKERDIR}&quot;cp -p ${DOCKERBIN}/* ${DOCKERDIR} &gt;/dev/null 2&gt;&amp;1which ${DOCKERBIN}echo &quot;##systemd service: ${SERVICEFILE}&quot;echo &quot;##docker.service: create docker systemd file&quot;cat &gt;${SYSTEMDDIR}/${SERVICEFILE} &lt;&lt;EOF[Unit]Description=Docker Application Container EngineDocumentation=http://docs.docker.comAfter=network.target docker.socket[Service]Type=notifyEnvironmentFile=-/run/flannel/dockerWorkingDirectory=/usr/local/binExecStart=/usr/bin/dockerd \ -H tcp://0.0.0.0:4243 \ -H unix:///var/run/docker.sock \ --selinux-enabled=false \ --log-opt max-size=1gExecReload=/bin/kill -s HUP $MAINPID# Having non-zero Limit*s causes performance problems due to accounting overhead# in the kernel. We recommend using cgroups to do container-local accounting.LimitNOFILE=infinityLimitNPROC=infinityLimitCORE=infinity# Uncomment TasksMax if your systemd version supports it.# Only systemd 226 and above support this version.#TasksMax=infinityTimeoutStartSec=0# set delegate yes so that systemd does not reset the cgroups of docker containersDelegate=yes# kill only the docker process, not all processes in the cgroupKillMode=processRestart=on-failure[Install]WantedBy=multi-user.targetEOFecho &quot;&quot;systemctl daemon-reloadecho &quot;##Service status: ${SERVICENAME}&quot;systemctl status ${SERVICENAME}echo &quot;##Service restart: ${SERVICENAME}&quot;systemctl restart ${SERVICENAME}echo &quot;##Service status: ${SERVICENAME}&quot;systemctl status ${SERVICENAME}echo &quot;##Service enabled: ${SERVICENAME}&quot;systemctl enable ${SERVICENAME} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[Install And Configure Grafana/influxdb ON AWS EC2 Instance(Ubuntu)]]></title>
    <url>%2FAWS%2F2018%2F05%2F29%2F%E6%90%AD%E5%BB%BAgrafana-on-AWS-Ubuntu-Instance.html</url>
    <content type="text"><![CDATA[&#x9700;&#x6C42;&#xFF1A;&#x56E0;AWS&#x81EA;&#x5E26;&#x7684;CloudWatch&#x76D1;&#x63A7;&#x4E0D;&#x80FD;&#x6EE1;&#x8DB3;&#x5F53;&#x4E0B;&#x9700;&#x6C42;&#xFF0C;&#x6240;&#x4EE5;&#x4F7F;&#x7528;&#x9002;&#x7528;&#x4E8E;AWS CloudWatch&#x7684;Grafana&#x4EEA;&#x8868;&#x677F;. &#x2003; &#x4E00;&#x4E9B;&#x6709;&#x7528;&#x7684;&#x8D44;&#x6599; Grafana&#x5B98;&#x65B9;&#x5B89;&#x88C5;&#x6587;&#x6863;InfluxDB&#x5B89;&#x88C5;&#x6587;&#x6863;GitHub&#x63D0;&#x4F9B;&#x7684;&#x76D1;&#x63A7;AWS&#x7684;&#x4E00;&#x4E9B;&#x57FA;&#x7840;&#x670D;&#x52A1;&#x6A21;&#x677F; &#x6DFB;&#x52A0;AWS Redshift dashboard 1.&#x56E0;&#x4E3A;Grafana&#x5B98;&#x65B9;&#x7F51;&#x7AD9;&#x63D0;&#x4F9B;&#x7684;&#x6A21;&#x677F;&#x4E2D;&#x6CA1;&#x6709;&#x9488;&#x5BF9;Redshift&#x76D1;&#x63A7;&#x7684;&#x6A21;&#x677F;&#xFF0C;&#x53EA;&#x80FD;&#x81EA;&#x5DF1;&#x52A8;&#x624B;&#x4E30;&#x8863;&#x8DB3;&#x98DF;&#x4E86;&#xFF1B;2.&#x5728;variable&#x6DFB;&#x52A0;Region&#x3001;ClusterIdentifier&#x4EE5;&#x4FBF;&#x4E8E;&#x53EF;&#x4EE5;&#x5728;dashboard&#x4E2D;&#x81EA;&#x5B9A;&#x4E49;&#x9009;&#x62E9;&#x533A;&#x57DF;&#x4E0E;&#x96C6;&#x7FA4;&#x540D;&#x79F0;&#xFF1B;3.&#x914D;&#x7F6E;dashboard&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5728;metrics&#x4E2D;&#x5F15;&#x7528;&#x5B9A;&#x4E49;&#x7684;variable&#xFF1B;4.&#x5728;&#x914D;&#x7F6E;dashboard&#x5C55;&#x793A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5728;&#x6DFB;&#x52A0;Axes&#x3001;Legend&#x3001;Display&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x4E00;&#x4E9B;&#x7EC6;&#x8282;&#xFF0C;&#x5982;&#x679C;&#x914D;&#x7F6E;&#x9519;&#x8BEF;&#xFF0C;&#x5C55;&#x793A;&#x4F1A;&#x6DF7;&#x4E71;&#xFF0C;&#x6BD4;&#x5982;&#x5728;Axes&#x914D;&#x7F6E;network&#x5C55;&#x793A;&#x5355;&#x4F4D;&#x9700;&#x8981;&#x4F7F;&#x7528;data rate&#x4E2D;&#x7684;bytes/sec&#xFF0C;CPU or disk &#x5C55;&#x793A;&#x9700;&#x8981;&#x4F7F;&#x7528;none&#x4E2D;&#x7684;percent&#x3002;&#x5982;&#x679C;&#x60F3;&#x5728;dashboard&#x53F3;&#x4E0B;&#x89D2;&#x663E;&#x793A;&#x6700;&#x5927;&#x3001;&#x6700;&#x5927;&#x3001;&#x5F53;&#x524D;&#x7B49;&#x6570;&#x636E;&#xFF0C;&#x9700;&#x8981;&#x5728;Legend&#x5F00;&#x542F;Show/Max/Min/As Table/Avg/Current&#x3002;Display&#x662F;&#x63A7;&#x5236;&#x4EE5;line&#x6216;&#x8005;&#x5176;&#x4ED6;&#x65B9;&#x5F0F;&#x663E;&#x793A;&#xFF0C;Fill&#x662F;&#x989C;&#x8272;&#x7684;&#x6DF1;&#x6D45;&#xFF0C;line Width&#x662F;line&#x7684;&#x52A0;&#x7C97;&#x3002; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
      <categories>
        <category>AWS</category>
      </categories>
      <tags>
        <tag>AWS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[配置适用于Lambda函数的AWS环境NAT网关-从VPC访问Intelnet公共网络]]></title>
    <url>%2FAWS%2F2018%2F02%2F06%2F%E9%85%8D%E7%BD%AE%E9%80%82%E7%94%A8%E4%BA%8ELambda%E5%87%BD%E6%95%B0%E7%9A%84AWS%E7%8E%AF%E5%A2%83NAT%E7%BD%91%E5%85%B3-%E4%BB%8EVPC%E8%AE%BF%E9%97%AEIntelnet%E5%85%AC%E5%85%B1%E7%BD%91%E7%BB%9C.html</url>
    <content type="text"><![CDATA[&#x9700;&#x6C42;&#xFF1A;&#x56E0;&#x4E3A;lambda&#x672C;&#x8EAB;&#x5728;&#x5EFA;&#x7ACB;&#x4E4B;&#x521D;&#x662F;&#x5177;&#x5907;&#x516C;&#x5171;&#x7684;Intelnet&#x8BBF;&#x95EE;&#x6743;&#x9650;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x56E0;&#x4E3A;&#x67B6;&#x6784;&#x9700;&#x8981;VPC&#xFF0C;&#x914D;&#x7F6E;VPC&#x4EE5;&#x540E;Lambda&#x51FD;&#x6570;&#x5C06;&#x5931;&#x53BB;&#x516C;&#x5171;&#x7684;Intelnet&#x8BBF;&#x95EE;&#x6743;&#x9650;&#xFF0C;&#x6B64;&#x65F6;&#x9700;&#x8981;&#x7ED9;VPC&#x914D;&#x7F6E;NAT&#x7F51;&#x5173;&#xFF0C;&#x540C;&#x65F6;&#x9700;&#x8981;&#x5728;&#x5B89;&#x5168;&#x7EC4;&#x4E2D;&#x6DFB;&#x52A0;&#x9700;&#x8981;&#x51FA;&#x7AD9;&#x7684;&#x8FDE;&#x63A5;&#xFF08;&#x9ED8;&#x8BA4;&#x662F;&#x5168;&#x90E8;&#x5141;&#x8BB8;&#x51FA;&#x7AD9;&#xFF09; &#x2003; AWS&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x7684;NAT&#x7F51;&#x5173;&#x67B6;&#x6784;&#x56FE; AWS&#x5B98;&#x65B9;&#x6280;&#x672F;&#x6587;&#x6863; &#x76F8;&#x5173;AWS&#x6280;&#x672F;&#x77E5;&#x8BC6;&#x70B9; 1.&#x8FD9;&#x91CC;&#x6D89;&#x53CA;&#x5230;AWS&#x4E91;&#x7684;&#x51E0;&#x4E2A;&#x77E5;&#x8BC6;&#x70B9;&#xFF1A;VPC&#x3001;&#x5B50;&#x7F51;&#x3001;Intelnet&#x7F51;&#x5173;&#x3001;NAT&#x7F51;&#x5173;&#x3002; 2.&#x9ED8;&#x8BA4;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x67B6;&#x6784;&#x4E2D;&#x662F;&#x5206;&#x4E3A;Public&#x4E0E;Private&#x4FE9;&#x4E2A;&#x5B50;&#x7F51;&#x6BB5;&#xFF0C;&#x6211;&#x7684;&#x73AF;&#x5883;&#x662F;&#x5DF2;&#x7ECF; &#x5B58;&#x5728;VPC&#x4E0E;Public&#x5B50;&#x7F51;&#x6BB5;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x6D89;&#x53CA;&#x5230;&#x4E86;Private&#x7F51;&#x6BB5;&#x3002; &#x914D;&#x7F6E;VPC 1.VPC&#x9ED8;&#x8BA4;&#x662F;&#x4F1A;&#x5B58;&#x5728;&#xFF0C;&#x8FD9;&#x91CC;&#x4F1A;&#x6D89;&#x53CA;&#x5230;&#x5404;&#x4E2A;AWS&#x670D;&#x52A1;&#x7684;VPC&#x5173;&#x8054;&#x95EE;&#x9898;&#xFF0C;&#x5982;&#x679C;&#x65B0;&#x5EFA;VPC&#xFF0C; &#x4F1A;&#x5BFC;&#x81F4;&#x5176;&#x4ED6;VPC&#x4E0E;Lambda&#x6216;&#x5176;&#x4ED6;&#x670D;&#x52A1;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;&#x7B49;&#x672A;&#x77E5;&#x95EE;&#x9898;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x4E0D;&#x5EFA;&#x8BAE;&#x5728;&#x521B;&#x5EFA; &#x65B0;&#x7684;VPC&#xFF0C;&#x800C;&#x662F;&#x5728;&#x539F;&#x6709;&#x7684;VPC&#x4E2D;&#x521B;&#x5EFA;&#x5B50;&#x7F51;&#xFF0C;&#x7136;&#x540E;&#x914D;&#x7F6E;NAT&#x7F51;&#x5173;&#x3002; 2.&#x9ED8;&#x8BA4;VPC&#x4E2D;&#x5B58;&#x5728;&#x4E86;Subnet&#x5B50;&#x7F51;&#x6BB5;:1172.31.0.0/16 &#x4EE5;&#x4E0B;&#x6211;&#x4EEC;&#x5C06;&#x5728;&#x8FD9;&#x4E2A;VPC&#x4E2D;&#x521B;&#x5EFA;Subnet&#x5B50;&#x7F51;&#x3002; &#x521B;&#x5EFA;VPC&#x4E2D;&#x7684;Subnet&#x5B50;&#x7F51; 1.&#x65B0;&#x5EFA;NAT&#x7F51;&#x5173;&#x7684;&#x5B50;&#x7F51;&#xFF0C;&#x8FD9;&#x91CC;&#x9762;&#x6D89;&#x53CA;&#x5230;&#x7F51;&#x7EDC;&#x7684;&#x4E00;&#x4E9B;&#x57FA;&#x7840;&#x6982;&#x5FF5;&#xFF0C;&#x5B50;&#x7F51;&#x5212;&#x5206;&#xFF0C;&#x9700;&#x8981;&#x4E86;&#x89E3;&#x3002; &#x9ED8;&#x8BA4;VPC&#x5B58;&#x5728;&#x4E86;&#x4E09;&#x4E2A;&#x5B50;&#x7F51;&#x4E3A;:123172.31.0.0/20(0-15)172.31.16.0/20(16-31)172.31.32.0/20(32-47) 2.&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x533A;&#x5206;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x547D;&#x540D;subnet-lambda&#x7684;&#x5B50;&#x7F51;: 1172.31.48.0/20(48-63) &#x4F5C;&#x4E3A;NAT&#x7F51;&#x5173;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7684;&#x5B50;&#x7F51;&#x6BB5;&#x3002; &#x914D;&#x7F6E;Intelnet&#x7F51;&#x5173; 1.&#x521B;&#x5EFA;VPC&#x65F6;&#x4F1A;&#x81EA;&#x52A8;&#x521B;&#x5EFA;Intelnet&#x7F51;&#x5173;&#x5E76;&#x4E14;&#x81EA;&#x52A8;attached&#xFF0C;&#x4E3A;AWS&#x63D0;&#x4F9B;&#x7684;&#x516C;&#x5171;Intelnet&#x8BBF;&#x95EE;&#x3002; 2.&#x5982;&#x679C;&#x662F;&#x65B0;&#x5EFA;&#x7684;VPC&#xFF0C;&#x5C31;&#x9700;&#x5728;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;Intelnet&#x7F51;&#x5173;&#xFF0C;&#x5E76;&#x4E14;attached&#x5230;&#x521B;&#x5EFA;&#x7684;VPC&#x4E0A;&#x3002; &#x914D;&#x7F6E;NAT&#x7F51;&#x5173; 1.&#x65B0;&#x5EFA;NAT&#x7F51;&#x5173;&#xFF0C;&#x5C06;&#x5176;&#x5173;&#x8054;&#x5230;&#x4E00;&#x4E2A;&#x53EF;&#x5DF2;&#x7ECF;&#x914D;&#x7F6E;Intelnet&#x7F51;&#x5173;&#x7684;&#x5B50;&#x7F51;&#x3002; 2.&#x521B;&#x5EFA;&#x4E00;&#x4E2A;ElasticIP&#xFF0C;attached&#x5230;NAT&#x7F51;&#x5173;&#x3002; &#x914D;&#x7F6E;Route&#x8868; 1.&#x5728;&#x8DEF;&#x7531;&#x8868;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Route&#x8868;&#xFF08;rtb-default&#xFF09;&#xFF0C;&#x4E00;&#x822C;&#x4F1A;&#x521B;&#x5EFA;&#x9ED8;&#x8BA4;Route&#x8868;&#xFF0C;&#x81EA;&#x52A8;&#x5173;&#x8054;&#xFF0C; &#x8FD9;&#x65F6;&#x5C06;&#x4E0A;&#x9762;&#x65B0;&#x5EFA;&#x7684;Intelnet&#x7F51;&#x5173;&#x6807;&#x8BB0;&#x5230;&#x9ED8;&#x8BA4;Route&#x8868;&#xFF0C;&#x5E76;&#x5173;&#x8054;&#x5DF2;&#x7ECF;&#x521B;&#x5EFA;&#x7684;VPC&#x4E2D;&#x7684;&#x4E09;&#x4E2A;&#x5B50;&#x7F51;&#x3002; 2.&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;Route&#x8868;&#xFF08;rtb-lambda&#xFF09;&#xFF0C;&#x5173;&#x8054;172.31.48.0/20&#x5B50;&#x7F51;&#x6BB5;&#x3002; &#x5C06;&#x8DEF;&#x7531;&#x6807;&#x8BB0;&#x4E3A;0.0.0.0/0 &#x2013;&gt;&gt; nat-gateway-id&#xFF08;&#x65B0;&#x5EFA;&#x7684;NAT&#x7F51;&#x5173;&#xFF09;&#x3002; &#x914D;&#x7F6E;Lambda&#x51FD;&#x6570; 1.Lambda&#x51FD;&#x6570;&#x9700;&#x8981;&#x5177;&#x6709;&#x5BF9;VPC&#x7684;&#x6267;&#x884C;Read&#x6743;&#x9650;&#xFF0C;&#x9700;&#x8981;&#x5728;IAM&#x4E2D;&#x6DFB;&#x52A0;&#x8D4B;&#x4E88;&#x3002; 2.&#x914D;&#x7F6E;&#x7F51;&#x7EDC;&#x4E3A;&#x65B0;&#x5EFA;VPC&#x4E2D;&#x7684;&#x5B50;&#x7F51;&#xFF08;172.31.48.0/20&#xFF09;&#x3002; 3.&#x5F00;&#x542F;&#x9700;&#x8981;&#x5165;&#x7AD9;&#x3001;&#x51FA;&#x7AD9;&#x7684;&#x5B89;&#x5168;&#x7EC4;&#x3002; &#x6B64;&#x65F6;&#xFF0C;Lambda&#x51FD;&#x6570;&#x5C31;&#x5177;&#x5907;&#x4E86;Intelnet&#x516C;&#x5171;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#x4E86;&#x3002; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
      <categories>
        <category>AWS</category>
      </categories>
      <tags>
        <tag>AWS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CentOS7一键安装ipsec-vpn]]></title>
    <url>%2Funcategorized%2F2018%2F01%2F24%2FCentOS7%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85ipsec-vpn.html</url>
    <content type="text"><![CDATA[wget https://git.io/vpnsetup-centos &#x6267;&#x884C;&#xFF0C;&#x6DFB;&#x52A0;PSK&#xFF0C;&#x7528;&#x6237;&#x540D;&#xFF0C;&#x5BC6;&#x7801;&#x6700;&#x9EBB;&#x70E6;&#x7684;&#x914D;&#x7F6E;&#x5C31;&#x662F;ipsec.confipsec.conf123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172version 2.0config setup virtual_private=%v4:10.0.0.0/8,%v4:192.168.0.0/16,%v4:172.16.0.0/12,%v4:!192.168.42.0/24,%v4:!192.168.43.0/24 protostack=netkey nhelpers=0 interfaces=%defaultroute uniqueids=noconn shared left=%defaultroute leftid=54.x.x.221 right=%any encapsulation=yes authby=secret pfs=no rekey=no keyingtries=5 dpddelay=30 dpdtimeout=120 dpdaction=clear ike=3des-sha1,3des-sha2,aes-sha1,aes-sha1;modp1024,aes-sha2,aes-sha2;modp1024,aes256-sha2_512 phase2alg=3des-sha1,3des-sha2,aes-sha1,aes-sha2,aes256-sha2_512 sha2-truncbug=yesconn l2tp-psk auto=add leftprotoport=17/1701 rightprotoport=17/%any type=transport phase2=esp also=sharedconn xauth-psk auto=add leftsubnet=0.0.0.0/0 rightaddresspool=192.168.43.10-192.168.43.250 modecfgdns1=8.8.8.8 modecfgdns2=8.8.4.4 leftxauthserver=yes rightxauthclient=yes leftmodecfgserver=yes rightmodecfgclient=yes modecfgpull=yes xauthby=file ike-frag=yes ikev2=never cisco-unity=yes also=sharedconn ikev2-cp left=%defaultroute leftid=54.x.x.221 leftsendcert=always leftsubnet=0.0.0.0/0 leftrsasigkey=%cert right=%any rightaddresspool=192.168.45.10-192.168.45.250 rightca=%same rightrsasigkey=%cert modecfgdns1=8.8.8.8 modecfgdns2=8.8.4.4 narrowing=yes dpddelay=30 dpdtimeout=120 dpdaction=clear auto=add ikev2=insist rekey=no fragmentation=yes ike=3des-sha1,3des-sha2,aes-sha1,aes-sha1;modp1024,aes-sha2,aes-sha2;modp1024,aes256-sha2_512 phase2alg=3des-sha1,3des-sha2,aes-sha1,aes-sha2,aes256-sha2_512 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[做一个职业运维人]]></title>
    <url>%2F%E8%81%8C%E4%B8%9A%E8%A7%84%E5%88%92%2F2018%2F01%2F01%2F%E5%81%9A%E4%B8%80%E4%B8%AA%E8%81%8C%E4%B8%9A%E8%BF%90%E7%BB%B4%E4%BA%BA.html</url>
    <content type="text"><![CDATA[&#x5F88;&#x591A;&#x4E09;&#x56DB;&#x5E74;&#x5DE5;&#x4F5C;&#x7ECF;&#x9A8C;&#x7684;&#x540C;&#x5B66;&#xFF0C;&#x56E0;&#x4E3A;&#x7F3A;&#x5C11;&#x5FC5;&#x8981;&#x7684;&#x804C;&#x4E1A;&#x7D20;&#x517B;&#x7684;&#x57F9;&#x8BAD;&#xFF0C;&#x5DE5;&#x4F5C;&#x7684;&#x65B9;&#x5F0F;&#x65B9;&#x6CD5;&#x6216;&#x591A;&#x6216;&#x5C11;&#x5B58;&#x5728;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x8FD9;&#x5F71;&#x54CD;&#x4E86;&#x81EA;&#x8EAB;&#x7684;&#x804C;&#x4E1A;&#x53D1;&#x5C55;&#x3002;&#x600E;&#x4E48;&#x505A;&#x624D;&#x7B97;&#x662F;&#x4F1A;&#x5DE5;&#x4F5C;&#xFF0C;&#x8FD9;&#x91CC;&#x6709;&#x51E0;&#x70B9;&#x4E0D;&#x6210;&#x719F;&#x7684;&#x5EFA;&#x8BAE;&#xFF0C;&#x4F9B;&#x8BF8;&#x541B;&#x53C2;&#x8003;&#x3002; &#x641E;&#x6E05;&#x695A;&#x516C;&#x53F8;&#x4E3A;&#x4EC0;&#x4E48;&#x8058;&#x8BF7;&#x4F60;&#x516C;&#x53F8;&#x4E0D;&#x662F;&#x6148;&#x5584;&#x673A;&#x6784;&#xFF0C;&#x800C;&#x662F;&#x4EE5;&#x8425;&#x5229;&#x4E3A;&#x76EE;&#x7684;&#xFF0C;&#x516C;&#x53F8;&#x8058;&#x8BF7;&#x4F60;&#xFF0C;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x8BA9;&#x4F60;&#x5E2E;&#x52A9;&#x516C;&#x53F8;&#x53BB;&#x8425;&#x5229;&#xFF0C;&#x5E2E;&#x52A9;&#x516C;&#x53F8;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5982;&#x679C;&#x89C9;&#x5F97;&#x81EA;&#x5DF1;&#x5728;&#x516C;&#x53F8;&#x6CA1;&#x5565;&#x7528;&#x5904;&#xFF0C;&#x6709;&#x4F60;&#x6CA1;&#x4F60;&#x6CA1;&#x533A;&#x522B;&#xFF0C;&#x90A3;&#x5C31;&#x79BB;&#x89E3;&#x8058;&#x4E0D;&#x8FDC;&#x4E86;&#x3002; &#x4E0D;&#x65AD;&#x5347;&#x804C;&#x52A0;&#x85AA;&#x7684;&#x79D8;&#x8BC0;&#x8981;&#x4E0D;&#x65AD;&#x6709;&#x4EA7;&#x51FA;&#xFF0C;&#x53D8;&#x6210;&#x7A00;&#x7F3A;&#x4EBA;&#x624D;&#x3002;&#x8981;&#x60F3;&#x660E;&#x767D;&#x81EA;&#x5DF1;&#x53EF;&#x4EE5;&#x5E2E;&#x516C;&#x53F8;&#x89E3;&#x51B3;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF0C;&#x5E2E;&#x9886;&#x5BFC;&#x89E3;&#x51B3;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#x3002;&#x5E76;&#x4E0D;&#x9057;&#x4F59;&#x529B;&#x7684;&#x53BB;&#x62FC;&#x640F;&#xFF0C;&#x76F8;&#x4FE1;&#x6211;&#xFF0C;&#x9886;&#x5BFC;&#x770B;&#x5F97;&#x89C1;&#x4F60;&#x7684;&#x4ED8;&#x51FA;&#x3002;&#x67D0;&#x4E9B;&#x4E8B;&#x60C5;&#x4F60;&#x53EF;&#x4EE5;&#x505A;&#xFF0C;&#x522B;&#x4EBA;&#x505A;&#x4E0D;&#x4E86;&#xFF0C;&#x9886;&#x5BFC;&#x628A;&#x4E8B;&#x60C5;&#x4EA4;&#x5230;&#x4F60;&#x8FD9;&#x4ED6;&#x653E;&#x5FC3;&#xFF0C;&#x4F60;&#x5C31;&#x79BB;&#x52A0;&#x85AA;&#x4E0D;&#x8FDC;&#x4E86;&#xFF0C;&#x591A;&#x6B21;&#x5982;&#x6B64;&#xFF0C;&#x5C31;&#x79BB;&#x5347;&#x804C;&#x4E0D;&#x8FDC;&#x4E86;&#x3002; &#x628A;&#x63E1;&#x597D;&#x8DDF;&#x9886;&#x5BFC;&#x7684;&#x5173;&#x7CFB;&#x4ECE;&#x67D0;&#x79CD;&#x7A0B;&#x5EA6;&#x4E0A;&#x8BB2;&#xFF0C;&#x4F60;&#x5176;&#x5B9E;&#x4E0D;&#x662F;&#x5728;&#x4E3A;&#x516C;&#x53F8;&#x6253;&#x5DE5;&#xFF0C;&#x800C;&#x662F;&#x5728;&#x4E3A;&#x4F60;&#x7684;&#x76F4;&#x5C5E;&#x4E0A;&#x53F8;&#x6253;&#x5DE5;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x8DDF;&#x9886;&#x5BFC;&#x7684;&#x5173;&#x7CFB;&#x5C3D;&#x91CF;&#x4E0D;&#x8981;&#x641E;&#x7838;&#x4E86;&#xFF0C;&#x9886;&#x5BFC;&#x8BF4;&#x7684;&#x5BF9;&#x7684;&#xFF0C;&#x8981;&#x5168;&#x529B;&#x652F;&#x6301;&#xFF1B;&#x505A;&#x7684;&#x4E0D;&#x5408;&#x7406;&#x7684;&#xFF0C;&#x8981;#### &#x79C1;&#x4E0B;#### &#x8DDF;&#x9886;&#x5BFC;&#x6C9F;&#x901A;&#xFF0C;&#x7528;&#x59D4;&#x5A49;&#x7684;&#x65B9;&#x5F0F;&#x5E2E;&#x4ED6;&#x6307;&#x51FA;&#x95EE;&#x9898;&#x6240;&#x5728;&#x3002;&#x5982;&#x679C;&#x5F88;&#x4E0D;&#x5E78;&#xFF0C;&#x4F60;&#x7684;&#x9886;&#x5BFC;&#x521A;&#x610E;&#x81EA;&#x7528;&#xFF0C;&#x542C;&#x4E0D;&#x8FDB;&#x8C0F;&#x8A00;&#xFF0C;&#x90A3;&#x6211;&#x53EA;&#x80FD;&#x8BF4;&#xFF0C;&#x826F;&#x79BD;&#x62E9;&#x6728;&#x800C;&#x6816;&#x3002; &#x628A;&#x63E1;&#x597D;&#x8DDF;&#x540C;&#x4E8B;&#x7684;&#x5173;&#x7CFB;&#x7531;&#x4E8E;&#x6BCF;&#x4E2A;&#x4EBA;&#x7684;&#x8BA4;&#x77E5;&#x4E0D;&#x540C;&#xFF0C;&#x80CC;&#x666F;&#x77E5;&#x8BC6;&#x4E0D;&#x540C;&#xFF0C;&#x7ECF;&#x9A8C;&#x4E0D;&#x540C;&#xFF0C;&#x5728;&#x540C;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;&#x4E0A;&#x9762;&#x7684;&#x770B;&#x6CD5;&#x4F1A;&#x4E0D;&#x540C;&#xFF0C;&#x8FD9;&#x5C06;&#x662F;&#x5E38;&#x6001;&#x3002;&#x672C;&#x7740;&#x7406;&#x4E0D;&#x8FA8;&#x4E0D;&#x660E;&#x7684;&#x539F;&#x5219;&#xFF0C;&#x51E1;&#x4E8B;&#x6C9F;&#x901A;&#x89E3;&#x51B3;&#xFF0C;&#x5BF9;&#x4E8B;&#x4E0D;&#x5BF9;&#x4EBA;&#xFF0C;&#x6CE8;&#x610F;&#x8868;&#x8FBE;&#x8BED;&#x6C14;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x56E2;&#x4F53;&#x4F5C;&#x6218;&#x7684;&#x5E74;&#x4EE3;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x5408;&#x7FA4;&#xFF0C;&#x4E5F;&#x4F1A;&#x8BA9;&#x4F60;&#x7684;&#x9886;&#x5BFC;&#x96BE;&#x529E;&#x3002;&#x53EA;&#x8981;&#x7ED3;&#x679C;&#x662F;&#x597D;&#x7684;&#xFF0C;&#x5FCD;&#x8BA9;&#x4E00;&#x4E0B;&#x53C8;&#x4F55;&#x59A8;&#x3002; &#x4E0D;&#x65AD;&#x63D0;&#x5347;&#x81EA;&#x8EAB;&#x7684;&#x8F6F;&#x7D20;&#x8D28;&#x5728;&#x804C;&#x4E1A;&#x751F;&#x6DAF;&#x524D;&#x671F;&#xFF0C;&#x4E13;&#x4E1A;&#x6280;&#x672F;&#x80FD;&#x529B;&#x662F;&#x63A8;&#x5347;&#x4F60;&#x5F80;&#x4E0A;&#x8D70;&#x7684;&#x4E3B;&#x8981;&#x52A8;&#x529B;&#xFF0C;&#x804C;&#x4E1A;&#x751F;&#x6DAF;&#x4E2D;&#x671F;&#xFF0C;&#x8F6F;&#x7D20;&#x8D28;&#x5C31;&#x4F1A;&#x663E;&#x5F97;&#x5C24;&#x4E3A;&#x91CD;&#x8981;&#xFF0C;&#x804C;&#x4E1A;&#x751F;&#x6DAF;&#x540E;&#x671F;&#xFF0C;&#x4EBA;&#x683C;&#x9B45;&#x529B;&#x548C;&#x5F71;&#x54CD;&#x529B;&#x662F;&#x4E0D;&#x53EF;&#x6216;&#x7F3A;&#x7684;&#x3002; &#x84DD;&#x56FE;&#x89C4;&#x5212;&#x3001;&#x76EE;&#x6807;&#x62C6;&#x89E3;&#x3001;&#x5173;&#x952E;&#x8DEF;&#x5F84;&#x3001;&#x8FC7;&#x7A0B;&#x7BA1;&#x7406;&#x5982;&#x679C;&#x53EA;&#x662F;&#x4F4E;&#x5934;&#x8D70;&#x8DEF;&#xFF0C;&#x4E0D;&#x62AC;&#x5934;&#x770B;&#x65B9;&#x5411;&#xFF0C;&#x5BB9;&#x6613;&#x8FF7;&#x5931;&#x3002;&#x5DE5;&#x4F5C;&#x4E5F;&#x662F;&#x4E00;&#x6837;&#xFF0C;&#x4F5C;&#x4E3A;&#x5458;&#x5DE5;&#xFF0C;&#x8981;&#x53BB;&#x4E86;&#x89E3;&#x516C;&#x53F8;&#x6218;&#x7565;&#xFF0C;&#x90E8;&#x95E8;&#x84DD;&#x56FE;&#xFF0C;&#x505A;&#x4E3A;&#x9886;&#x5BFC;&#xFF0C;&#x8981;&#x53BB;&#x4F20;&#x8FBE;&#x516C;&#x53F8;&#x6218;&#x7565;&#xFF0C;&#x90E8;&#x95E8;&#x84DD;&#x56FE;&#xFF0C;&#x8FD9;&#x6837;&#xFF0C;&#x6574;&#x4E2A;&#x56E2;&#x961F;&#x624D;&#x77E5;&#x9053;&#x5F80;&#x54EA;&#x4F7F;&#x52B2;&#x3002;&#x628A;&#x516C;&#x53F8;&#x76EE;&#x6807;&#x62C6;&#x6210;&#x90E8;&#x95E8;&#x76EE;&#x6807;&#xFF0C;&#x628A;&#x90E8;&#x95E8;&#x76EE;&#x6807;&#x62C6;&#x6210;&#x56E2;&#x961F;&#x76EE;&#x6807;&#xFF0C;&#x6700;&#x540E;&#x62C6;&#x6210;&#x4E2A;&#x4EBA;&#x76EE;&#x6807;&#xFF0C;&#x4E86;&#x89E3;&#x8FD9;&#x4E9B;&#xFF0C;&#x5DE5;&#x4F5C;&#x65B9;&#x5411;&#x624D;&#x80FD;&#x6BD4;&#x8F83;&#x6E05;&#x6670;&#x3002;&#x4E3A;&#x4E86;&#x8FBE;&#x6210;&#x76EE;&#x6807;&#xFF0C;&#x6211;&#x4EEC;&#x5236;&#x5B9A;&#x4E86;&#x5173;&#x952E;&#x8DEF;&#x5F84;&#xFF0C;&#x9879;&#x76EE;&#x3001;&#x4EFB;&#x52A1;&#x90FD;&#x662F;&#x4E3A;&#x76EE;&#x6807;&#x670D;&#x52A1;&#x7684;&#x3002;&#x8001;&#x677F;&#x8981;&#x4F60;&#x5199;&#x5468;&#x62A5;&#xFF0C;&#x8981;&#x4F60;&#x7ECF;&#x5E38;&#x6C47;&#x62A5;&#xFF0C;&#x5B9E;&#x9645;&#x5C31;&#x662F;&#x5728;&#x505A;&#x8FC7;&#x7A0B;&#x7BA1;&#x7406;&#xFF0C;&#x6015;&#x51FA;&#x610F;&#x5916;~ &#x77E5;&#x9053;&#x65B9;&#x5411;&#x4E86;&#x8981;&#x4F4E;&#x5934;&#x770B;&#x8DEF;&#x6211;&#x4EEC;&#x6709;&#x7406;&#x60F3;&#xFF0C;&#x77E5;&#x9053;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#xFF0C;&#x4F46;&#x8981;&#x60F3;&#x771F;&#x6B63;&#x843D;&#x5730;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x77E5;&#x9053;&#x73B0;&#x72B6;&#xFF0C;&#x77E5;&#x9053;&#x4ECE;&#x73B0;&#x5B9E;&#x8D70;&#x5411;&#x7406;&#x60F3;&#x7684;&#x8DEF;&#x3002;&#x8131;&#x79BB;&#x4E00;&#x7EBF;&#x7684;&#x9AD8;&#x5C42;&#x5BB9;&#x6613;&#x6D3B;&#x5728;&#x7406;&#x60F3;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x4F5C;&#x4E3A;&#x5E72;&#x6D3B;&#x7684;&#x4EBA;&#xFF0C;&#x5374;&#x4E0D;&#x80FD;&#x9760;&#x7406;&#x60F3;&#xFF0C;&#x9760;&#x65B9;&#x6CD5;&#x8BBA;&#x6D3B;&#x7740;&#xFF0C;&#x5236;&#x5B9A;&#x51FA;&#x8FD9;&#x6761;&#x8DEF;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x8DEF;&#x7684;&#x8D70;&#x6CD5;&#x540C;&#x6B65;&#x7ED9;&#x4F60;&#x7684;&#x8001;&#x677F;&#xFF0C;&#x5F97;&#x5230;&#x8001;&#x677F;&#x7684;&#x8BA4;&#x53EF;&#xFF0C;&#x575A;&#x5B9A;&#x7684;&#x6CBF;&#x7740;&#x8FD9;&#x6761;&#x8DEF;&#x8D70;&#x4E0B;&#x53BB;&#xFF0C;&#x624D;&#x80FD;&#x6700;&#x7EC8;&#x8FBE;&#x6210;&#x76EE;&#x6807;&#x3002; &#x5FF5;&#x5FF5;&#x4E0D;&#x5FD8;&#x5FC5;&#x6709;&#x56DE;&#x54CD;&#x5168;&#x8EAB;&#x5FC3;&#x7684;&#x6295;&#x5165;&#xFF0C;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x81EA;&#x5DF1;&#x7684;&#x80FD;&#x91CF;&#x8D85;&#x4E4E;&#x60F3;&#x8C61;&#x3002;&#x4E0D;&#x77E5;&#x9053;&#x5927;&#x5BB6;&#x6709;&#x6CA1;&#x6709;&#x8FD9;&#x6837;&#x7684;&#x7ECF;&#x5386;&#xFF0C;&#x5DE5;&#x4F5C;&#x4E2D;&#x9047;&#x5230;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x767E;&#x601D;&#x4E0D;&#x5F97;&#x5176;&#x89E3;&#xFF0C;&#x7136;&#x540E;&#x4F60;&#x8D70;&#x7740;&#x60F3;&#xFF0C;&#x505A;&#x7740;&#x60F3;&#xFF0C;&#x5403;&#x996D;&#x60F3;&#xFF0C;&#x7761;&#x524D;&#x60F3;&#xFF0C;&#x7136;&#x540E;&#x67D0;&#x5929;&#x65E9;&#x4E0A;&#x9192;&#x6765;&#xFF0C;&#x7075;&#x5149;&#x4E4D;&#x73B0;&#xFF0C;&#x5F97;&#x51FA;&#x4E00;&#x5B8C;&#x7F8E;&#x65B9;&#x6848;&#x3002;&#x5FCD;&#x4E0D;&#x4F4F;&#x90FD;&#x8981;&#x4E3A;&#x81EA;&#x5DF1;&#x7684;&#x806A;&#x660E;&#x624D;&#x667A;&#x9F13;&#x9F13;&#x638C;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x5FF5;&#x5FF5;&#x4E0D;&#x5FD8;&#x5FC5;&#x6709;&#x56DE;&#x54CD;&#x3002;&#x8001;&#x5929;&#x7737;&#x987E;&#x52AA;&#x529B;&#x7684;&#x4EBA;&#x3002; &#x8FC7;&#x7A0B;&#x4E2D;&#x8981;&#x53CA;&#x65F6;&#x53CD;&#x9988;&#xFF0C;&#x7ECF;&#x5E38;&#x6C47;&#x62A5;&#x5DE5;&#x4F5C;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x60F3;&#x9886;&#x5BFC;&#x4E4B;&#x6240;&#x60F3;&#xFF0C;&#x8001;&#x677F;&#x628A;&#x4EFB;&#x52A1;&#x62C6;&#x89E3;&#x597D;&#x4E86;&#xFF0C;&#x8DDF;&#x5927;&#x4F19;&#x5236;&#x5B9A;&#x4E86;&#x8FBE;&#x6210;&#x76EE;&#x6807;&#x7684;&#x5173;&#x952E;&#x8DEF;&#x5F84;&#xFF0C;&#x624B;&#x4E0B;&#x4EBA;&#x53BB;&#x5E72;&#x6D3B;&#x4E86;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x8001;&#x677F;&#x4F1A;&#x5173;&#x6CE8;&#x4EC0;&#x4E48;&#xFF1F;&#x663E;&#x7136;&#xFF0C;&#x8001;&#x677F;&#x60F3;&#x77E5;&#x9053;&#x5404;&#x4F4D;&#x5E72;&#x5F97;&#x5982;&#x4F55;&#x4E86;&#xFF0C;&#x662F;&#x5426;&#x9047;&#x5230;&#x96BE;&#x70B9;&#xFF0C;&#x51FA;&#x73B0;&#x610F;&#x5916;&#xFF0C;&#x5F71;&#x54CD;&#x9879;&#x76EE;&#x8FDB;&#x5C55;&#xFF0C;&#x5DF2;&#x7ECF;&#x505A;&#x4E86;&#x54EA;&#x4E9B;&#xFF0C;&#x8FD8;&#x5DEE;&#x54EA;&#x4E9B;&#x2026;&#x2026;&#x6240;&#x4EE5;&#xFF0C;&#x53CA;&#x65F6;&#x53CD;&#x9988;&#xFF0C;&#x7ECF;&#x5E38;&#x6C47;&#x62A5;&#x662F;&#x5F88;&#x6709;&#x5FC5;&#x8981;&#x6EF4;&#xFF0C;&#x8001;&#x677F;&#x4F1A;&#x89C9;&#x5F97;&#x4F60;&#x5F88;&#x4E0A;&#x8FDB;&#xFF0C;&#x5F88;&#x79EF;&#x6781;&#x3002;&#x4F46;&#x8001;&#x662F;&#x62FF;&#x4E2A;PPT&#x53BB;&#x7ED9;&#x8001;&#x677F;&#x8BB2;&#xFF0C;&#x5F88;&#x4E0D;&#x7CFB;&#x7EDF;&#x5316;&#xFF0C;&#x4E5F;&#x4E0D;&#x4FBF;&#x4E8E;&#x8001;&#x677F;&#x8DDF;&#x8E2A;&#xFF0C;&#x4E00;&#x4E2A;&#x826F;&#x597D;&#x7684;&#x9879;&#x76EE;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#x662F;&#x5F88;&#x6709;&#x5FC5;&#x8981;&#x7684;&#x3002; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
      <categories>
        <category>职业规划</category>
      </categories>
      <tags>
        <tag>职业规划</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[运维的价值与目标拆解]]></title>
    <url>%2F%E8%81%8C%E4%B8%9A%E8%A7%84%E5%88%92%2F2017%2F07%2F17%2F%E8%BF%90%E7%BB%B4%E7%9A%84%E4%BB%B7%E5%80%BC%E4%B8%8E%E7%9B%AE%E6%A0%87%E6%8B%86%E8%A7%A3.html</url>
    <content type="text"><![CDATA[&#x8FD9;&#x91CC;&#x8BF4;&#x7684;&#x8FD0;&#x7EF4;&#x4E3B;&#x8981;&#x662F;&#x6307;&#x5E94;&#x7528;&#x8FD0;&#x7EF4;&#xFF0C;&#x975E;&#x7CFB;&#x7EDF;&#x90E8;&#x7684;&#x504F;&#x786C;&#x4EF6;&#x548C;&#x7F51;&#x7EDC;&#x7684;&#x8FD0;&#x7EF4; &#x6211;&#x4E0D;&#x5E78;&#x798F;&#x5F88;&#x591A;&#x8FD0;&#x7EF4;&#x540C;&#x5B66;&#x611F;&#x89C9;&#x81EA;&#x5DF1;&#x5F88;&#x82E6;&#x903C;&#xFF0C;&#x611F;&#x89C9;&#x6BCF;&#x5929;&#x90FD;&#x5728;&#x6551;&#x706B;&#xFF0C;&#x7ED9;&#x7814;&#x53D1;&#x64E6;&#x5C41;&#x80A1;&#xFF0C;&#x505A;&#x4E00;&#x4E9B;&#x91CD;&#x590D;&#x5DE5;&#x4F5C;&#xFF0C;&#x505A;&#x4E00;&#x4E9B;&#x5BF9;&#x81EA;&#x5DF1;&#x63D0;&#x5347;&#x8F83;&#x5C0F;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x603B;&#x7ED3;&#x4E00;&#x53E5;&#x8BDD;&#xFF0C;&#x5C31;&#x662F;&#x4E0D;&#x5E78;&#x798F;&#x3002; &#x600E;&#x4E48;&#x5E78;&#x798F;&#x5DE5;&#x4F5C;&#x4E2D;&#x7684;&#x5E78;&#x798F;&#x4E3B;&#x8981;&#x6765;&#x81EA;&#x4E24;&#x70B9;&#xFF1A; 1&#x3001;&#x6709;&#x6210;&#x5C31;&#x611F;&#xFF1B;2&#x3001;&#x85AA;&#x6C34;&#x5230;&#x4F4D;&#xFF1B; &#x800C;&#x85AA;&#x6C34;&#x5230;&#x4F4D;&#x4E0E;&#x5426;&#x5F88;&#x5927;&#x7A0B;&#x5EA6;&#x51B3;&#x5B9A;&#x4E8E;&#x4F60;&#x7684;&#x4EA7;&#x51FA;&#xFF08;&#x5982;&#x679C;&#x4F60;&#x7684;&#x8001;&#x677F;&#x4E0D;&#x61C2;&#x4F60;&#x4EEC;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x770B;&#x4E0D;&#x5230;&#x672C;&#x8BE5;&#x770B;&#x5230;&#x7684;&#x4EF7;&#x503C;&#xFF0C;&#x90A3;&#x53E6;&#x5F53;&#x522B;&#x8BBA;&#xFF09;&#xFF0C;&#x800C;&#x4EA7;&#x51FA;&#x591A;&#x5C11;&#x5F88;&#x5927;&#x7A0B;&#x5EA6;&#x4E0A;&#x548C;&#x4F60;&#x7684;&#x6210;&#x5C31;&#x611F;&#x662F;&#x6B63;&#x76F8;&#x5173;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x5E78;&#x798F;&#xFF0C;&#x5C31;&#x8981;&#x505A;&#x6709;&#x6210;&#x5C31;&#x611F;&#x7684;&#x4E8B;&#x60C5;&#x3002; &#x8C08;&#x6210;&#x5C31;&#x611F;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x6280;&#x672F;&#x4EBA;&#x5458;&#xFF0C;&#x6210;&#x5C31;&#x611F;&#x4E3B;&#x8981;&#x6765;&#x81EA;&#x4E24;&#x70B9;&#xFF1A; 1&#x3001;&#x505A;&#x7684;&#x6709;&#x4EF7;&#x503C;2&#x3001;&#x88AB;&#x522B;&#x4EBA;&#x8BA4;&#x540C; &#x5BF9;&#x4E8E;&#x7814;&#x53D1;&#x540C;&#x5B66;&#xFF0C;&#x6BD4;&#x5982;&#x5199;&#x4E86;&#x4E00;&#x4E2A;framework&#xFF0C;&#x6216;&#x8005;lib&#xFF0C;&#x540C;&#x4E8B;&#x90FD;&#x8BF4;&#x597D;&#xFF0C;&#x5E76;&#x62FF;&#x53BB;&#x7528;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x662F;&#x8D85;&#x7EA7;&#x6709;&#x6210;&#x5C31;&#x611F;&#x7684;&#xFF1B;&#x6216;&#x8005;&#x505A;&#x7684;&#x4EA7;&#x54C1;&#x88AB;&#x5E02;&#x573A;&#x8BA4;&#x53EF;&#xFF0C;&#x88AB;&#x540C;&#x884C;&#x8BA4;&#x53EF;&#xFF0C;&#x4E5F;&#x662F;&#x5F88;&#x6709;&#x6210;&#x5C31;&#x611F;&#x7684;&#x3002; &#x90A3;&#x8FD0;&#x7EF4;&#x540C;&#x5B66;&#x5462;&#xFF1F;&#x4EF7;&#x503C;&#x4F53;&#x73B0;&#x5728;&#x54EA;&#x91CC;&#xFF1F; &#x8FD0;&#x7EF4;&#x7684;&#x4EF7;&#x503C;&#x53EF;&#x4EE5;&#x5206;&#x5BF9;&#x5185;&#x7684;&#xFF0C;&#x548C;&#x5BF9;&#x5916;&#x7684;&#x3002;&#x6BD4;&#x5982;&#x8FD0;&#x7EF4;&#x540C;&#x5B66;&#x5199;&#x4E86;&#x4E00;&#x4E9B;&#x8FD0;&#x7EF4;&#x5DE5;&#x5177;&#xFF0C;&#x5927;&#x5927;&#x63D0;&#x5347;&#x4E86;&#x505A;&#x67D0;&#x4E9B;&#x4E8B;&#x60C5;&#x7684;&#x6548;&#x7387;&#xFF0C;&#x5F97;&#x5230;&#x5468;&#x8FB9;&#x540C;&#x5B66;&#x7684;&#x8BA4;&#x53EF;&#xFF0C;&#x8FD9;&#x662F;&#x5BF9;&#x5185;&#x7684;&#x4EF7;&#x503C;&#x3002;&#x8FD9;&#x91CC;&#xFF0C;&#x7B14;&#x8005;&#x66F4;&#x5E0C;&#x671B;&#x597D;&#x597D;&#x63A2;&#x8BA8;&#x4E00;&#x4E0B;&#x5BF9;&#x5916;&#x7684;&#x4EF7;&#x503C;&#xFF0C;&#x8FD0;&#x7EF4;&#x8FD9;&#x4E2A;&#x89D2;&#x8272;&#xFF0C;&#x5728;&#x516C;&#x53F8;&#x7684;&#x5B9A;&#x4F4D;&#xFF0C;&#x5BF9;&#x516C;&#x53F8;&#x7684;&#x4EF7;&#x503C;&#x3002; &#x591A;&#x6570;&#x516C;&#x53F8;&#x5728;&#x521B;&#x4E1A;&#x4E4B;&#x521D;&#xFF0C;&#x662F;&#x6CA1;&#x6709;&#x8FD0;&#x7EF4;&#x8FD9;&#x4E2A;&#x89D2;&#x8272;&#x7684;&#xFF0C;&#x76F8;&#x5173;&#x5DE5;&#x4F5C;&#x5185;&#x5BB9;&#x7531;&#x6240;&#x8C13;&#x7684;&#x5168;&#x6808;&#x5DE5;&#x7A0B;&#x5E08;&#x3001;&#x6808;&#x6EA2;&#x51FA;&#x5DE5;&#x7A0B;&#x5E08;&#x4EE3;&#x52B3;&#x3002;&#x968F;&#x7740;&#x516C;&#x53F8;&#x89C4;&#x6A21;&#x6269;&#x5927;&#xFF0C;&#x673A;&#x5668;&#x5230;&#x51E0;&#x767E;&#x53F0;&#xFF0C;&#x4F1A;&#x66B4;&#x9732;&#x51FA;N&#x591A;&#x95EE;&#x9898;&#xFF0C;&#x6BD4;&#x8F83;&#x76F4;&#x89C2;&#x7684;&#x6BD4;&#x5982;&#xFF1A; &#x7EBF;&#x4E0A;&#x73AF;&#x5883;&#x6DF7;&#x4E71;&#x4E0D;&#x582A;&#xFF0C;OS&#x53D1;&#x884C;&#x7248;&#x3001;&#x7CFB;&#x7EDF;&#x53C2;&#x6570;&#x914D;&#x7F6E;&#x3001;WEB&#x670D;&#x52A1;&#x5668;&#x3001;&#x542F;&#x505C;&#x65B9;&#x5F0F;&#x3001;&#x90E8;&#x7F72;&#x8DEF;&#x5F84;&#x5168;&#x51ED;&#x5404;&#x670D;&#x52A1;&#x7684;&#x7814;&#x53D1;&#x4EBA;&#x5458;&#x7684;&#x559C;&#x597D;&#x548C;&#x719F;&#x6089;&#x7A0B;&#x5EA6; &#x76D1;&#x63A7;&#x5404;&#x79CD;&#x4E0D;&#x5B8C;&#x5907;&#xFF0C;&#x5F88;&#x591A;&#x6545;&#x969C;&#x90FD;&#x662F;&#x540E;&#x4E8E;&#x7528;&#x6237;&#x53D1;&#x73B0;&#xFF0C;&#x6709;&#x4E9B;&#x8FDB;&#x7A0B;&#x6302;&#x4E86;&#x597D;&#x4E45;&#x624D;&#x5076;&#x7136;&#x53D1;&#x73B0;&#x6216;&#x7528;&#x6237;&#x62A5;&#x969C;&#x4E86;&#x624D;&#x53D1;&#x73B0; &#x51FA;&#x4E86;&#x6545;&#x969C;&#x6392;&#x67E5;&#x8D39;&#x52B2;&#xFF0C;&#x751A;&#x81F3;&#x5728;&#x7EBF;&#x4E0A;&#x8C03;&#x8BD5; &#x5F88;&#x591A;&#x6545;&#x969C;&#x90FD;&#x662F;&#x7531;&#x4E00;&#x4E9B;&#x4F4E;&#x7EA7;&#x95EE;&#x9898;&#x5BFC;&#x81F4;&#xFF0C;&#x6BD4;&#x5982;ulimit&#x914D;&#x7F6E;&#x4E0D;&#x5408;&#x7406;&#xFF0C;&#x6BD4;&#x5982;&#x60F3;&#x56DE;&#x6EDA;&#x5374;&#x53D1;&#x73B0;&#x5FD8;&#x8BB0;&#x5907;&#x4EFD; &#x670D;&#x52A1;&#x5668;&#x8D44;&#x6E90;&#x5229;&#x7528;&#x7387;&#x4F4E;&#xFF0C;&#x5F88;&#x591A;&#x673A;&#x5668;&#x6839;&#x672C;&#x6CA1;&#x5728;&#x7528;&#xFF0C;&#x751A;&#x81F3;&#x90FD;&#x627E;&#x4E0D;&#x5230;&#x4E86;&#xFF0C;&#x6D6A;&#x8D39;&#x4E86;&#x5927;&#x91CF;&#x786C;&#x4EF6;&#x6210;&#x672C; &#x540C;&#x65F6;&#x64CD;&#x4F5C;&#x5927;&#x91CF;&#x673A;&#x5668;&#x7F3A;&#x4E4F;&#x6709;&#x529B;&#x5DE5;&#x5177;&#xFF0C;&#x7EBF;&#x4E0A;&#x6743;&#x9650;&#x8981;&#x4E48;&#x6DF7;&#x4E71;&#x4E0D;&#x582A;&#xFF0C;&#x8981;&#x4E48;&#x6240;&#x6709;&#x4EBA;&#x6709;&#x6240;&#x6709;&#x673A;&#x5668;&#x7684;&#x6743;&#x9650; &#x6280;&#x672F;&#x5408;&#x4F19;&#x4EBA;&#x610F;&#x8BC6;&#x5230;&#xFF1A;&#x9760;&#x4E13;&#x6CE8;&#x5199;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x7684;&#x7814;&#x53D1;&#x4EBA;&#x5458;&#x6765;&#x89E3;&#x51B3;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x662F;&#x4E0D;&#x9760;&#x8C31;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x804C;&#x80FD;&#x56E2;&#x961F;&#x6765;&#x6536;&#x62FE;&#x8FD9;&#x4E2A;&#x70C2;&#x644A;&#x5B50;&#x3002; &#x4E8E;&#x662F;&#xFF0C;&#x8FD0;&#x7EF4;&#x56E2;&#x961F;&#x5E94;&#x8FD0;&#x800C;&#x751F;&#xFF0C;&#x5B9A;&#x4F4D;&#x5C31;&#x662F;&#xFF1A;&#x89E3;&#x51B3;&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684;&#x95EE;&#x9898;&#x3002;&#x6362;&#x4E2A;&#x8BF4;&#x6CD5;&#xFF1A;&#x8BA9;&#x7814;&#x53D1;&#x53EA;&#x4E13;&#x6CE8;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x548C;&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#xFF0C;&#x8FD0;&#x7EF4;&#x641E;&#x5B9A;&#x5269;&#x4E0B;&#x7684;&#x3002;&#x8FD9;&#x6837;&#x4F1A;&#x5E26;&#x6765;&#x4EE5;&#x4E0B;&#x597D;&#x5904;&#xFF1A; &#x4EA7;&#x54C1;&#x66F4;&#x5FEB;&#x5F97;&#x5230;&#x9A8C;&#x8BC1;&#xFF1A;&#x89E3;&#x653E;&#x4E86;&#x7814;&#x53D1;&#x4EBA;&#x529B;&#xFF0C;&#x7814;&#x53D1;&#x540C;&#x5B66;&#x5C31;&#x53EF;&#x4EE5;&#x5168;&#x8EAB;&#x5FC3;&#x6251;&#x5728;&#x4EA7;&#x54C1;&#x5F00;&#x53D1;&#x4E0A;&#xFF0C;&#x8FED;&#x4EE3;&#x901F;&#x5EA6;&#x4F1A;&#x53D8;&#x5FEB; &#x5927;&#x5E45;&#x63D0;&#x5347;&#x670D;&#x52A1;&#x7A33;&#x5B9A;&#x6027;&#xFF1A;&#x4E13;&#x4E1A;&#x7684;&#x4EBA;&#x5E72;&#x4E13;&#x4E1A;&#x7684;&#x4E8B;&#xFF0C;&#x7EBF;&#x4E0A;&#x73AF;&#x5883;&#x89C4;&#x8303;&#x5E72;&#x51C0;&#x4E86;&#xFF0C;&#x76D1;&#x63A7;&#x5B8C;&#x5907;&#x4E86;&#xFF0C;&#x6CA1;&#x6709;&#x4F4E;&#x7EA7;&#x9519;&#x8BEF;&#x4E86;&#xFF0C;&#x7CFB;&#x7EDF;&#x53C2;&#x6570;&#x914D;&#x7F6E;&#x5408;&#x7406;&#x4E86; &#x8D44;&#x4EA7;&#x5F97;&#x5230;&#x6709;&#x6548;&#x5229;&#x7528;&#xFF1A;&#x8D44;&#x4EA7;&#x4E13;&#x95E8;&#x6709;&#x4EBA;&#x5728;&#x68B3;&#x7406;&#xFF0C;&#x901A;&#x8FC7;&#x670D;&#x52A1;&#x6DF7;&#x90E8;&#x7B49;&#x624B;&#x6BB5;&#x63D0;&#x9AD8;&#x5229;&#x7528;&#x7387;&#xFF0C;&#x518D;&#x4E5F;&#x6CA1;&#x6709;&#x673A;&#x5668;&#x5728;&#x7A7A;&#x8F6C; &#x7528;&#x4E00;&#x53E5;&#x8BDD;&#x6765;&#x6982;&#x51B5;&#x8FD0;&#x7EF4;&#x7684;&#x4EF7;&#x503C;: &#x82B1;&#x66F4;&#x5C11;&#x7684;&#x94B1;&#xFF0C;&#x8BA9;&#x4EA7;&#x54C1;&#x66F4;&#x5FEB;&#x8FED;&#x4EE3;&#xFF0C;&#x66F4;&#x7A33;&#x5B9A;&#x8FD0;&#x884C; &#x2003;&#x6709;&#x4E9B;&#x8FD0;&#x7EF4;&#x540C;&#x4EC1;&#x6982;&#x51B5;&#x4E86;&#x8FD0;&#x7EF4;&#x4E5D;&#x5B57;&#x771F;&#x8A00;&#x201C;&#x5B89;&#x5168;&#x7A33;&#x5B9A;&#x9AD8;&#x6548;&#x4F4E;&#x6210;&#x672C;&#x201D;&#xFF0C;&#x8BF4;&#x7684;&#x975E;&#x5E38;&#x5230;&#x4F4D;&#x3002;&#x5176;&#x4E2D;&#x7684;&#x5B89;&#x5168;&#xFF0C;&#x884C;&#x6587;&#x5230;&#x6B64;&#x5C1A;&#x672A;&#x4ECB;&#x7ECD;&#x5230;&#xFF0C;&#x6709;&#x4E9B;&#x516C;&#x53F8;&#x4F1A;&#x628A;&#x5B89;&#x5168;&#x5355;&#x62CE;&#x51FA;&#x6765;&#x6210;&#x7ACB;&#x5B89;&#x5168;&#x90E8;&#xFF0C;&#x6709;&#x4E9B;&#x5C31;&#x76F4;&#x63A5;&#x653E;&#x5728;&#x8FD0;&#x7EF4;&#x56E2;&#x961F;&#xFF0C;&#x8FD9;&#x4E2A;&#x770B;&#x516C;&#x53F8;&#x60C5;&#x51B5;&#xFF0C;&#x5982;&#x679C;&#x516C;&#x53F8;&#x4F53;&#x91CF;&#x5927;&#xFF0C;&#x4E2A;&#x4EBA;&#x8BA4;&#x4E3A;&#xFF0C;&#x8FD8;&#x662F;&#x5355;&#x62CE;&#x51FA;&#x6765;&#x4F1A;&#x597D;&#x4E00;&#x4E9B;&#x3002; &#x76EE;&#x6807;&#x62C6;&#x89E3;&#x5B89;&#x5168;&#x3001;&#x7A33;&#x5B9A;&#x3001;&#x9AD8;&#x6548;&#x3001;&#x4F4E;&#x6210;&#x672C;&#xFF0C;&#x600E;&#x4E48;&#x624D;&#x80FD;&#x628A;&#x8FD9;&#x56DB;&#x5927;&#x76EE;&#x6807;&#x505A;&#x597D;&#xFF1F;&#x5E94;&#x8BE5;&#x505A;&#x54EA;&#x4E9B;&#x4E8B;&#x60C5;&#x6765;&#x8FBE;&#x6210;&#x76EE;&#x6807;&#xFF1F;&#x7B14;&#x8005;&#x7528;&#x4E00;&#x5F20;&#x8111;&#x56FE;&#x6765;&#x68B3;&#x7406;&#x4E00;&#x4E0B;&#xFF1A; &#x8FD0;&#x7EF4;&#x76EE;&#x6807;&#x62C6;&#x89E3; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
      <categories>
        <category>职业规划</category>
      </categories>
      <tags>
        <tag>职业规划</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Red Hat Certified Engineer (RHCE) EX300 Study Guide]]></title>
    <url>%2FRHCE%2F2017%2F03%2F02%2FRed-Hat-Certified-Engineer-RHCE-EX300-Study-Guide.html</url>
    <content type="text"><![CDATA[Red Hat Certified Engineer (RHCE) EX300 Study Guide. If you&#x2019;re studying towards RHCE, then you may find this page useful. Our configuration was tested on RHEL 7.0 and RHEL 7.1, some notes for the newest at the time of writing RHEL 7.2, have also been added, were available. There is a link to a sample exam available at the bottom of the page. I also recommend you checking out the following blogs: CertDepot and RootUsers. They contain a great deal of information that can be helpful preparing for the RHCE exam. RHCE exam candidates should be able to accomplish the following without assistance. System Configuration and Management Use network teaming or bonding to configure aggregated network links between two Red Hat Enterprise Linux systems Configure IPv6 addresses and perform basic IPv6 troubleshooting Route IP traffic and create static routes Use firewalld and associated mechanisms such as rich rules, zones and custom rules, to implement packet filtering and configure network address translation (NAT) Use /proc/sys and sysctl to modify and set kernel runtime parameters Configure a system to authenticate using Kerberos (sssd, nslcd) Configure a system as either an iSCSI target or initiator that persistently mounts an iSCSI target Produce and deliver reports on system utilisation (processor, memory, disk, and network) Use shell scripting to automate system maintenance tasks Network ServicesNetwork services are an important subset of the exam objectives. RHCE candidates should be capable of meeting the following objectives for each of the network services listed below: Install the packages needed to provide the service Configure SELinux to support the service Use SELinux port labeling to allow services to use non-standard ports Configure the service to start when the system is booted Configure the service for basic operation Configure host-based and user-based security for the service HTTP/HTTPS Configure a virtual host Configure access restrictions on directories Deploy a basic CGI application Configure group-managed content Configure TLS security DNS Configure a caching-only name server Troubleshoot DNS client issuesNFS Provide network shares to specific clients Provide network shares suitable for group collaboration Use Kerberos to control access to NFS network sharesSMB Provide network shares to specific clients Provide network shares suitable for group collaborationSMTP Configure a system to forward all email to a central mail serverSSH Configure key-based authentication Configure additional options described in documentationNTP Synchronise time using other NTP peersDatabase services Install and configure MariaDB Backup and restore a database Create a simple database schema Perform simple SQL queries against a database Other RHCE Related TopicsFreeIPA Server on RHEL 7Configure Remote Logging on RHEL 7Software Bridge on Top of a Teamed Device on RHEL 7 RHCE Sample Exam for RHEL 7I&#x2019;ve created a sample exam, it&#x2019;s available here. document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
      <categories>
        <category>RHCE</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Docker基本操作命令]]></title>
    <url>%2Funcategorized%2F2017%2F02%2F24%2FDocker%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4.html</url>
    <content type="text"><![CDATA[docker&#x7B80;&#x660E;&#x64CD;&#x4ECB;&#x7ECD;&#x534F;&#x8BAE; Apache2.0&#x5F00;&#x53D1;&#x8BED;&#x8A00; Go&#x4E00;&#x6B21;build&#x5230;&#x5904;Rundocker&#x4F9D;&#x8D56;&#x4E8E;Linux&#x5185;&#x6838;/kerneldocker client server&#xFF08;&#x540E;&#x53F0;process&#xFF09;&#x7EC4;&#x4EF6;&#xFF1A;Image&#x955C;&#x50CF; Container&#x5BB9;&#x5668;&#xFF08;&#x9694;&#x79BB;&#xFF09; Repository&#x4ED3;&#x5E93;&#xFF08;&#x5B58;&#x653E;&#x955C;&#x50CF;&#xFF09; Docker&#x4E0E;openstack&#x5E94;&#x7528;&#x573A;&#x666F;&#x7684;&#x5BF9;&#x6BD4;&#x7C7B; &#x522B;&#xFF1A; Docker openstack&#x90E8;&#x7F72;&#x96BE;&#x5EA6;&#xFF1A; &#x975E;&#x5E38;&#x7B80;&#x5355; &#x7EC4;&#x4EF6;&#x591A;&#xFF0C;&#x90E8;&#x7F72;&#x590D;&#x6742;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#xFF1A; &#x79D2;&#x7EA7; &#x5206;&#x949F;&#x7EA7;&#x6267;&#x884C;&#x6027;&#x80FD;&#xFF1A; &#x548C;&#x7269;&#x7406;&#x673A;&#x51E0;&#x4E4E;&#x4E00;&#x81F4; VM&#x4F1A;&#x5360;&#x7528;&#x76F8;&#x5BF9;&#x591A;&#x4E00;&#x4E9B;&#x8D44;&#x6E90;&#x955C;&#x50CF;&#x4F53;&#x79EF;&#xFF1A; &#x955C;&#x50CF;MB&#x7EA7;&#x522B; &#x865A;&#x62DF;&#x673A;&#x955C;&#x50CF;GB&#x7EA7;&#x7BA1;&#x7406;&#x6548;&#x7387;&#xFF1A; &#x7BA1;&#x7406;&#x7B80;&#x5355; &#x7EC4;&#x4EF6;&#x76F8;&#x4E92;&#x4F9D;&#x8D56;&#xFF0C;&#x7BA1;&#x7406;&#x590D;&#x6742;&#x9694;&#x79BB;&#x6027;&#xFF1A; &#x9694;&#x79BB;&#x9AD8; &#x5F7B;&#x5E95;&#x9694;&#x79BB;&#x53EF;&#x7BA1;&#x7406;&#x6027;&#xFF1A; &#x5355;&#x8FDB;&#x7A0B;&#xFF0C;&#x4E0D;&#x5EFA;&#x8BAE;&#x542F;&#x52A8;SSH &#x5B8C;&#x6574;&#x7684;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;&#xFF1A; &#x6BD4;&#x8F83;&#x5F31;&#xFF0C;&#x505A;&#x96C6;&#x7FA4;&#x80FD;&#x529B;&#x6BD4;&#x8F83;&#x5F31; &#x501F;&#x52A9;neutron&#x53EF;&#x4EE5;&#x7075;&#x6D3B;&#x7EC4;&#x4EF6;&#x5404;&#x7C7B;&#x7F51;&#x7EDC;&#x67B6;&#x6784;&#x9762;&#x5411;&#x4EA7;&#x54C1;&#xFF0C; &#x5F00;&#x53D1;&#xFF0C; &#x6D4B;&#x8BD5;&#xFF0C; &#x8FD0;&#x7EF4; &#xFF0C; &#x81EA;&#x52A8;&#x5316;{&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x6269;&#x5BB9;} &#x5FAE;&#x670D;&#x52A1; &#x9762;&#x5411;&#x5927;&#x89C4;&#x6A21;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x67B6;&#x6784;{&#x5FAE;&#x4FE1;&#x7EA2;&#x5305;} centos 7 &#x914D;&#x7F6E;epel yum&#x6E90;123456wget http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpmyum install docker-iodocker serch centos #&#x641C;&#x7D22;&#x955C;&#x50CF;docker pull centos #&#x83B7;&#x53D6;centos&#x955C;&#x50CF;docker rmi images id #&#x5220;&#x9664;&#x955C;&#x50CF;&#xFF08;&#x6839;&#x636E;image id&#x5220;&#x9664;&#xFF09;docker rm container id #&#x5220;&#x9664;&#x5BB9;&#x5668;&#xFF08;&#x6839;&#x636E;container id&#xFF09; &#x8BE6;&#x7EC6;&#x63CF;&#x8FF0;&#x955C;&#x50CF;123[root@localhost ~]# docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEdocker.io/centos latest 3bee3060bfc8 3 weeks ago 192.5 MB docker&#x6BCF;&#x6B21;&#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x811A;&#x672C;&#x542F;&#x52A8;&#x591A;&#x4E2A;&#x5E94;&#x7528;12[root@bogon ~]# docker run centos /bin/echo &apos;hello, world!&apos;hello, world! &#x67E5;&#x770B;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x72B6;&#x6001;123[root@bogon ~]# docker ps -aCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES22143f214366 centos &quot;/bin/echo &apos;hello, wo&quot; 26 seconds ago Exited (0) 25 seconds ago loving_ptolemy &#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x540D;&#x5B57;&#xFF0C;&#x5E76;&#x4E14;&#x8FDB;&#x5165;bash&#x6A21;&#x5F0F;12[root@bogon ~]# docker run --name DenissDocker -it centos /bin/bash[root@32bbfc535f14 /]# ####&#x9000;&#x51FA;&#x5BB9;&#x5668;exit1234[root@bogon ~]# docker ps -aCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES32bbfc535f14 centos &quot;/bin/bash&quot; 2 minutes ago Exited (0) 3 seconds ago DenissDocker22143f214366 centos &quot;/bin/echo &apos;hello, wo&quot; 4 minutes ago Exited (0) 4 minutes ago loving_ptolemy ####&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#x53C2;&#x6570;-d(&#x5982;&#x679C;&#x6CA1;&#x6709;nginx&#x955C;&#x50CF;&#x4F1A;&#x4ECE;repository&#x4ED3;&#x5E93;pull&#x4E00;&#x4E2A;&#x4E0B;&#x6765;)1[root@bogon ~]# docker run -d -h nginx --name Deniss.nginx nginx &#x8FDB;&#x5165;&#x5BB9;&#x5668;&#x4E0E;&#x7F51;&#x7EDC;&#x8BBF;&#x95EE;&#x6A21;&#x5F0F;&#x83B7;&#x53D6;&#x5BB9;&#x5668;PID&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x540D;&#x5B57;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;CONTAINER ID1[root@bogon ~]# docker inspect --format &quot;{{.State.Pid}}&quot; Deniss.nginx &#x811A;&#x672C;1234#!/bin/bashCNAME=$1CPID=$(docker inspect --format &quot;{{.State.Pid}}&quot; $CNAME)nsenter --target &quot;$CPID&quot; --mount --uts --ipc --net --pid &#x7F51;&#x7EDC;&#x8BBF;&#x95EE;&#x6A21;&#x5F0F;&#x968F;&#x673A;&#x6620;&#x5C04;docker run -P{&#x65E0;&#x9700;&#x5236;&#x5B9A;&#x7AEF;&#x53E3;&#xFF0C;&#x7AEF;&#x53E3;&#x968F;&#x673A;} &#x4F18;&#x70B9;&#xFF1A;&#x7AEF;&#x53E3;&#x4E0D;&#x4F1A;&#x51B2;&#x7A81;1[root@bogon ~]# docker run -d -P --name mysqlnginx1 nginx docker run -p {&#x5236;&#x5B9A;&#x7AEF;&#x53E3;}&#x5236;&#x5B9A;&#x6620;&#x5C04;1[root@bogon ~]# dockersqlnginx2 nginx run -d -p 91:80 --name mynginx2 nginx &#x67E5;&#x770B;&#x7F51;&#x7EDC;1234[root@bogon ~]# brctl showbridge name bridge id STP enabled interfacesdocker0 8000.0242ba293708 no veth21d6f36virbr0 8000.5254005d7096 yes virbr0-nic ####&#x67E5;&#x770B;docker&#x5BB9;&#x5668;ip1[root@bogon ~]# ip ad li ####&#x67E5;&#x770B;&#x8DEF;&#x7531;&#x7F51;&#x5173;1[root@bogon ~]# ip ro li &#x6570;&#x636E;&#x7BA1;&#x7406;&#x6570;&#x636E;&#x5377; &#x6570;&#x636E;&#x5377;&#x5BB9;&#x5668;-v /data &#x2013;volumes--v src:dst from &#x6570;&#x636E;&#x5377;&#x4E2D;&#x7684;&#x64CD;&#x4F5C;&#x4F1A;&#x7ACB;&#x9A6C;&#x751F;&#x6548;&#xFF0C;&#x540C;&#x65F6;&#x8FD8;&#x53EF;&#x4EE5;&#x5171;&#x4EAB;&#x91CD;&#x7528;&#x6620;&#x5C04;&#x6570;&#x636E;&#x5377;&#x7684;&#x521B;&#x5EFA;&#x65B9;&#x5F0F;{&#x76EE;&#x5F55;&#x4F1A;&#x7ED5;&#x8FC7;UFS /var/lib/docker/vfs/dir}1[root@bogon ~]# docker run -it --name volume-test1 -h nginx -v /data cetnos &#x67E5;&#x770B;docker&#x6570;&#x636E;&#x5377;&#x5B58;&#x653E;&#x7684;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;&#x5236;&#x5B9A;&#x76EE;&#x5F55;&#x6302;&#x8F7D;&#x81F3;&#x5BB9;&#x5668;&#xFF08;&#x4E0D;&#x53EF;&#x4EE5;&#x6709;&#x7279;&#x6B8A;&#x5B57;&#x7B26;/&#xFF09;&#x53EF;&#x4EE5;&#x5236;&#x5B9A;&#x6743;&#x9650;&#x8BBF;&#x95EE;1[root@bogon ~]# docker run -it --name volume-test2 -h nginx -v /otp:/opt:ro centos ####&#x6570;&#x636E;&#x5377;&#x5BB9;&#x5668;&#x7528;&#x4E4B;&#x524D;&#x542F;&#x52A8;&#x7684;&#x5BB9;&#x5668;&#x7528;&#x6765;&#x505A;&#x6570;&#x636E;&#x5377;&#x5B58;&#x50A8;&#x8BBF;&#x95EE;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x505C;&#x6B62;&#x72B6;&#x6001;&#xFF0C;&#x5BB9;&#x5668;&#x4E0E;&#x65B0;&#x5EFA;&#x5BB9;&#x5668;&#x4E4B;&#x95F4;&#x7684;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;1[root@bogon ~]# docker run -it --name volume-test4 --volumes-from volume-test1 centos &#x811A;&#x672C;&#x5FAA;&#x73AF;&#x6253;&#x5370; image id &#x5E76;&#x5220;&#x9664;1[root@bogon ~]# for name in `docker images |awk &apos;{print $3}&apos;|grep -v IMAGE`;do docker rmi $name;done document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[MySQL备份工具Mysqldump以及Xtrabackup详解]]></title>
    <url>%2FMySQL%2F2017%2F02%2F07%2FMySQL%E5%A4%87%E4%BB%BD%E5%B7%A5%E5%85%B7mysqldump%E4%BB%A5%E5%8F%8AXtrabackup%E8%AF%A6%E8%A7%A3.html</url>
    <content type="text"><![CDATA[&#x5F00;&#x5934;&#x8BED;: &#x5728;&#x5F00;&#x59CB;&#x5BF9;Mysqldump&#x8DDF;Xtrabakcup&#x7684;&#x4ECB;&#x7ECD;&#x4E0E;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#x5230;&#x4E4B;&#x524D;&#xFF0C;&#x8BF4;&#x4E0B;&#x6570;&#x636E;&#x5BF9;&#x516C;&#x53F8;&#x7684;&#x91CD;&#x8981;&#x6027;&#xFF1A;123&#x5BF9;&#x4E8E;&#x516C;&#x53F8;&#x6765;&#x8BB2;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x672C;&#x8EAB;&#x53EF;&#x80FD;&#x5E76;&#x4E0D;&#x91CD;&#x8981;&#xFF0C;&#x91CD;&#x8981;&#x7684;&#x662F;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x3002;&#x5BF9;&#x4E8E;&#x5907;&#x4EFD;&#x6765;&#x8BB2;&#xFF0C;&#x6700;&#x7EC8;&#x7684;&#x76EE;&#x7684;&#x662F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5907;&#x4EFD;&#x80FD;&#x591F;&#x5B9E;&#x73B0;&#x8FD8;&#x539F;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x4E00;&#x4E2A;&#x53EF;&#x6062;&#x590D;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x662F;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#xFF0C;&#x751A;&#x81F3;&#x5173;&#x4E4E;&#x516C;&#x53F8;&#x7684;&#x547D;&#x8109;&#x3002; &#x4E3A;&#x4EC0;&#x4E48;&#x5907;&#x4EFD;? 12345&#x5B9E;&#x73B0;&#x707E;&#x96BE;&#x6062;&#x590D;&#xFF1A;&#x786C;&#x4EF6;&#x6545;&#x969C;(&#x5197;&#x4F59;)&#x3001;&#x8F6F;&#x4EF6;&#x6545;&#x969C;(BUG)&#x3001;&#x81EA;&#x7136;&#x707E;&#x5BB3;&#x3001;&#x9ED1;&#x5BA2;&#x653B;&#x51FB;&#x3001;&#x8BEF;&#x64CD;&#x4F5C;&#x3001;...&#x6D4B;&#x8BD5;&#x6062;&#x590D;&#x5907;&#x4EFD;&#x65F6;&#xFF0C;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x5C06;&#x6570;&#x636E;&#x5E93;&#x6D4B;&#x8BD5;&#x5D29;&#x6E83;&#x6389;&#x7684;&#x60C5;&#x51B5;&#x8FD9;&#x91CC;&#x6700;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x7684;&#x60C5;&#x51B5;&#x662F;&#xFF1A;&#x8BEF;&#x64CD;&#x4F5C;&#x6240;&#x4EE5;&#x8BF4;&#xFF0C;&#x5728;&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x5E93;&#x65F6;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x614E;&#x4E4B;&#x53C8;&#x614E; &#x5907;&#x4EFD;&#x65F6;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x4E8B;&#x9879; &#x6CE8;&#x610F;&#x4E8B;&#x9879; 1234567&#x80FD;&#x5BB9;&#x5FCD;&#x6700;&#x591A;&#x4E22;&#x5931;&#x591A;&#x5C11;&#x6570;&#x636E;&#xFF1B;&#x6062;&#x590D;&#x6570;&#x636E;&#x9700;&#x8981;&#x5728;&#x591A;&#x957F;&#x65F6;&#x95F4;&#x5185;&#x5B8C;&#x6210;&#xFF1B;&#x9700;&#x8981;&#x6062;&#x590D;&#x54EA;&#x4E9B;&#x6570;&#x636E;&#xFF1B;&#x505A;&#x6062;&#x590D;&#x6F14;&#x7EC3;&#xFF1A; &#x6D4B;&#x8BD5;&#x5907;&#x4EFD;&#x7684;&#x53EF;&#x7528;&#x6027;&#xFF1B; &#x589E;&#x5F3A;&#x6062;&#x590D;&#x64CD;&#x4F5C;&#x6548;&#x7387;&#xFF1B; &#x5907;&#x4EFD;&#x9700;&#x8981;&#x8003;&#x8651;&#x7684;&#x56E0;&#x7D20; 1234&#x9501;&#x5B9A;&#x8D44;&#x6E90;&#x591A;&#x957F;&#x65F6;&#x95F4;&#xFF1F;&#x5907;&#x4EFD;&#x8FC7;&#x7A0B;&#x7684;&#x65F6;&#x957F;&#xFF1F;&#x5907;&#x4EFD;&#x65F6;&#x7684;&#x670D;&#x52A1;&#x5668;&#x8D1F;&#x8F7D;&#xFF1F;&#x6062;&#x590D;&#x8FC7;&#x7A0B;&#x7684;&#x65F6;&#x957F;&#xFF1F; &#x5907;&#x4EFD;&#x4EC0;&#x4E48;? 1234&#x6570;&#x636E;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x3001;InnoDB&#x7684;&#x4E8B;&#x52A1;&#x65E5;&#x5FD7;&#xFF1B;&#x4EE3;&#x7801;&#xFF08;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x3001;&#x5B58;&#x50A8;&#x51FD;&#x6570;&#x3001;&#x89E6;&#x53D1;&#x5668;&#x3001;&#x4E8B;&#x4EF6;&#x8C03;&#x5EA6;&#x5668;&#xFF09;&#x670D;&#x52A1;&#x5668;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6; --&gt; &#x914D;&#x7F6E;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6; --&gt; &#x5B58;&#x653E;&#x5728; Git &#x3001;svn &#x4E0A; &#x6CE8;&#x610F;&#xFF1A;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x3001;InnoDB&#x4E8B;&#x52A1;&#x65E5;&#x5FD7; &#x4E0E;&#x6570;&#x636E;&#x8981;&#x5206;&#x522B;&#x5B58;&#x653E;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x786C;&#x76D8;&#x4E2D; &#x5907;&#x4EFD;&#x7B56;&#x7565; 1234&#x5168;&#x91CF;+&#x5DEE;&#x5F02; + binlogs&#x5168;&#x91CF;+&#x589E;&#x91CF; + binlogs &#x5907;&#x4EFD;&#x624B;&#x6BB5;&#xFF1A;&#x7269;&#x7406;&#x3001;&#x903B;&#x8F91; &#x5907;&#x4EFD;&#x7C7B;&#x578B; &#x5907;&#x4EFD;&#x7684;&#x6570;&#x636E;&#x7684;&#x8303;&#x56F4;123&#x5B8C;&#x5168;&#x5907;&#x4EFD;&#x548C;&#x90E8;&#x5206;&#x5907;&#x4EFD; &#x5B8C;&#x5168;&#x5907;&#x4EFD;&#xFF1A;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x96C6;&#xFF1B; &#x90E8;&#x5206;&#x5907;&#x4EFD;&#xFF1A;&#x6570;&#x636E;&#x96C6;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x6BD4;&#x5982;&#x90E8;&#x5206;&#x8868;&#xFF1B; &#x5168;&#x91CF;&#x5907;&#x4EFD;&#x3001;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x3001;&#x5DEE;&#x5F02;&#x5907;&#x4EFD; &#x5168;&#x91CF;&#x5907;&#x4EFD; 1&#x5907;&#x4EFD;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E; &#x589E;&#x91CF;&#x5907;&#x4EFD; 1&#x4EC5;&#x5907;&#x4EFD;&#x81EA;&#x4E0A;&#x4E00;&#x6B21;&#x5B8C;&#x5168;&#x5907;&#x4EFD;&#x6216; &#x589E;&#x91CF;&#x5907;&#x4EFD;&#x4EE5;&#x6765;&#x53D8;&#x91CF;&#x7684;&#x90A3;&#x90E8;&#x6570;&#x636E; &#x5DEE;&#x5F02;&#x5907;&#x4EFD; 1&#x4EC5;&#x5907;&#x4EFD;&#x81EA;&#x4E0A;&#x4E00;&#x6B21;&#x5B8C;&#x5168;&#x5907;&#x4EFD;&#x4EE5;&#x6765;&#x53D8;&#x91CF;&#x7684;&#x90A3;&#x90E8;&#x6570;&#x636E;&#xFF1B;(&#x6D6A;&#x8D39;&#x7A7A;&#x95F4;&#xFF0C;&#x8FD8;&#x539F;&#x6548;&#x679C;&#x6BD4;&#x589E;&#x91CF;&#x5FEB;) &#x901A;&#x8FC7;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6570;&#x636E;&#x5E93; 12&#x5B8C;&#x5168;+&#x589E;&#x91CF;&#xFF1A; &#x5B8C;&#x5168;+&#x6BCF;&#x4E00;&#x6B21;&#x589E;&#x91CF; + &#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;(&#x6839;&#x636E;&#x65F6;&#x95F4;&#x70B9;&#x6062;&#x590D;)&#x5B8C;&#x5168;+&#x5DEE;&#x5F02;&#xFF1A; &#x5B8C;&#x5168;+&#x6700;&#x540E;&#x4E00;&#x6B21;&#x5DEE;&#x5F02;&#x5907;&#x4EFD; + &#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;(&#x6839;&#x636E;&#x65F6;&#x95F4;&#x70B9;&#x6062;&#x590D;) &#x7269;&#x7406;&#x5907;&#x4EFD;&#x3001;&#x903B;&#x8F91;&#x5907;&#x4EFD; &#x7269;&#x7406;&#x5907;&#x4EFD; 1&#x76F4;&#x63A5;&#x590D;&#x5236;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x7684;&#x5907;&#x4EFD; &#x903B;&#x8F91;&#x5907;&#x4EFD;(mysqldump) 12&#x901A;&#x8FC7;mysql&#xFF0C;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x5BFC;&#x51FA;&#x6570;&#x636E;&#x53E6;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x5927;&#x7684;SELECT &#x8BED;&#x53E5;&#xFF0C;&#x8F6C;&#x6210;&#x4E00;&#x4E2A; INSERT &#x8BED;&#x53E5; &#x8FDB;&#x884C;&#x5907;&#x4EFD; &#x70ED;&#x5907;&#x3001;&#x6E29;&#x5907;&#x3001;&#x51B7;&#x5907; &#x70ED;&#x5907; 1&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#x5747;&#x53EF;&#x8FDB;&#x884C;&#x7684;&#x72B6;&#x6001;&#x4E0B;&#x6240;&#x505A;&#x7684;&#x5907;&#x4EFD; --&gt; &#x5BFC;&#x81F4;&#x5907;&#x4EFD;&#x7684;&#x6570;&#x636E;&#x65F6;&#x95F4;&#x70B9;&#x53EF;&#x80FD;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x6062;&#x590D;&#x540E;&#x7684;&#x6570;&#x636E;&#x65F6;&#x95F4;&#x70B9;&#x4E0D;&#x4E00;&#x81F4; --&gt; &#x5BFC;&#x81F4;MySQL&#x62D2;&#x7EDD;&#x6062;&#x590D; &#x6E29;&#x5907; 1&#x53EF;&#x8BFB;&#x4F46;&#x4E0D;&#x53EF;&#x5199;&#x72B6;&#x6001;&#x4E0B;&#x8FDB;&#x884C;&#x7684;&#x5907;&#x4EFD; &#x51B7;&#x5907; 1&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#x5747;&#x4E0D;&#x53EF;&#x8FDB;&#x884C;&#x7684;&#x72B6;&#x6001;&#x4E0B;&#x6240;&#x505A;&#x7684;&#x5907;&#x4EFD; mysqldump&#x5907;&#x4EFD;&#x5DE5;&#x5177;&#x4F7F;&#x7528;&#x8BE6;&#x89E3; &#x5907;&#x4EFD;&#x7B56;&#x7565;&#xFF1A; 1&#x5168;&#x91CF;&#x5907;&#x4EFD; + binlogs &#x547D;&#x4EE4;&#x8BE6;&#x89E3; &#x8BED;&#x6CD5;&#x683C;&#x5F0F;&#xFF1A; 123mysqldump [OPTIONS] database [tables]OR mysqldump [OPTIONS] --databases [OPTIONS] DB1 [DB2 DB3...]OR mysqldump [OPTIONS] --all-databases [OPTIONS] &#x5B9E;&#x4F8B;&#x8BE6;&#x89E3;&#xFF1A; 12345# &#x8868;&#x7EA7;&#x522B;&#x5907;&#x4EFD;&#xFF1B;&#x4E0D;&#x4F1A;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;$ mysqldump mydb# &#x5E93;&#x7EA7;&#x522B;&#x5907;&#x4EFD;&#xFF0C;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93; $ mysqldump --databases mydb &#x9009;&#x9879;&#x8BE6;&#x89E3; 12345678910111213-x, --lock-all-tables &#x9501;&#x5B9A;&apos;&#x6240;&#x6709;&#x5E93;&#x7684;&#x6240;&#x6709;&#x8868;&apos;&#xFF0C;&#x8BFB;&#x9501;&#xFF1B;-l, --lock-tables &#x9501;&#x5B9A;&apos;&#x6307;&#x5B9A;&#x5E93;&#x6240;&#x6709;&#x8868;&apos;&#xFF1B;-R, --routines &#x5907;&#x4EFD;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x548C;&#x5B58;&#x50A8;&#x51FD;&#x6570;&#xFF1B;-E, --events &#x5907;&#x4EFD;&#x4E8B;&#x4EF6;&#x8C03;&#x5EA6;&#x5668;-F&#xFF0C;--flush-logs &#x9501;&#x5B9A;&#x8868;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x5373;&#x8FDB;&#x884C;&#x65E5;&#x5FD7;&#x5237;&#x65B0;&#x64CD;&#x4F5C;&#xFF0C;&#x8BA9;&#x65E5;&#x5FD7;&#x6EDA;&#x52A8;&#xFF1B;--triggers &#x5907;&#x4EFD;&#x89E6;&#x53D1;&#x5668;--master-data[=#] &#xFF1A;&#x8BB0;&#x5F55;&#x5907;&#x4EFD;&#x5F00;&#x59CB;&#x65F6; binlog&#x4E2D; 1&#xFF1A;&#x8BB0;&#x5F55;&#x4E3A;CHANGE MASTER TO&#x8BED;&#x53E5;&#xFF0C;&#x6B64;&#x8BED;&#x53E5;&#x4E0D;&#x88AB;&#x6CE8;&#x91CA;&#xFF1B; 2&#xFF1A;&#x8BB0;&#x5F55;&#x4E3A;CHANGE MASTER TO&#x8BED;&#x53E5;&#xFF0C;&#x6B64;&#x8BED;&#x53E5;&#x88AB;&#x6CE8;&#x91CA;&#xFF1B; &apos;InnoDB&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#xFF1A;&#x652F;&#x6301;&#x6E29;&#x5907;&#x548C;&#x70ED;&#x5907;&#xFF1B;&apos; --single-transaction&#xFF1A;&apos;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#xFF0C;&#x57FA;&#x4E8E;&#x6B64;&#x5FEB;&#x7167;&#x6267;&#x884C;&#x5907;&#x4EFD;&apos;&#xFF1B; &#x5168;&#x91CF;&#x5907;&#x4EFD;&#x4E00;&#x6B21;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x5E93; &#x5F00;&#x542F;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7; 1234$ vim /etc/my.cnf.d/server.conf[server]log_bin=mysql-bin$ systemctl restart mariadb.service &#x5F00;&#x59CB;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x5E93; 123456789101112131415161718192021222324252627# &#x4F7F;&#x7528;mysqldump&#x5907;&#x4EFD;&#x6574;&#x4E2A;mysql&#x6570;&#x636E;&#x5E93;$ mysqldump -E -R --triggers --master-data=2 -F -l --single-transaction --all-databases &gt; /tmp/all-fullback-$(date +%F).sql# &#x767B;&#x9646;&#x81F3;MySQL&#x4FEE;&#x6539;&#x4E00;&#x4E9B;&#x6570;&#x636E;$ mysql &gt; SHOW MASTER LOGS;+------------------+-----------+| Log_name | File_size |+------------------+-----------+| mysql-bin.000001 | 30352 || mysql-bin.000002 | 1038814 || mysql-bin.000003 | 9235 || mysql-bin.000004 | 696 || mysql-bin.000005 | 245 |+------------------+-----------+&gt; use hellodb;&gt; DELETE FROM students WHERE StuID=1;&gt; DELETE FROM students WHERE StuID=5;&gt; DELETE FROM students WHERE StuID=10;&gt; DELETE FROM students WHERE StuID=15;&gt; DELETE FROM students WHERE StuID=20;# &#x62F7;&#x8D1D;&#x5168;&#x91CF;&#x5907;&#x4EFD;&#x540E;&#xFF0C;&#x672A;&#x5907;&#x4EFD;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x81F3;/tmp&#x76EE;&#x5F55;&#x4E2D;$ cp /var/lib/mysql/mysql-bin.000005 /tmp/# &#x6A21;&#x62DF;&#x6570;&#x636E;&#x5E93;&#x5D29;&#x6E83;&#x60C5;&#x51B5;&#xFF0C;&#x5220;&#x9664;&#x6570;&#x636E;&#x5E93;&#x6570;&#x636E;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;$ rm -rf /var/lib/mysql/* &#x4F7F;&#x7528;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6570;&#x636E;&#x5E93; &#x91CD;&#x542F;&#x6570;&#x636E;&#x5E93; 12$ systemctl stop mariadb.service$ systemctl start mariadb.service &#x767B;&#x9646;&#x6570;&#x636E;&#x5E93;&#x8FDB;&#x884C;&#x6062;&#x590D; 123456$ mysql# &#x5173;&#x95ED;&#x4F1A;&#x8BDD;&#x7EA7;&#x522B;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x6267;&#x884C;&#x6062;&#x590D;sql&#x811A;&#x672C;&#xFF0C;&#x4E0D;&#x5E0C;&#x671B;&#x4E8C;&#x8FDB;&#x5236;&#x8BB0;&#x5F55;&#x6B64;&#x4FE1;&#x606F;&gt; SET @@session.sql_log_bin=OFF; # &#x5728;MySQL&#x4E2D;&#x6267;&#x884C;SQL&#x811A;&#x672C;&gt; \. /tmp/alldb_fullbackup-2017-06-20.sql &#x4F7F;&#x7528;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x6062;&#x590D;&#x672A;&#x5907;&#x4EFD;&#x7684;&#x4FE1;&#x606F; 12$ cd /tmp$ mysqlbinlog mysql-bin.000005 | mysql &#x5F00;&#x542F;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55; 1&gt; SET @@session.sql_log_bin=ON; &#x81F3;&#x6B64;&#xFF0C;&#x4E00;&#x6B21;&#x5220;&#x5E93;&#x5230;&#x6062;&#x590D;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#xFF0C;&#x4E0D;&#x8FC7;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5728;&#x6062;&#x590D;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x5982;&#x679C;&#x4E1A;&#x52A1;&#x4E0D;&#x662F;&#x5F88;&#x7740;&#x6025;&#x9700;&#x8981;&#x4E0A;&#x7EBF;&#xFF0C;&#x8FD9;&#x65F6;&#x8FD8;&#x8981;&#x505A;&#x4E00;&#x6B21;&#x5168;&#x91CF;&#x5907;&#x4EFD;&#x3002;&#x5982;&#x679C;&#x4E1A;&#x52A1;&#x5FC5;&#x987B;&#x7ACB;&#x5373;&#x4E0A;&#x7EBF;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x5F53;&#x5929;&#x665A;&#x4E0A;&#x8FDB;&#x884C;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x5E93;&#x3002; &#x4F7F;&#x7528;&#x5907;&#x4EFD;&#x811A;&#x672C;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x5E93;12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364$ vim mysql-backup.sh#!/bin/bash# MYSQLDBUSERNAME&#x662F;MySQL&#x6570;&#x636E;&#x5E93;&#x7684;&#x7528;&#x6237;&#x540D;&#xFF0C;&#x53EF;&#x81EA;&#x5B9A;&#x4E49;MYSQLDBUSERNAME=root# MYSQLDBPASSWORD&#x662F;MySQL&#x6570;&#x636E;&#x5E93;&#x7684;&#x5BC6;&#x7801;&#xFF0C;&#x53EF;&#x81EA;&#x5B9A;&#x4E49;MYSQLDBPASSWORD=&quot;root@123&quot;# MYSQBASEDIR&#x662F;MySQL&#x6570;&#x636E;&#x5E93;&#x7684;&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#xFF0C;--prefix=$MYSQBASEDIR&#xFF0C;&#x53EF;&#x81EA;&#x5B9A;&#x4E49;MYSQBASEDIR=/usr# MYSQL&#x662F;mysql&#x547D;&#x4EE4;&#x7684;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;&#xFF0C;&#x53EF;&#x81EA;&#x5B9A;&#x4E49;MYSQL=$MYSQBASEDIR/bin/mysql# MYSQLDUMP&#x662F;mysqldump&#x547D;&#x4EE4;&#x7684;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;&#xFF0C;&#x53EF;&#x81EA;&#x5B9A;&#x4E49;MYSQLDUMP=$MYSQBASEDIR/bin/mysqldump# BACKDIR&#x662F;&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x7684;&#x5B58;&#x653E;&#x5730;&#x5740;&#xFF0C;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x4FEE;&#x6539;&#x6210;&#x8FDC;&#x7A0B;&#x5730;&#x5740;BACKDIR=/var/backup/mysqldb# &#x83B7;&#x53D6;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#xFF0C;&#x683C;&#x5F0F;&#x4E3A;&#xFF1A;&#x5E74;-&#x6708;-&#x65E5;&#xFF0C;&#x7528;&#x4E8E;&#x751F;&#x6210;&#x4EE5;&#x8FD9;&#x79CD;&#x65F6;&#x95F4;&#x683C;&#x5F0F;&#x7684;&#x76EE;&#x5F55;&#x540D;&#x79F0;DATEFORMATTYPE1=$(date +%Y-%m-%d)# &#x83B7;&#x53D6;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#xFF0C;&#x683C;&#x5F0F;&#x4E3A;&#xFF1A;&#x5E74;&#x6708;&#x65E5;&#x65F6;&#x5206;&#x79D2;&#xFF0C;&#x7528;&#x4E8E;&#x751F;&#x6210;&#x4EE5;&#x8FD9;&#x79CD;&#x65F6;&#x95F4;&#x683C;&#x5F0F;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x79F0;DATEFORMATTYPE2=$(date +%Y%m%d%H%M%S)# &#x6570;&#x636E;&#x5E93;&#x6570;&#x636E;&#x76EE;&#x5F55;MYSQDATADIR=/var/lib/mysql# &#x5982;&#x679C;mysql&#x547D;&#x4EE4;&#x5B58;&#x5728;&#x5E76;&#x53EF;&#x6267;&#x884C;&#xFF0C;&#x5219;&#x7EE7;&#x7EED;&#xFF0C;&#x5426;&#x5219;&#x5C06;MYSQL&#x8BBE;&#x5B9A;&#x4E3A;mysql&#xFF0C;&#x9ED8;&#x8BA4;&#x8DEF;&#x5F84;&#x4E0B;&#x7684;mysql[ -x $MYSQL ] || MYSQL=mysql# &#x5982;&#x679C;mysqldump&#x547D;&#x4EE4;&#x5B58;&#x5728;&#x5E76;&#x53EF;&#x6267;&#x884C;&#xFF0C;&#x5219;&#x7EE7;&#x7EED;&#xFF0C;&#x5426;&#x5219;&#x5C06;MYSQLDUMP&#x8BBE;&#x5B9A;&#x4E3A;mysqldump&#xFF0C;&#x9ED8;&#x8BA4;&#x8DEF;&#x5F84;&#x4E0B;&#x7684;mysqldump[ -x $MYSQLDUMP ] || MYSQLDUMP=mysqldump# &#x5982;&#x679C;&#x4E0D;&#x5B58;&#x5728;&#x5907;&#x4EFD;&#x76EE;&#x5F55;&#x5219;&#x521B;&#x5EFA;&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;[ -d ${BACKDIR} ] || mkdir -p ${BACKDIR}[ -d ${BACKDIR}/${DATEFORMATTYPE1} ] || mkdir ${BACKDIR}/${DATEFORMATTYPE1}# &#x83B7;&#x53D6;MySQL&#x4E2D;&#x6709;&#x54EA;&#x4E9B;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x6839;&#x636E;mysqldatadir&#x4E0B;&#x7684;&#x76EE;&#x5F55;&#x540D;&#x5B57;&#x6765;&#x786E;&#x8BA4;&#xFF0C;&#x6B64;&#x5904;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#xFF0C;TODODBLIST=`ls -p $MYSQDATADIR | grep / |tr -d /`# &#x4ECE;&#x6570;&#x636E;&#x5E93;&#x5217;&#x8868;&#x4E2D;&#x5FAA;&#x73AF;&#x53D6;&#x51FA;&#x6570;&#x636E;&#x5E93;&#x540D;&#x79F0;&#xFF0C;&#x6267;&#x884C;&#x5907;&#x4EFD;&#x64CD;&#x4F5C;for DBNAME in $DBLIST # mysqldump skip one table # -- Warning: Skipping the data of table mysql.event. Specify the --events option explicitly. # mysqldump --ignore-table=mysql.event # http://serverfault.com/questions/376904/mysqldump-skip-one-table # --routines&#xFF0C;&#x5907;&#x4EFD;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x548C;&#x51FD;&#x6570; # --events&#xFF0C;&#x8DF3;&#x8FC7;mysql.event&#x8868; # --triggers&#xFF0C;&#x5907;&#x4EFD;&#x89E6;&#x53D1;&#x5668; # --single-transaction&#xFF0C;&#x9488;&#x5BF9;InnoDB&#xFF0C;&#x5728;&#x5355;&#x6B21;&#x4E8B;&#x52A1;&#x4E2D;&#x901A;&#x8FC7;&#x8F6C;&#x50A8;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;&#x8868;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x5FEB;&#x7167;&#xFF0C;&#x6B64;&#x9009;&#x9879;&#x4F1A;&#x5BFC;&#x81F4;&#x81EA;&#x52A8;&#x9501;&#x8868;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x9700;&#x8981;--lock-all-tables # --flush-logs&#xFF0C;&#x5728;dump&#x8F6C;&#x50A8;&#x524D;&#x5237;&#x65B0;&#x65E5;&#x5FD7; # --ignore-table&#xFF0C;&#x5FFD;&#x7565;&#x67D0;&#x4E2A;&#x8868;&#xFF0C;--ignore-table=database.table # --master-data=2 &#xFF0C;&#x5982;&#x679C;&#x542F;&#x7528;MySQL&#x590D;&#x5236;&#x529F;&#x80FD;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x8FD9;&#x4E2A;&#x9009;&#x9879; # &#x5C06;dump&#x51FA;&#x7684;sql&#x8BED;&#x53E5;&#x7528;gzip&#x538B;&#x7F29;&#x5230;&#x4E00;&#x4E2A;&#x4EE5;&#x65F6;&#x95F4;&#x547D;&#x540D;&#x7684;&#x6587;&#x4EF6; do ${MYSQLDUMP} --user=${MYSQLDBUSERNAME} --password=${MYSQLDBPASSWORD} --routines --events --triggers --single-transaction --flush-logs --ignore-table=mysql.event --databases ${DBNAME} | gzip &gt; ${BACKDIR}/${DATEFORMATTYPE1}/${DBNAME}-backup-${DATEFORMATTYPE2}.sql.gz # &#x68C0;&#x67E5;&#x6267;&#x884C;&#x7ED3;&#x679C;&#xFF0C;&#x5982;&#x679C;&#x9519;&#x8BEF;&#x4EE3;&#x7801;&#x4E3A;0&#x5219;&#x8F93;&#x51FA;&#x6210;&#x529F;&#xFF0C;&#x5426;&#x5219;&#x8F93;&#x51FA;&#x5931;&#x8D25; [ $? -eq 0 ] &amp;&amp; echo &quot;${DBNAME} has been backuped successful&quot; || echo &quot;${DBNAME} has been backuped failed&quot; # &#x7B49;&#x5F85;5s&#xFF0C;&#x53EF;&#x81EA;&#x5B9A;&#x4E49; /bin/sleep 5done xtrabackupex&#x5907;&#x4EFD;&#x5DE5;&#x5177;&#x4F7F;&#x7528;&#x8BE6;&#x89E3;&#x5B89;&#x88C5;xtrabackupex&#x5B98;&#x65B9;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A;XtraBackup &#x5B89;&#x88C5;XtraBackup 123$ ntpdate 172.16.0.1$ wget ftp://172.16.0.1/pub/Sources/7.x86_64/percona/percona-xtrabackup-24-2.4.7-2.el7.x86_64.rpm$ yum install -y ./percona-xtrabackup-24-2.4.7-2.el7.x86_64.rpm &#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x5168;&#x5E93;&#x5907;&#x4EFD;1234567891011$ vim /etc/my.cnf.d/server.conf[server]skip_name_resolve=ONinnodb_file_per_table=ONlog-bin=mysql_bin$ systemctl start mariadb.service# &#x5168;&#x5E93;&#x5907;&#x4EFD;&#x65F6;&#xFF0C;&#x65E0;&#x9700;&#x6307;&#x5B9A;&#x6570;&#x636E;&#x5E93;&#x5373;&#x53EF;&#x5907;&#x4EFD;&#x3002;&#x6307;&#x5B9A;&#x5E93;&#x5907;&#x4EFD;&#x4F7F;&#x7528; --databases DATABASE_NAME$ innobackupex --user root /data/backup/$ ll /data/backup/2017-07-13_20-05-42/ &#x901A;&#x8FC7;&#x5907;&#x4EFD;&#x6062;&#x590D;&#x6570;&#x636E;&#x5E93; &#x6062;&#x590D;&#x4E4B;&#x524D;&#x7684;&#x51C6;&#x5907; 123# &#x9ED8;&#x8BA4;&#x6570;&#x636E;&#x5E93;&#x635F;&#x574F;&#xFF0C;&#x88AB;&#x5220;&#x5E93;$ cp /var/lib/mysql/mysql_bin.00000* /data/backup$ rm -rf /var/lib/mysql/* &#x6267;&#x884C;Preparing&#x64CD;&#x4F5C; 1$ innobackupex --apply-log /data/backup/2017-07-13_20-05-42/ &#x6062;&#x590D;&#x6570;&#x636E;&#x5E93; 123$ innobackupex --copy-back 2017-07-13_20-05-42/$ cd /var/lib/mysql$ chown -R mysql.mysql ./* &#x542F;&#x52A8;&#x6570;&#x636E;&#x5E93; 12$ systemctl start mariadb.service$ mysql &#x5907;&#x4EFD;&#x540E;&#x751F;&#x6210;&#x7684;&#x4E00;&#x4E9B;&#x6587;&#x4EF6; &#x589E;&#x91CF;&#x5907;&#x4EFD; &#x6570;&#x636E;&#x5E93;(&#x5168;&#x5E93;)&#x589E;&#x91CF;&#x5907;&#x4EFD;&#xFF1A;&#x4EC5;&#x5907;&#x4EFD;&#x81EA;&#x4E0A;&#x4E00;&#x6B21;&#x5B8C;&#x5168;&#x5907;&#x4EFD;&#x6216;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x4EE5;&#x6765;&#x53D8;&#x91CF;&#x7684;&#x90A3;&#x4E9B;&#x6570;&#x636E; &#x5148;&#x505A;&#x4E00;&#x6B21;&#x5168;&#x91CF;&#x5907;&#x4EFD; 1$ innobackupex --user root /data/backup &#x8FDE;&#x63A5;&#x5230;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#xFF0C;&#x5220;&#x9664;/&#x589E;&#x52A0;&#x4E00;&#x4E9B;&#x6570;&#x636E;&#xFF0C;&#x4E3A;&#x4E00;&#x4F1A;&#x505A;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x6253;&#x4E0B;&#x57FA;&#x7840; 12345$ mysql&gt; use hellodb;&gt; DELETE FROM students WHERE StuID=21;&gt; INSERT INTO students (Name,Age,Gender,ClassID,TeacherID) VALUES(&apos;Zhu Ba Jie&apos;,120,&apos;M&apos;,2,3);&gt; exit; &#x7B2C;&#x4E00;&#x6B21;&#x589E;&#x91CF;&#x5907;&#x4EFD; 1$ innobackupex --incremental -u root /data/backup --incremental-basedir=/data/backup/2017-07-13_20-38-20/ &#x518D;&#x6B21;&#x8FDE;&#x63A5;&#x5230;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5220;&#x9664;&#x4FEE;&#x6539;&#x4E00;&#x4E9B;&#x6570;&#x636E;&#xFF0C;&#x518D;&#x505A;&#x7B2C;&#x4E8C;&#x6B21;&#x589E;&#x91CF;&#x5907;&#x4EFD; 1234$ mysql &gt; use hellodb;&gt; DELETE FROM students WHERE StuID=1;&gt; EXIT; &#x7B2C;&#x4E8C;&#x6B21;&#x589E;&#x91CF;&#x5907;&#x4EFD; 12345678910111213141516171819# &#x8FD9;&#x91CC;--incremental-basedir &#x4E3A;&#x4E0A;&#x4E00;&#x6B21;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x800C;&#x975E;&#x5168;&#x91CF;&#x5907;&#x4EFD;&#x7684;&#x76EE;&#x5F55;$ innobackupex -u root --incremental /data/backup --incremental-basedir=/data/backup/2017-07-13_20-47-49# &#x7B2C;&#x4E8C;&#x6B21;&#x589E;&#x91CF;&#x7684;checkpoints$ cat 2017-07-13_20-56-20/xtrabackup_checkpointsbackup_type = incrementalfrom_lsn = 1638999to_lsn = 1640148last_lsn = 1640148compact = 0recover_binlog_info = 0# &#x7B2C;&#x4E00;&#x6B21;&#x589E;&#x91CF;&#x7684;checkpoints$ cat 2017-07-13_20-47-49/xtrabackup_checkpointsbackup_type = incrementalfrom_lsn = 1636913to_lsn = 1638999last_lsn = 1638999compact = 0recover_binlog_info = 0 &#x901A;&#x8FC7;&#x4E24;&#x6B21;&#x589E;&#x91CF;&#x5907;&#x4EFD; + &#x5168;&#x91CF;&#x5907;&#x4EFD; &#x8FDB;&#x884C;&#x6062;&#x590D;&#x6570;&#x636E;&#x5E93;&#x7684;&#x64CD;&#x4F5C; 12345678910111213141516171819202122232425262728293031323334353637383940# &#x5220;&#x5E93;$ cp /var/lib/mysql/mysql_bin.* /data/backup/binlogs$ rm -rf /var/lib/mysql/*1.&#x5408;&#x5E76;&#x589E;&#x91CF;&#x5907;&#x4EFD;(&#x53EA;&#x63D0;&#x4EA4;&#x4E0D;&#x56DE;&#x6EDA;)# &#x53EA;&#x63D0;&#x4EA4;&#x4E0D;&#x56DE;&#x6EDA; &#x5168;&#x91CF;&#x5907;&#x4EFD;$ innobackupex --apply-log --redo-only 2017-07-13_20-38-20/# &#x53EA;&#x63D0;&#x4EA4;&#x4E0D;&#x56DE;&#x6EDA; &#x7B2C;&#x4E00;&#x6B21;&#x589E;&#x91CF;+&#x5168;&#x91CF;$ innobackupex --apply-log --redo-only 2017-07-13_20-38-20 --incremental-dir=2017-07-13_20-47-49# &#x53EA;&#x63D0;&#x4EA4;&#x4E0D;&#x56DE;&#x6EDA; &#x7B2C;&#x4E8C;&#x589E;&#x91CF;+&#x5168;&#x91CF;(&#x7B2C;&#x4E00;&#x6B21;&#x589E;&#x91CF;+&#x5168;&#x91CF;)$ innobackupex --apply-log --redo-only 2017-07-13_20-38-20 --incremental-dir=2017-07-13_20-56-202.&#x5F00;&#x59CB;&#x63D0;&#x4EA4;&#x5E76;&#x56DE;&#x6EDA;$ innobackupex --apply-log 2017-07-13_20-38-20/3.&#x62FF;&#x7740;&#x63D0;&#x4EA4;&#x5E76;&#x56DE;&#x6EDA;&#x540E;&#x7684;&#x5168;&#x91CF;&#xFF0C;&#x8FDB;&#x884C;&#x6062;&#x590D;$ innobackupex --copy-back 2017-07-13_20-38-20/4.&#x67E5;&#x770B;&#x6062;&#x590D;&#x540E;&#x7684;&#x6570;&#x636E;&#x76EE;&#x5F55;$ ll /var/lib/mysql total 40988drwxr-x--- 2 root root 4096 Jul 13 21:17 2017-07-13_20-27-08drwxr-x--- 2 root root 4096 Jul 13 21:17 hellodb-rw-r----- 1 root root 18874368 Jul 13 21:17 ibdata1-rw-r----- 1 root root 5242880 Jul 13 21:17 ib_logfile0-rw-r----- 1 root root 5242880 Jul 13 21:17 ib_logfile1-rw-r----- 1 root root 12582912 Jul 13 21:17 ibtmp1drwxr-x--- 2 root root 4096 Jul 13 21:17 mysqldrwxr-x--- 2 root root 4096 Jul 13 21:17 performance_schemadrwxr-x--- 2 root root 4096 Jul 13 21:17 test-rw-r----- 1 root root 23 Jul 13 21:17 xtrabackup_binlog_pos_innodb-rw-r----- 1 root root 532 Jul 13 21:17 xtrabackup_info5.&#x4FEE;&#x6539;&#x76EE;&#x5F55;&#x6743;&#x9650;$ chown -R mysql.mysql /var/lib/mysql/* &#x7ED3;&#x675F;&#x8BED;: &#x5BF9;&#x4E8E;Mysqldump&#x8DDF;Xtrabakcup&#x7684;&#x4ECB;&#x7ECD;&#x4E0E;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#x5230;&#x6B64;&#x5B8C;&#x6210;&#x3002; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Optimise MySQL Configuration for WordPress]]></title>
    <url>%2FMySQL%2F2017%2F02%2F07%2FOptimise-MySQL-Configuration-for-WordPress.html</url>
    <content type="text"><![CDATA[Document links document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[部署 kubernetes 集群 （三）]]></title>
    <url>%2Funcategorized%2F2017%2F01%2F24%2F%E9%83%A8%E7%BD%B2-kubernetes-%E9%9B%86%E7%BE%A4-%EF%BC%88%E4%B8%89%EF%BC%89.html</url>
    <content type="text"><![CDATA[7.&#x90E8;&#x7F72; Node &#x8282;&#x70B9;kubernetes Node &#x8282;&#x70B9;&#x5305;&#x542B;&#x5982;&#x4E0B;&#x7EC4;&#x4EF6;&#xFF1A; flanneld docker kubelet kube-proxy &#x4F7F;&#x7528;&#x7684;&#x53D8;&#x91CF;&#x672C;&#x6587;&#x6863;&#x7528;&#x5230;&#x7684;&#x53D8;&#x91CF;&#x5B9A;&#x4E49;&#x5982;&#x4E0B;&#xFF1A; 1234567# &#x66FF;&#x6362;&#x4E3A; kubernetes master &#x96C6;&#x7FA4;&#x4EFB;&#x4E00;&#x673A;&#x5668; IPexport MASTER_IP=192.168.77.201export KUBE_APISERVER=&quot;https://${MASTER_IP}:6443&quot;# &#x5F53;&#x524D;&#x90E8;&#x7F72;&#x7684;&#x8282;&#x70B9; IPexport NODE_IP=192.168.77.202# &#x5BFC;&#x5165;&#x7528;&#x5230;&#x7684;&#x5176;&#x5B83;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#xFF1A;ETCD_ENDPOINTS&#x3001;FLANNEL_ETCD_PREFIX&#x3001;CLUSTER_CIDR&#x3001;CLUSTER_DNS_SVC_IP&#x3001;CLUSTER_DNS_DOMAIN&#x3001;SERVICE_CIDRsource /root/local/bin/environment.sh &#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E; flanneld&#x53C2;&#x8003; 05-&#x90E8;&#x7F72;Flannel&#x7F51;&#x7EDC;.md &#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E; docker&#x4E0B;&#x8F7D;&#x6700;&#x65B0;&#x7684; docker &#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#x53C2;&#x8003; Docker1.7&#x811A;&#x672C;&#x5B89;&#x88C5; &#x4FEE;&#x6539; docker &#x7684; systemd unit &#x6587;&#x4EF6;123456789101112131415161718192021222324vim /lib/systemd/system/docker.service[Unit]Description=Docker Application Container EngineDocumentation=https://docs.docker.comAfter=network-online.target firewalld.serviceWants=network-online.target[Service]Type=notifyEnvironmentFile=-/run/flannel/dockerExecStart=/usr/bin/dockerd $DOCKER_NETWORK_OPTIONS --log-level=errorExecReload=/bin/kill -s HUP $MAINPIDLimitNOFILE=infinityLimitNPROC=infinityLimitCORE=infinityTimeoutStartSec=0Delegate=yesKillMode=processRestart=on-failureStartLimitBurst=3StartLimitInterval=60s[Install]WantedBy=multi-user.targe dockerd &#x8FD0;&#x884C;&#x65F6;&#x4F1A;&#x8C03;&#x7528;&#x5176;&#x5B83; docker &#x547D;&#x4EE4;&#xFF0C;&#x5982; docker-proxy&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x5C06; docker &#x547D;&#x4EE4;&#x6240;&#x5728;&#x7684;&#x76EE;&#x5F55;&#x52A0;&#x5230; PATH &#x73AF;&#x5883;&#x53D8;&#x91CF;&#x4E2D;&#xFF1B; flanneld &#x542F;&#x52A8;&#x65F6;&#x5C06;&#x7F51;&#x7EDC;&#x914D;&#x7F6E;&#x5199;&#x5165;&#x5230; /run/flannel/docker &#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x53D8;&#x91CF; DOCKER_NETWORK_OPTIONS&#xFF0C;dockerd &#x547D;&#x4EE4;&#x884C;&#x4E0A;&#x6307;&#x5B9A;&#x8BE5;&#x53D8;&#x91CF;&#x503C;&#x6765;&#x8BBE;&#x7F6E; docker0 &#x7F51;&#x6865;&#x53C2;&#x6570;&#xFF1B; &#x5982;&#x679C;&#x6307;&#x5B9A;&#x4E86;&#x591A;&#x4E2A; EnvironmentFile &#x9009;&#x9879;&#xFF0C;&#x5219;&#x5FC5;&#x987B;&#x5C06; /run/flannel/docker &#x653E;&#x5728;&#x6700;&#x540E;(&#x786E;&#x4FDD; docker0 &#x4F7F;&#x7528; flanneld &#x751F;&#x6210;&#x7684; bip &#x53C2;&#x6570;)&#xFF1B; &#x4E0D;&#x80FD;&#x5173;&#x95ED;&#x9ED8;&#x8BA4;&#x5F00;&#x542F;&#x7684; --iptables &#x548C; --ip-masq &#x9009;&#x9879;&#xFF1B; &#x5982;&#x679C;&#x5185;&#x6838;&#x7248;&#x672C;&#x6BD4;&#x8F83;&#x65B0;&#xFF0C;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528; overlay &#x5B58;&#x50A8;&#x9A71;&#x52A8;&#xFF1B; docker &#x4ECE; 1.13 &#x7248;&#x672C;&#x5F00;&#x59CB;&#xFF0C;&#x53EF;&#x80FD;&#x5C06; iptables FORWARD chain&#x7684;&#x9ED8;&#x8BA4;&#x7B56;&#x7565;&#x8BBE;&#x7F6E;&#x4E3A;DROP&#xFF0C;&#x4ECE;&#x800C;&#x5BFC;&#x81F4; ping &#x5176;&#x5B83; Node &#x4E0A;&#x7684; Pod IP &#x5931;&#x8D25;&#xFF0C;&#x9047;&#x5230;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x624B;&#x52A8;&#x8BBE;&#x7F6E;&#x7B56;&#x7565;&#x4E3A; ACCEPT&#xFF1A; 12$ sudo iptables -P FORWARD ACCEPT$ &#x4E3A;&#x4E86;&#x52A0;&#x5FEB; pull image &#x7684;&#x901F;&#x5EA6;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x56FD;&#x5185;&#x7684;&#x4ED3;&#x5E93;&#x955C;&#x50CF;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x540C;&#x65F6;&#x589E;&#x52A0;&#x4E0B;&#x8F7D;&#x7684;&#x5E76;&#x53D1;&#x6570;&#x3002;(&#x5982;&#x679C; dockerd &#x5DF2;&#x7ECF;&#x8FD0;&#x884C;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x91CD;&#x542F; dockerd &#x751F;&#x6548;&#x3002;) 12345$ cat /etc/docker/daemon.json{ &quot;registry-mirrors&quot;: [&quot;https://docker.mirrors.ustc.edu.cn&quot;, &quot;hub-mirror.c.163.com&quot;], &quot;max-concurrent-downloads&quot;: 10} &#x5B8C;&#x6574; unit &#x89C1; docker.service &#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E; kubeletkubelet &#x542F;&#x52A8;&#x65F6;&#x5411; kube-apiserver &#x53D1;&#x9001; TLS bootstrapping &#x8BF7;&#x6C42;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x5C06; bootstrap token &#x6587;&#x4EF6;&#x4E2D;&#x7684; kubelet-bootstrap &#x7528;&#x6237;&#x8D4B;&#x4E88; system:node-bootstrapper &#x89D2;&#x8272;&#xFF0C;&#x7136;&#x540E; kubelet &#x624D;&#x6709;&#x6743;&#x9650;&#x521B;&#x5EFA;&#x8BA4;&#x8BC1;&#x8BF7;&#x6C42;(certificatesigningrequests)&#xFF1A; 12$ kubectl create clusterrolebinding kubelet-bootstrap --clusterrole=system:node-bootstrapper --user=kubelet-bootstrap$ --user=kubelet-bootstrap &#x662F;&#x6587;&#x4EF6; /etc/kubernetes/token.csv &#x4E2D;&#x6307;&#x5B9A;&#x7684;&#x7528;&#x6237;&#x540D;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x5199;&#x5165;&#x4E86;&#x6587;&#x4EF6; /etc/kubernetes/bootstrap.kubeconfig&#xFF1B; &#x4E0B;&#x8F7D;&#x6700;&#x65B0;&#x7684; kubelet &#x548C; kube-proxy &#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;123456$ wget https://dl.k8s.io/v1.6.2/kubernetes-server-linux-amd64.tar.gz$ tar -xzvf kubernetes-server-linux-amd64.tar.gz$ cd kubernetes$ tar -xzvf kubernetes-src.tar.gz$ sudo cp -r ./server/bin/{kube-proxy,kubelet} /root/local/bin/$ &#x521B;&#x5EFA; kubelet bootstrapping kubeconfig &#x6587;&#x4EF6;1234567891011121314151617181920# &#x8BBE;&#x7F6E;&#x96C6;&#x7FA4;&#x53C2;&#x6570;kubectl config set-cluster kubernetes \ --certificate-authority=/etc/kubernetes/ssl/ca.pem \ --embed-certs=true \ --server=${KUBE_APISERVER} \ --kubeconfig=bootstrap.kubeconfig# &#x8BBE;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;&#x8BA4;&#x8BC1;&#x53C2;&#x6570;kubectl config set-credentials kubelet-bootstrap \ --token=${BOOTSTRAP_TOKEN} \ --kubeconfig=bootstrap.kubeconfig# &#x8BBE;&#x7F6E;&#x4E0A;&#x4E0B;&#x6587;&#x53C2;&#x6570;kubectl config set-context default \ --cluster=kubernetes \ --user=kubelet-bootstrap \ --kubeconfig=bootstrap.kubeconfig# &#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x4E0A;&#x4E0B;&#x6587;kubectl config use-context default --kubeconfig=bootstrap.kubeconfigcp bootstrap.kubeconfig /etc/kubernetes/scp bootstrap.kubeconfig root@node2:/etc/kubernetes/scp bootstrap.kubeconfig root@node3:/etc/kubernetes/ --embed-certs &#x4E3A; true &#x65F6;&#x8868;&#x793A;&#x5C06; certificate-authority &#x8BC1;&#x4E66;&#x5199;&#x5165;&#x5230;&#x751F;&#x6210;&#x7684; bootstrap.kubeconfig &#x6587;&#x4EF6;&#x4E2D;&#xFF1B; &#x8BBE;&#x7F6E; kubelet &#x5BA2;&#x6237;&#x7AEF;&#x8BA4;&#x8BC1;&#x53C2;&#x6570;&#x65F6;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x79D8;&#x94A5;&#x548C;&#x8BC1;&#x4E66;&#xFF0C;&#x540E;&#x7EED;&#x7531; kube-apiserver &#x81EA;&#x52A8;&#x751F;&#x6210;&#xFF1B; &#x751F;&#x6210;&#x7684;bootstrap.kubeconfig&#x6587;&#x4EF6;&#x540C;&#x6B65;&#x5230;&#x96C6;&#x7FA4;node&#x7684;/etc/kubernetes/&#x4E0B; &#x521B;&#x5EFA; kubectl kubeconfig &#x6587;&#x4EF6; 1234567891011121314151617$ export KUBE_APISERVER=&quot;https://192.168.77.201:6443&quot;$ # &#x8BBE;&#x7F6E;&#x96C6;&#x7FA4;&#x53C2;&#x6570;$ kubectl config set-cluster kubernetes \ --certificate-authority=/etc/kubernetes/ssl/ca.pem \ --embed-certs=true \ --server=${KUBE_APISERVER}$ # &#x8BBE;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;&#x8BA4;&#x8BC1;&#x53C2;&#x6570;$ kubectl config set-credentials admin \ --client-certificate=/etc/kubernetes/ssl/admin.pem \ --embed-certs=true \ --client-key=/etc/kubernetes/ssl/admin-key.pem$ # &#x8BBE;&#x7F6E;&#x4E0A;&#x4E0B;&#x6587;&#x53C2;&#x6570;$ kubectl config set-context kubernetes \ --cluster=kubernetes \ --user=admin$ # &#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x4E0A;&#x4E0B;&#x6587;$ kubectl config use-context kubernetes admin.pem &#x8BC1;&#x4E66; OU &#x5B57;&#x6BB5;&#x503C;&#x4E3A; system:masters&#xFF0C;kube-apiserver &#x9884;&#x5B9A;&#x4E49;&#x7684; RoleBinding cluster-admin &#x5C06; Group system:masters &#x4E0E; Role cluster-admin &#x7ED1;&#x5B9A;&#xFF0C;&#x8BE5; Role &#x6388;&#x4E88;&#x4E86;&#x8C03;&#x7528;kube-apiserver &#x76F8;&#x5173; API &#x7684;&#x6743;&#x9650;&#xFF1B; &#x751F;&#x6210;&#x7684; kubeconfig &#x88AB;&#x4FDD;&#x5B58;&#x5230; ~/.kube/config &#x6587;&#x4EF6;&#xFF1B; &#x521B;&#x5EFA; kubelet &#x7684; systemd unit &#x6587;&#x4EF6;1234567891011121314151617181920212223242526272829303132sudo mkdir /var/lib/kubelet # &#x5FC5;&#x987B;&#x5148;&#x521B;&#x5EFA;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;vim kubelet.service [Unit]Description=Kubernetes KubeletDocumentation=https://github.com/GoogleCloudPlatform/kubernetesAfter=docker.serviceRequires=docker.service[Service]WorkingDirectory=/var/lib/kubeletExecStart=/root/local/bin/kubelet \ --address=192.168.77.202 \ --hostname-override=192.168.77.202 \ --pod-infra-container-image=registry.access.redhat.com/rhel7/pod-infrastructure:latest \ --experimental-bootstrap-kubeconfig=/etc/kubernetes/bootstrap.kubeconfig \ --kubeconfig=/etc/kubernetes/kubelet-kubeconfig \ --require-kubeconfig \ --cert-dir=/etc/kubernetes/ssl \ --container-runtime=docker \ --cluster-dns=10.254.0.2 \ --cluster-domain=cluster.local. \ --hairpin-mode promiscuous-bridge \ --allow-privileged=true \ --serialize-image-pulls=false \ --register-node=true \ --logtostderr=true \ --v=2Restart=on-failureRestartSec=5[Install]WantedBy=multi-user.target &#x901A;&#x8FC7; kubelet &#x7684; TLS &#x8BC1;&#x4E66;&#x8BF7;&#x6C42;kubelet &#x9996;&#x6B21;&#x542F;&#x52A8;&#x65F6;&#x5411; kube-apiserver &#x53D1;&#x9001;&#x8BC1;&#x4E66;&#x7B7E;&#x540D;&#x8BF7;&#x6C42;&#xFF0C;&#x5FC5;&#x987B;&#x901A;&#x8FC7;&#x540E; kubernetes &#x7CFB;&#x7EDF;&#x624D;&#x4F1A;&#x5C06;&#x8BE5; Node &#x52A0;&#x5165;&#x5230;&#x96C6;&#x7FA4;&#x3002; &#x67E5;&#x770B;&#x672A;&#x6388;&#x6743;&#x7684; CSR &#x8BF7;&#x6C42;&#xFF1A; 12345678910111213kubectl get csrNAME AGE REQUESTOR CONDITIONcsr-279xz 22m kubelet-bootstrap Pendingcsr-2pt02 19m kubelet-bootstrap Pendingcsr-8z9n7 4m kubelet-bootstrap Pendingcsr-bzwk6 8m kubelet-bootstrap Pendingcsr-h84s6 8m kubelet-bootstrap Pendingcsr-jqpp4 17m kubelet-bootstrap Pendingcsr-k7413 18m kubelet-bootstrap Pendingcsr-qqc03 18m kubelet-bootstrap Pendingcsr-t0dzn 18m kubelet-bootstrap Pendingkubectl get nodesNo resources found. &#x901A;&#x8FC7; CSR &#x8BF7;&#x6C42;&#xFF1A; 12345$ kubectl certificate approve csr-279xzcertificatesigningrequest &quot;csr-279xz&quot; approved$ kubectl get nodesNAME STATUS AGE VERSION10.64.3.7 Ready 49m v1.6.2 &#x81EA;&#x52A8;&#x751F;&#x6210;&#x4E86; kubelet kubeconfig &#x6587;&#x4EF6;&#x548C;&#x516C;&#x79C1;&#x94A5;&#xFF1A; 1234567$ ls -l /etc/kubernetes/kubelet.kubeconfig-rw------- 1 root root 2284 Apr 7 02:07 /etc/kubernetes/kubelet.kubeconfig$ ls -l /etc/kubernetes/ssl/kubelet*-rw-r--r-- 1 root root 1046 Apr 7 02:07 /etc/kubernetes/ssl/kubelet-client.crt-rw------- 1 root root 227 Apr 7 02:04 /etc/kubernetes/ssl/kubelet-client.key-rw-r--r-- 1 root root 1103 Apr 7 02:07 /etc/kubernetes/ssl/kubelet.crt-rw------- 1 root root 1675 Apr 7 02:07 /etc/kubernetes/ssl/kubelet.key &#x914D;&#x7F6E; kube-proxy&#x521B;&#x5EFA; kube-proxy &#x8BC1;&#x4E66;&#x521B;&#x5EFA; kube-proxy &#x8BC1;&#x4E66;&#x7B7E;&#x540D;&#x8BF7;&#x6C42;&#xFF1A; 123456789101112131415161718vim kube-proxy-csr.json{ &quot;CN&quot;: &quot;system:kube-proxy&quot;, &quot;hosts&quot;: [], &quot;key&quot;: { &quot;algo&quot;: &quot;rsa&quot;, &quot;size&quot;: 2048 }, &quot;names&quot;: [ { &quot;C&quot;: &quot;CN&quot;, &quot;ST&quot;: &quot;BeiJing&quot;, &quot;L&quot;: &quot;BeiJing&quot;, &quot;O&quot;: &quot;k8s&quot;, &quot;OU&quot;: &quot;System&quot; } ]} CN &#x6307;&#x5B9A;&#x8BE5;&#x8BC1;&#x4E66;&#x7684; User &#x4E3A; system:kube-proxy&#xFF1B; kube-apiserver &#x9884;&#x5B9A;&#x4E49;&#x7684; RoleBinding system:node-proxier &#x5C06;User system:kube-proxy &#x4E0E; Role system:node-proxier &#x7ED1;&#x5B9A;&#xFF0C;&#x8BE5; Role &#x6388;&#x4E88;&#x4E86;&#x8C03;&#x7528; kube-apiserver Proxy &#x76F8;&#x5173; API &#x7684;&#x6743;&#x9650;&#xFF1B; hosts &#x5C5E;&#x6027;&#x503C;&#x4E3A;&#x7A7A;&#x5217;&#x8868;&#xFF1B; &#x751F;&#x6210; kube-proxy &#x5BA2;&#x6237;&#x7AEF;&#x8BC1;&#x4E66;&#x548C;&#x79C1;&#x94A5;&#xFF1A; 12345678910cfssl gencert -ca=/etc/kubernetes/ssl/ca.pem \ -ca-key=/etc/kubernetes/ssl/ca-key.pem \ -config=/etc/kubernetes/ssl/ca-config.json \ -profile=kubernetes kube-proxy-csr.json | cfssljson -bare kube-proxy$ ls kube-proxy*kube-proxy.csr kube-proxy-csr.json kube-proxy-key.pem kube-proxy.pemcp kube-proxy*.pem /etc/kubernetes/ssl/scp kube-proxy*.pem root@node2/etc/kubernetes/ssl/scp kube-proxy*.pem root@node3/etc/kubernetes/ssl/$ &#x521B;&#x5EFA; kube-proxy kubeconfig &#x6587;&#x4EF6;1234567891011121314151617181920$ # &#x8BBE;&#x7F6E;&#x96C6;&#x7FA4;&#x53C2;&#x6570;$ kubectl config set-cluster kubernetes \ --certificate-authority=/etc/kubernetes/ssl/ca.pem \ --embed-certs=true \ --server=${KUBE_APISERVER} \ --kubeconfig=kube-proxy.kubeconfig$ # &#x8BBE;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;&#x8BA4;&#x8BC1;&#x53C2;&#x6570;$ kubectl config set-credentials kube-proxy \ --client-certificate=/etc/kubernetes/ssl/kube-proxy.pem \ --client-key=/etc/kubernetes/ssl/kube-proxy-key.pem \ --embed-certs=true \ --kubeconfig=kube-proxy.kubeconfig$ # &#x8BBE;&#x7F6E;&#x4E0A;&#x4E0B;&#x6587;&#x53C2;&#x6570;$ kubectl config set-context default \ --cluster=kubernetes \ --user=kube-proxy \ --kubeconfig=kube-proxy.kubeconfig$ # &#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x4E0A;&#x4E0B;&#x6587;$ kubectl config use-context default --kubeconfig=kube-proxy.kubeconfig$ mv kube-proxy.kubeconfig /etc/kubernetes/ &#x8BBE;&#x7F6E;&#x96C6;&#x7FA4;&#x53C2;&#x6570;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x8BA4;&#x8BC1;&#x53C2;&#x6570;&#x65F6; --embed-certs &#x90FD;&#x4E3A; true&#xFF0C;&#x8FD9;&#x4F1A;&#x5C06; certificate-authority&#x3001;client-certificate &#x548C; client-key &#x6307;&#x5411;&#x7684;&#x8BC1;&#x4E66;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5199;&#x5165;&#x5230;&#x751F;&#x6210;&#x7684; kube-proxy.kubeconfig &#x6587;&#x4EF6;&#x4E2D;&#xFF1B; kube-proxy.pem &#x8BC1;&#x4E66;&#x4E2D; CN &#x4E3A; system:kube-proxy&#xFF0C;kube-apiserver &#x9884;&#x5B9A;&#x4E49;&#x7684; RoleBinding cluster-admin &#x5C06;User system:kube-proxy &#x4E0E; Role system:node-proxier &#x7ED1;&#x5B9A;&#xFF0C;&#x8BE5; Role &#x6388;&#x4E88;&#x4E86;&#x8C03;&#x7528; kube-apiserver Proxy &#x76F8;&#x5173; API &#x7684;&#x6743;&#x9650;&#xFF1B; &#x521B;&#x5EFA; kube-proxy &#x7684; systemd unit &#x6587;&#x4EF6;123456789101112131415161718192021$ sudo mkdir -p /var/lib/kube-proxy # &#x5FC5;&#x987B;&#x5148;&#x521B;&#x5EFA;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;vim kube-proxy.service [Unit]Description=Kubernetes Kube-Proxy ServerDocumentation=https://github.com/GoogleCloudPlatform/kubernetesAfter=network.target[Service]ExecStart=/root/local/bin/kube-proxy \ --bind-address=192.168.77.201 \ --cluster-cidr=10.254.0.0/16 \ --hostname-override=192.168.77.201 \ --kubeconfig=/etc/kubernetes/kube-proxy.kubeconfig \ --logtostderr=true \ --v=2Restart=on-failureRestartSec=5LimitNOFILE=65536[Install]WantedBy=multi-user.target --hostname-override &#x53C2;&#x6570;&#x503C;&#x5FC5;&#x987B;&#x4E0E; kubelet &#x7684;&#x503C;&#x4E00;&#x81F4;&#xFF0C;&#x5426;&#x5219; kube-proxy &#x542F;&#x52A8;&#x540E;&#x4F1A;&#x627E;&#x4E0D;&#x5230;&#x8BE5; Node&#xFF0C;&#x4ECE;&#x800C;&#x4E0D;&#x4F1A;&#x521B;&#x5EFA;&#x4EFB;&#x4F55; iptables &#x89C4;&#x5219;&#xFF1B; --cluster-cidr &#x5FC5;&#x987B;&#x4E0E; kube-apiserver &#x7684; --service-cluster-ip-range &#x9009;&#x9879;&#x503C;&#x4E00;&#x81F4;&#xFF1B; kube-proxy &#x6839;&#x636E; --cluster-cidr &#x5224;&#x65AD;&#x96C6;&#x7FA4;&#x5185;&#x90E8;&#x548C;&#x5916;&#x90E8;&#x6D41;&#x91CF;&#xFF0C;&#x6307;&#x5B9A; --cluster-cidr &#x6216; --masquerade-all &#x9009;&#x9879;&#x540E; kube-proxy &#x624D;&#x4F1A;&#x5BF9;&#x8BBF;&#x95EE; Service IP &#x7684;&#x8BF7;&#x6C42;&#x505A; SNAT&#xFF1B; --kubeconfig &#x6307;&#x5B9A;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5D4C;&#x5165;&#x4E86; kube-apiserver &#x7684;&#x5730;&#x5740;&#x3001;&#x7528;&#x6237;&#x540D;&#x3001;&#x8BC1;&#x4E66;&#x3001;&#x79D8;&#x94A5;&#x7B49;&#x8BF7;&#x6C42;&#x548C;&#x8BA4;&#x8BC1;&#x4FE1;&#x606F;&#xFF1B; &#x9884;&#x5B9A;&#x4E49;&#x7684; RoleBinding cluster-admin &#x5C06;User system:kube-proxy &#x4E0E; Role system:node-proxier &#x7ED1;&#x5B9A;&#xFF0C;&#x8BE5; Role &#x6388;&#x4E88;&#x4E86;&#x8C03;&#x7528; kube-apiserver Proxy &#x76F8;&#x5173; API &#x7684;&#x6743;&#x9650;&#xFF1B; &#x5B8C;&#x6574; unit &#x89C1; kube-proxy.service &#x542F;&#x52A8; kube-proxy12345sudo cp kube-proxy.service /etc/systemd/system/sudo systemctl daemon-reloadsudo systemctl enable kube-proxysudo systemctl start kube-proxysystemctl status kube-proxy document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[centos一键安装l2tp]]></title>
    <url>%2Funcategorized%2F2017%2F01%2F24%2Fcentos%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85l2tp.html</url>
    <content type="text"><![CDATA[&#x4E0B;&#x8F7D;&#x811A;&#x672C;wget --no-check-certificate https://raw.githubusercontent.com/teddysun/across/master/l2tp.sh &#x6267;&#x884C;&#x5B89;&#x88C5; chmod +x l2tp.sh &#x9ED8;&#x8BA4;&#x5373;&#x53EF;&#xFF0C;&#x5728;PSK&#x8DDF;user&#x4E0E;password&#x5904;&#x6DFB;&#x52A0;&#x81EA;&#x5DF1;&#x7684;&#x7528;&#x6237;&#x540D;&#x5BC6;&#x7801; &#x53E6;&#x5916;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x73B0;&#x4E0A;&#x4E0D;&#x4E86;&#x7F51;&#x7684;&#x539F;&#x56E0;&#x662F;iptables&#x89C4;&#x5219;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4FEE;&#x6539;/etc/sysconfig/iptables &#x628A;-A POSTROUTING -s 192.168.18.0/24 -j SNAT &#x2013;to-source 52.80.74.49&#x66FF;&#x6362;&#x4E3A;-A POSTROUTING -s 192.168.18.0/24 -o eth0 -j MASQUERADE&#x5373;&#x53EF; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[部署 kubernetes 集群 （二）]]></title>
    <url>%2Funcategorized%2F2017%2F01%2F23%2F%E9%83%A8%E7%BD%B2-kubernetes-%E9%9B%86%E7%BE%A4-%EF%BC%88%E4%BA%8C%EF%BC%89.html</url>
    <content type="text"><![CDATA[5.&#x90E8;&#x7F72; Flannel &#x7F51;&#x7EDC;kubernetes &#x8981;&#x6C42;&#x96C6;&#x7FA4;&#x5185;&#x5404;&#x8282;&#x70B9;&#x80FD;&#x901A;&#x8FC7; Pod &#x7F51;&#x6BB5;&#x4E92;&#x8054;&#x4E92;&#x901A;&#xFF0C;&#x672C;&#x6587;&#x6863;&#x4ECB;&#x7ECD;&#x4F7F;&#x7528; Flannel &#x5728;&#x6240;&#x6709;&#x8282;&#x70B9; (Master&#x3001;Node) &#x4E0A;&#x521B;&#x5EFA;&#x4E92;&#x8054;&#x4E92;&#x901A;&#x7684; Pod &#x7F51;&#x6BB5;&#x7684;&#x6B65;&#x9AA4;&#x3002; &#x4F7F;&#x7528;&#x7684;&#x53D8;&#x91CF;&#x672C;&#x6587;&#x6863;&#x7528;&#x5230;&#x7684;&#x53D8;&#x91CF;&#x5B9A;&#x4E49;&#x5982;&#x4E0B;&#xFF1A; 123export NODE_IP=192.168.77.201 # &#x5F53;&#x524D;&#x90E8;&#x7F72;&#x8282;&#x70B9;&#x7684; IP# &#x5BFC;&#x5165;&#x7528;&#x5230;&#x7684;&#x5176;&#x5B83;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#xFF1A;ETCD_ENDPOINTS&#x3001;FLANNEL_ETCD_PREFIX&#x3001;CLUSTER_CIDRsource /root/local/bin/environment.sh &#x521B;&#x5EFA; TLS &#x79D8;&#x94A5;&#x548C;&#x8BC1;&#x4E66;etcd &#x96C6;&#x7FA4;&#x542F;&#x7528;&#x4E86;&#x53CC;&#x5411; TLS &#x8BA4;&#x8BC1;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x4E3A; flanneld &#x6307;&#x5B9A;&#x4E0E; etcd &#x96C6;&#x7FA4;&#x901A;&#x4FE1;&#x7684; CA &#x548C;&#x79D8;&#x94A5;&#x3002; &#x521B;&#x5EFA; flanneld &#x8BC1;&#x4E66;&#x7B7E;&#x540D;&#x8BF7;&#x6C42;&#xFF1A; 123456789101112131415161718vim flanneld-csr.json { &quot;CN&quot;: &quot;flanneld&quot;, &quot;hosts&quot;: [], &quot;key&quot;: { &quot;algo&quot;: &quot;rsa&quot;, &quot;size&quot;: 2048 }, &quot;names&quot;: [ { &quot;C&quot;: &quot;CN&quot;, &quot;ST&quot;: &quot;BeiJing&quot;, &quot;L&quot;: &quot;BeiJing&quot;, &quot;O&quot;: &quot;k8s&quot;, &quot;OU&quot;: &quot;System&quot; } ]} hosts &#x5B57;&#x6BB5;&#x4E3A;&#x7A7A;&#xFF1B; &#x751F;&#x6210; flanneld &#x8BC1;&#x4E66;&#x548C;&#x79C1;&#x94A5;&#xFF1A; 123456789cfssl gencert -ca=/etc/kubernetes/ssl/ca.pem \ -ca-key=/etc/kubernetes/ssl/ca-key.pem \ -config=/etc/kubernetes/ssl/ca-config.json \ -profile=kubernetes flanneld-csr.json | cfssljson -bare flanneldls flanneld*flanneld.csr flanneld-csr.json flanneld-key.pem flanneld.pemsudo mkdir -p /etc/flanneld/sslsudo mv flanneld*.pem /etc/flanneld/sslrm flanneld.csr flanneld-csr.json &#x5411; etcd &#x5199;&#x5165;&#x96C6;&#x7FA4; Pod &#x7F51;&#x6BB5;&#x4FE1;&#x606F;&#x6CE8;&#x610F;&#xFF1A;&#x672C;&#x6B65;&#x9AA4;&#x53EA;&#x9700;&#x5728;&#x7B2C;&#x4E00;&#x6B21;&#x90E8;&#x7F72; Flannel &#x7F51;&#x7EDC;&#x65F6;&#x6267;&#x884C;&#xFF0C;&#x540E;&#x7EED;&#x5728;&#x5176;&#x5B83;&#x8282;&#x70B9;&#x4E0A;&#x90E8;&#x7F72; Flannel &#x65F6;&#x65E0;&#x9700;&#x518D;&#x5199;&#x5165;&#x8BE5;&#x4FE1;&#x606F;&#xFF01;&#x8C03;&#x6574;etcdctlapi&#x914D;&#x7F6E;&#x4F7F;&#x7528;export ETCDCTL_API=2etcd2&#x7684;&#x914D;&#x7F6E;&#x5199;&#x6CD5;123456$ /root/local/bin/etcdctl \ --endpoints=${ETCD_ENDPOINTS} \ --ca-file=/etc/kubernetes/ssl/ca.pem \ --cert-file=/etc/flanneld/ssl/flanneld.pem \ --key-file=/etc/flanneld/ssl/flanneld-key.pem \ set ${FLANNEL_ETCD_PREFIX}/config &apos;{&quot;Network&quot;:&quot;&apos;${CLUSTER_CIDR}&apos;&quot;, &quot;SubnetLen&quot;: 24, &quot;Backend&quot;: {&quot;Type&quot;: &quot;vxlan&quot;}}&apos; etcd3&#x7684;&#x914D;&#x7F6E;&#x5199;&#x6CD5;123456/root/local/bin/etcdctl \ --endpoints=${ETCD_ENDPOINTS} \ --cacert=/etc/kubernetes/ssl/ca.pem \ --cert=/etc/flanneld/ssl/flanneld.pem \ --key=/etc/flanneld/ssl/flanneld-key.pem \ put ${FLANNEL_ETCD_PREFIX}/config &apos;{&quot;Network&quot;:&quot;&apos;${CLUSTER_CIDR}&apos;&quot;, &quot;SubnetLen&quot;: 24, &quot;Backend&quot;: {&quot;Type&quot;: &quot;vxlan&quot;}}&apos; flanneld &#x76EE;&#x524D;&#x7248;&#x672C; (v0.7.1) &#x4E0D;&#x652F;&#x6301; etcd v3&#xFF0C;&#x6545;&#x4F7F;&#x7528; etcd v2 API &#x5199;&#x5165;&#x914D;&#x7F6E; key &#x548C;&#x7F51;&#x6BB5;&#x6570;&#x636E;&#xFF1B; &#x5199;&#x5165;&#x7684; Pod &#x7F51;&#x6BB5;(${CLUSTER_CIDR}&#xFF0C;172.30.0.0/16) &#x5FC5;&#x987B;&#x4E0E; kube-controller-manager &#x7684; --cluster-cidr &#x9009;&#x9879;&#x503C;&#x4E00;&#x81F4;&#xFF1B; &#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;-flanneld&#x4E0B;&#x8F7D; flanneld123456$ mkdir flannel$ wget https://github.com/coreos/flannel/releases/download/v0.7.1/flannel-v0.7.1-linux-amd64.tar.gz$ tar -xzvf flannel-v0.7.1-linux-amd64.tar.gz -C flannelcp flannel/{flanneld,mk-docker-opts.sh} /root/local/binscp flannel/{flanneld,mk-docker-opts.sh} root@node2:/root/local/binscp flannel/{flanneld,mk-docker-opts.sh} root@node3:/root/local/bin &#x521B;&#x5EFA; flanneld &#x7684; systemd unit &#x6587;&#x4EF6;1234567891011121314151617181920212223vim flanneld.service [Unit]Description=Flanneld overlay address etcd agentAfter=network.targetAfter=network-online.targetWants=network-online.targetAfter=etcd.serviceBefore=docker.service[Service]Type=notifyExecStart=/root/local/bin/flanneld \ -etcd-cafile=/etc/kubernetes/ssl/ca.pem \ -etcd-certfile=/etc/flanneld/ssl/flanneld.pem \ -etcd-keyfile=/etc/flanneld/ssl/flanneld-key.pem \ -etcd-endpoints=https://192.168.77.201:2379,https://192.168.77.201:2379,https://192.168.77.201:2379 \ -etcd-prefix=/kubernetes/networkExecStartPost=/root/local/bin/mk-docker-opts.sh -k DOCKER_NETWORK_OPTIONS -d /run/flannel/dockerRestart=on-failure[Install]WantedBy=multi-user.targetRequiredBy=docker.service mk-docker-opts.sh &#x811A;&#x672C;&#x5C06;&#x5206;&#x914D;&#x7ED9; flanneld &#x7684; Pod &#x5B50;&#x7F51;&#x7F51;&#x6BB5;&#x4FE1;&#x606F;&#x5199;&#x5165;&#x5230; /run/flannel/docker &#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x540E;&#x7EED; docker &#x542F;&#x52A8;&#x65F6;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;&#x53C2;&#x6570;&#x503C;&#x8BBE;&#x7F6E; docker0 &#x7F51;&#x6865;&#xFF1B; flanneld &#x4F7F;&#x7528;&#x7CFB;&#x7EDF;&#x7F3A;&#x7701;&#x8DEF;&#x7531;&#x6240;&#x5728;&#x7684;&#x63A5;&#x53E3;&#x548C;&#x5176;&#x5B83;&#x8282;&#x70B9;&#x901A;&#x4FE1;&#xFF0C;&#x5BF9;&#x4E8E;&#x6709;&#x591A;&#x4E2A;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x7684;&#x673A;&#x5668;&#xFF08;&#x5982;&#xFF0C;&#x5185;&#x7F51;&#x548C;&#x516C;&#x7F51;&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;&#x7528; -iface &#x9009;&#x9879;&#x503C;&#x6307;&#x5B9A;&#x901A;&#x4FE1;&#x63A5;&#x53E3;(&#x4E0A;&#x9762;&#x7684; systemd unit &#x6587;&#x4EF6;&#x6CA1;&#x6307;&#x5B9A;&#x8FD9;&#x4E2A;&#x9009;&#x9879;)&#xFF1B; &#x6B64;&#x811A;&#x672C;&#x90E8;&#x7F72;&#x5404;&#x4E2A;&#x8282;&#x70B9;&#x4E0A;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x505A;&#x4EFB;&#x4F55;&#x4FEE;&#x6539;&#x5B8C;&#x6574; unit &#x89C1; flanneld.service &#x542F;&#x52A8; flanneld12345cp flanneld.service /etc/systemd/system/systemctl daemon-reloadsystemctl enable flanneldsystemctl start flanneldsystemctl status flanneld &#x68C0;&#x67E5; flanneld &#x670D;&#x52A1;12journalctl -u flanneld |grep &apos;Lease acquired&apos;ifconfig flannel.1 &#x68C0;&#x67E5;&#x5206;&#x914D;&#x7ED9;&#x5404; flanneld &#x7684; Pod &#x7F51;&#x6BB5;&#x4FE1;&#x606F;12345678910111213141516171819202122232425262728# &#x67E5;&#x770B;&#x96C6;&#x7FA4; Pod &#x7F51;&#x6BB5;(/16)/root/local/bin/etcdctl \ --endpoints=${ETCD_ENDPOINTS} \ --ca-file=/etc/kubernetes/ssl/ca.pem \ --cert-file=/etc/flanneld/ssl/flanneld.pem \ --key-file=/etc/flanneld/ssl/flanneld-key.pem \ get ${FLANNEL_ETCD_PREFIX}/config{&quot;Network&quot;:&quot;172.30.0.0/16&quot;, &quot;SubnetLen&quot;: 24, &quot;Backend&quot;: {&quot;Type&quot;: &quot;vxlan&quot;}}# &#x67E5;&#x770B;&#x5DF2;&#x5206;&#x914D;&#x7684; Pod &#x5B50;&#x7F51;&#x6BB5;&#x5217;&#x8868;(/24)/root/local/bin/etcdctl \ --endpoints=${ETCD_ENDPOINTS} \ --ca-file=/etc/kubernetes/ssl/ca.pem \ --cert-file=/etc/flanneld/ssl/flanneld.pem \ --key-file=/etc/flanneld/ssl/flanneld-key.pem \ ls ${FLANNEL_ETCD_PREFIX}/subnets2017-07-07 10:35:02.135669 I | warning: ignoring ServerName for user-provided CA for backwards compatibility is deprecated/kubernetes/network/subnets/172.30.15.0-24/kubernetes/network/subnets/172.30.18.0-24/kubernetes/network/subnets/172.30.98.0-24# &#x67E5;&#x770B;&#x67D0;&#x4E00; Pod &#x7F51;&#x6BB5;&#x5BF9;&#x5E94;&#x7684; flanneld &#x8FDB;&#x7A0B;&#x76D1;&#x542C;&#x7684; IP &#x548C;&#x7F51;&#x7EDC;&#x53C2;&#x6570;/root/local/bin/etcdctl \ --endpoints=${ETCD_ENDPOINTS} \ --ca-file=/etc/kubernetes/ssl/ca.pem \ --cert-file=/etc/flanneld/ssl/flanneld.pem \ --key-file=/etc/flanneld/ssl/flanneld-key.pem \ get ${FLANNEL_ETCD_PREFIX}/subnets/172.30.19.0-242017-07-07 10:36:03.807463 I | warning: ignoring ServerName for user-provided CA for backwards compatibility is deprecated{&quot;PublicIP&quot;:&quot;192.168.77.201&quot;,&quot;BackendType&quot;:&quot;vxlan&quot;,&quot;BackendData&quot;:{&quot;VtepMAC&quot;:&quot;86:82:7c:7b:57:06&quot;}} &#x786E;&#x4FDD;&#x5404;&#x8282;&#x70B9;&#x95F4; Pod &#x7F51;&#x6BB5;&#x80FD;&#x4E92;&#x8054;&#x4E92;&#x901A;&#x5728;&#x5404;&#x8282;&#x70B9;&#x4E0A;&#x90E8;&#x7F72;&#x5B8C; Flannel &#x540E;&#xFF0C;&#x67E5;&#x770B;&#x5DF2;&#x5206;&#x914D;&#x7684; Pod &#x5B50;&#x7F51;&#x6BB5;&#x5217;&#x8868;(/24) 12345678910/root/local/bin/etcdctl \ --endpoints=${ETCD_ENDPOINTS} \ --ca-file=/etc/kubernetes/ssl/ca.pem \ --cert-file=/etc/flanneld/ssl/flanneld.pem \ --key-file=/etc/flanneld/ssl/flanneld-key.pem \ ls ${FLANNEL_ETCD_PREFIX}/subnets2017-07-07 10:36:32.737215 I | warning: ignoring ServerName for user-provided CA for backwards compatibility is deprecated/kubernetes/network/subnets/172.30.15.0-24/kubernetes/network/subnets/172.30.18.0-24/kubernetes/network/subnets/172.30.98.0-24 &#x4FEE;&#x6539;Docker&#x53C2;&#x6570;[&#x6240;&#x6709;&#x8282;&#x70B9;&#x4FEE;&#x6539;&#x4E00;&#x4E0B;&#xFF0C;&#x4F5C;&#x4E3A;&#x6D4B;&#x8BD5;]123456# &#x8981;&#x50CF;&#x4F7F;docker&#x4F7F;&#x7528;flannel&#x7684;&#x7F51;&#x7EDC;&#x4F20;&#x9012;&#x6570;&#x636E;&#xFF0C;&#x8981;&#x4FEE;&#x6539;&#x4E00;&#x4E9B;&#x542F;&#x52A8;&#x53C2;&#x6570;cd /opt/flannel/mk-docker-opts.sh -i# &#x901A;&#x8FC7;mk-docker-opts.sh --help&#x53EF;&#x4E00;&#x76F4;&#x5230;&#x8FD9;&#x4E2A;&#x811A;&#x672C;&#x4F1A;&#x751F;&#x6210;&#x4E00;&#x4E9B;docker&#x53C2;&#x6570;&#xFF0C;&#x653E;&#x5230;/run/docker_opts.env&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x5C06;&#x8FD9;&#x4E9B;&#x53C2;&#x6570;&#xFF0C;&#x52A0;&#x5165;&#x5230;docker&#x7684;&#x542F;&#x52A8;&#x53C2;&#x6570;cat /etc/sysconfig/docker | grep OPTOPTIONS=&apos;--selinux-enabled --bip=172.17.71.1/24 --ip-masq=true --mtu=1450&apos; &#x5F53;&#x524D;&#x4E09;&#x4E2A;&#x8282;&#x70B9;&#x5206;&#x914D;&#x7684; Pod &#x7F51;&#x6BB5;&#x5206;&#x522B;&#x662F;&#xFF1A;172.30.71.0-24&#x3001;172.30.36.0-24&#x3001;172.30.99.0-24&#x3002; &#x5728;&#x5404;&#x8282;&#x70B9;&#x4E0A;&#x5206;&#x914D; ping &#x8FD9;&#x4E09;&#x4E2A;&#x7F51;&#x6BB5;&#x7684;&#x7F51;&#x5173;&#x5730;&#x5740;&#xFF0C;&#x786E;&#x4FDD;&#x80FD;&#x901A;&#xFF1A; 123$ ping 172.30.71.1$ ping 172.30.36.1$ ping 172.30.98.1 6.&#x90E8;&#x7F72; master &#x8282;&#x70B9;kubernetes master &#x8282;&#x70B9;&#x5305;&#x542B;&#x7684;&#x7EC4;&#x4EF6;&#xFF1A; kube-apiserver kube-scheduler kube-controller-manager &#x76EE;&#x524D;&#x8FD9;&#x4E09;&#x4E2A;&#x7EC4;&#x4EF6;&#x9700;&#x8981;&#x90E8;&#x7F72;&#x5728;&#x540C;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#xFF1A; kube-scheduler&#x3001;kube-controller-manager &#x548C; kube-apiserver &#x4E09;&#x8005;&#x7684;&#x529F;&#x80FD;&#x7D27;&#x5BC6;&#x76F8;&#x5173;&#xFF1B; &#x540C;&#x65F6;&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4E2A; kube-scheduler&#x3001;kube-controller-manager &#x8FDB;&#x7A0B;&#x5904;&#x4E8E;&#x5DE5;&#x4F5C;&#x72B6;&#x6001;&#xFF0C;&#x5982;&#x679C;&#x8FD0;&#x884C;&#x591A;&#x4E2A;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x9009;&#x4E3E;&#x4EA7;&#x751F;&#x4E00;&#x4E2A; leader&#xFF1B; &#x672C;&#x6587;&#x6863;&#x4ECB;&#x7ECD;&#x90E8;&#x7F72;&#x5355;&#x673A; kubernetes master &#x8282;&#x70B9;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#x9AD8;&#x53EF;&#x7528; master &#x96C6;&#x7FA4;&#x3002; &#x8BA1;&#x5212;&#x540E;&#x7EED;&#x518D;&#x4ECB;&#x7ECD;&#x90E8;&#x7F72; LB &#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF; (kubectl&#x3001;kubelet&#x3001;kube-proxy) &#x4F7F;&#x7528; LB &#x7684; VIP &#x6765;&#x8BBF;&#x95EE; kube-apiserver&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x9AD8;&#x53EF;&#x7528; master &#x96C6;&#x7FA4;&#x3002; master &#x8282;&#x70B9;&#x4E0E; node &#x8282;&#x70B9;&#x4E0A;&#x7684; Pods &#x901A;&#x8FC7; Pod &#x7F51;&#x7EDC;&#x901A;&#x4FE1;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x5728; master &#x8282;&#x70B9;&#x4E0A;&#x90E8;&#x7F72; Flannel &#x7F51;&#x7EDC;&#x3002; &#x4F7F;&#x7528;&#x7684;&#x53D8;&#x91CF;&#x672C;&#x6587;&#x6863;&#x7528;&#x5230;&#x7684;&#x53D8;&#x91CF;&#x5B9A;&#x4E49;&#x5982;&#x4E0B;&#xFF1A; 123export MASTER_IP=192.168.77.201 # &#x66FF;&#x6362;&#x4E3A;&#x5F53;&#x524D;&#x90E8;&#x7F72;&#x7684; master &#x673A;&#x5668; IP# &#x5BFC;&#x5165;&#x7528;&#x5230;&#x7684;&#x5176;&#x5B83;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#xFF1A;SERVICE_CIDR&#x3001;CLUSTER_CIDR&#x3001;NODE_PORT_RANGE&#x3001;ETCD_ENDPOINTS&#x3001;BOOTSTRAP_TOKENsource /root/local/bin/environment.sh &#x4E0B;&#x8F7D;&#x6700;&#x65B0;&#x7248;&#x672C;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#x6709;&#x4E24;&#x79CD;&#x4E0B;&#x8F7D;&#x65B9;&#x5F0F;&#xFF1A; 1.&#x4ECE; github release &#x9875;&#x9762; &#x4E0B;&#x8F7D;&#x53D1;&#x5E03;&#x7248; tarball&#xFF0C;&#x89E3;&#x538B;&#x540E;&#x518D;&#x6267;&#x884C;&#x4E0B;&#x8F7D;&#x811A;&#x672C; 12345wget https://github.com/kubernetes/kubernetes/releases/download/v1.6.2/kubernetes.tar.gztar -xzvf kubernetes.tar.gz...cd kubernetes./cluster/get-kube-binaries.sh 2.&#x4ECE; CHANGELOG&#x9875;&#x9762; &#x4E0B;&#x8F7D; client &#x6216; server tarball &#x6587;&#x4EF6;server &#x7684; tarball kubernetes-server-linux-amd64.tar.gz &#x5DF2;&#x7ECF;&#x5305;&#x542B;&#x4E86; client(kubectl) &#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x7528;&#x5355;&#x72EC;&#x4E0B;&#x8F7D;kubernetes-client-linux-amd64.tar.gz&#x6587;&#x4EF6;&#xFF1B;123456# wget https://dl.k8s.io/v1.6.2/kubernetes-client-linux-amd64.tar.gzwget https://dl.k8s.io/v1.6.2/kubernetes-server-linux-amd64.tar.gztar -xzvf kubernetes-server-linux-amd64.tar.gz...cd kubernetestar -xzvf kubernetes-src.tar.gz &#x5C06;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#x62F7;&#x8D1D;&#x5230;&#x6307;&#x5B9A;&#x8DEF;&#x5F84;&#xFF1A; 1cp -r server/bin/{kube-apiserver,kube-controller-manager,kube-scheduler,kubectl,kube-proxy,kubelet} /root/local/bin/ &#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E; flanneld&#x53C2;&#x8003; 05-&#x90E8;&#x7F72;Flannel&#x7F51;&#x7EDC;.md &#x521B;&#x5EFA; kubernetes &#x8BC1;&#x4E66;&#x521B;&#x5EFA; kubernetes &#x8BC1;&#x4E66;&#x7B7E;&#x540D;&#x8BF7;&#x6C42; 123456789101112131415161718192021222324252627vim kubernetes-csr.json { &quot;CN&quot;: &quot;kubernetes&quot;, &quot;hosts&quot;: [ &quot;127.0.0.1&quot;, &quot;192.168.77.201&quot;, &quot;10.254.0.1&quot;, &quot;kubernetes&quot;, &quot;kubernetes.default&quot;, &quot;kubernetes.default.svc&quot;, &quot;kubernetes.default.svc.cluster&quot;, &quot;kubernetes.default.svc.cluster.local&quot; ], &quot;key&quot;: { &quot;algo&quot;: &quot;rsa&quot;, &quot;size&quot;: 2048 }, &quot;names&quot;: [ { &quot;C&quot;: &quot;CN&quot;, &quot;ST&quot;: &quot;BeiJing&quot;, &quot;L&quot;: &quot;BeiJing&quot;, &quot;O&quot;: &quot;k8s&quot;, &quot;OU&quot;: &quot;System&quot; } ]} &#x5982;&#x679C; hosts &#x5B57;&#x6BB5;&#x4E0D;&#x4E3A;&#x7A7A;&#x5219;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x6388;&#x6743;&#x4F7F;&#x7528;&#x8BE5;&#x8BC1;&#x4E66;&#x7684; IP &#x6216;&#x57DF;&#x540D;&#x5217;&#x8868;&#xFF0C;&#x6240;&#x4EE5;&#x4E0A;&#x9762;&#x5206;&#x522B;&#x6307;&#x5B9A;&#x4E86;&#x5F53;&#x524D;&#x90E8;&#x7F72;&#x7684; master &#x8282;&#x70B9;&#x4E3B;&#x673A; IP&#xFF1B; &#x8FD8;&#x9700;&#x8981;&#x6DFB;&#x52A0; kube-apiserver &#x6CE8;&#x518C;&#x7684;&#x540D;&#x4E3A; kubernetes &#x7684;&#x670D;&#x52A1; IP (Service Cluster IP)&#xFF0C;&#x4E00;&#x822C;&#x662F; kube-apiserver --service-cluster-ip-range &#x9009;&#x9879;&#x503C;&#x6307;&#x5B9A;&#x7684;&#x7F51;&#x6BB5;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;IP&#xFF0C;&#x5982; &#x201C;10.254.0.1&#x201D;&#xFF1B; &#x751F;&#x6210; kubernetes &#x8BC1;&#x4E66;&#x548C;&#x79C1;&#x94A5; 123456789cfssl gencert -ca=/etc/kubernetes/ssl/ca.pem \ -ca-key=/etc/kubernetes/ssl/ca-key.pem \ -config=/etc/kubernetes/ssl/ca-config.json \ -profile=kubernetes kubernetes-csr.json | cfssljson -bare kubernetesls kubernetes*kubernetes.csr kubernetes-csr.json kubernetes-key.pem kubernetes.pemmkdir -p /etc/kubernetes/ssl/cp kubernetes*.pem /etc/kubernetes/ssl/$ rm kubernetes.csr kubernetes-csr.json &#x914D;&#x7F6E;&#x548C;&#x542F;&#x52A8; kube-apiserver&#x521B;&#x5EFA; kube-apiserver &#x4F7F;&#x7528;&#x7684;&#x5BA2;&#x6237;&#x7AEF; token &#x6587;&#x4EF6;kubelet &#x9996;&#x6B21;&#x542F;&#x52A8;&#x65F6;&#x5411; kube-apiserver &#x53D1;&#x9001; TLS Bootstrapping &#x8BF7;&#x6C42;&#xFF0C;kube-apiserver &#x9A8C;&#x8BC1; kubelet &#x8BF7;&#x6C42;&#x4E2D;&#x7684; token &#x662F;&#x5426;&#x4E0E;&#x5B83;&#x914D;&#x7F6E;&#x7684; token.csv &#x4E00;&#x81F4;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x81F4;&#x5219;&#x81EA;&#x52A8;&#x4E3A; kubelet&#x751F;&#x6210;&#x8BC1;&#x4E66;&#x548C;&#x79D8;&#x94A5;&#x3002; 1234# &#x5BFC;&#x5165;&#x7684; environment.sh &#x6587;&#x4EF6;&#x5B9A;&#x4E49;&#x4E86; BOOTSTRAP_TOKEN &#x53D8;&#x91CF;vim token.csv ${BOOTSTRAP_TOKEN},kubelet-bootstrap,10001,&quot;system:kubelet-bootstrap&quot;cp token.csv /etc/kubernetes/ &#x521B;&#x5EFA; kube-apiserver &#x7684; systemd unit &#x6587;&#x4EF6;1234567891011121314151617181920212223242526272829303132333435363738394041424344vim kube-apiserver.service [Unit]Description=Kubernetes API ServerDocumentation=https://github.com/GoogleCloudPlatform/kubernetesAfter=network.target[Service]User=rootExecStart=/root/local/bin/kube-apiserver \ --admission-control=NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,ResourceQuota \ --advertise-address=192.168.77.201 \ --allow-privileged=true \ --apiserver-count=3 \ --audit-log-maxage=30 \ --audit-log-maxbackup=3 \ --audit-log-maxsize=100 \ --audit-log-path=/var/lib/audit.log \ --authorization-mode=RBAC \ --bind-address=192.168.77.201 \ --client-ca-file=/etc/kubernetes/ssl/ca.pem \ --enable-swagger-ui=true \ --etcd-cafile=/etc/kubernetes/ssl/ca.pem \ --etcd-certfile=/etc/kubernetes/ssl/kubernetes.pem \ --etcd-keyfile=/etc/kubernetes/ssl/kubernetes-key.pem \ --etcd-servers=https://192.168.77.201:2379,https://192.168.77.202:2379,https://192.168.77.203:2379 \ --event-ttl=1h \ --kubelet-https=true \ --insecure-bind-address=192.168.77.201 \ --runtime-config=rbac.authorization.k8s.io/v1alpha1 \ --service-account-key-file=/etc/kubernetes/ssl/ca-key.pem \ --service-cluster-ip-range=10.254.0.0/16 \ --service-node-port-range=8400-9000 \ --tls-cert-file=/etc/kubernetes/ssl/kubernetes.pem \ --tls-private-key-file=/etc/kubernetes/ssl/kubernetes-key.pem \ --experimental-bootstrap-token-auth \ --token-auth-file=/etc/kubernetes/token.csv \ --v=2Restart=on-failureRestartSec=5Type=notifyLimitNOFILE=65536[Install]WantedBy=multi-user.target kube-apiserver 1.6 &#x7248;&#x672C;&#x5F00;&#x59CB;&#x4F7F;&#x7528; etcd v3 API &#x548C;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#xFF1B; --authorization-mode=RBAC &#x6307;&#x5B9A;&#x5728;&#x5B89;&#x5168;&#x7AEF;&#x53E3;&#x4F7F;&#x7528; RBAC &#x6388;&#x6743;&#x6A21;&#x5F0F;&#xFF0C;&#x62D2;&#x7EDD;&#x672A;&#x901A;&#x8FC7;&#x6388;&#x6743;&#x7684;&#x8BF7;&#x6C42;&#xFF1B; kube-scheduler&#x3001;kube-controller-manager &#x4E00;&#x822C;&#x548C; kube-apiserver &#x90E8;&#x7F72;&#x5728;&#x540C;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#xFF0C;&#x5B83;&#x4EEC;&#x4F7F;&#x7528;&#x975E;&#x5B89;&#x5168;&#x7AEF;&#x53E3;&#x548C; kube-apiserver&#x901A;&#x4FE1;; kubelet&#x3001;kube-proxy&#x3001;kubectl &#x90E8;&#x7F72;&#x5728;&#x5176;&#x5B83; Node &#x8282;&#x70B9;&#x4E0A;&#xFF0C;&#x5982;&#x679C;&#x901A;&#x8FC7;&#x5B89;&#x5168;&#x7AEF;&#x53E3;&#x8BBF;&#x95EE; kube-apiserver&#xFF0C;&#x5219;&#x5FC5;&#x987B;&#x5148;&#x901A;&#x8FC7; TLS &#x8BC1;&#x4E66;&#x8BA4;&#x8BC1;&#xFF0C;&#x518D;&#x901A;&#x8FC7; RBAC &#x6388;&#x6743;&#xFF1B; kube-proxy&#x3001;kubectl &#x901A;&#x8FC7;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x8BC1;&#x4E66;&#x91CC;&#x6307;&#x5B9A;&#x76F8;&#x5173;&#x7684; User&#x3001;Group &#x6765;&#x8FBE;&#x5230;&#x901A;&#x8FC7; RBAC &#x6388;&#x6743;&#x7684;&#x76EE;&#x7684;&#xFF1B; &#x5982;&#x679C;&#x4F7F;&#x7528;&#x4E86; kubelet TLS Boostrap &#x673A;&#x5236;&#xFF0C;&#x5219;&#x4E0D;&#x80FD;&#x518D;&#x6307;&#x5B9A; --kubelet-certificate-authority&#x3001;--kubelet-client-certificate &#x548C; --kubelet-client-key &#x9009;&#x9879;&#xFF0C;&#x5426;&#x5219;&#x540E;&#x7EED; kube-apiserver &#x6821;&#x9A8C; kubelet &#x8BC1;&#x4E66;&#x65F6;&#x51FA;&#x73B0; &#x201D;x509: certificate signed by unknown authority&#x201C; &#x9519;&#x8BEF;&#xFF1B; --admission-control &#x503C;&#x5FC5;&#x987B;&#x5305;&#x542B; ServiceAccount&#xFF0C;&#x5426;&#x5219;&#x90E8;&#x7F72;&#x96C6;&#x7FA4;&#x63D2;&#x4EF6;&#x65F6;&#x4F1A;&#x5931;&#x8D25;&#xFF1B; --bind-address &#x4E0D;&#x80FD;&#x4E3A; 127.0.0.1&#xFF1B; --service-cluster-ip-range &#x6307;&#x5B9A; Service Cluster IP &#x5730;&#x5740;&#x6BB5;&#xFF0C;&#x8BE5;&#x5730;&#x5740;&#x6BB5;&#x4E0D;&#x80FD;&#x8DEF;&#x7531;&#x53EF;&#x8FBE;&#xFF1B; --service-node-port-range=${NODE_PORT_RANGE} &#x6307;&#x5B9A; NodePort &#x7684;&#x7AEF;&#x53E3;&#x8303;&#x56F4;&#xFF1B; &#x7F3A;&#x7701;&#x60C5;&#x51B5;&#x4E0B; kubernetes &#x5BF9;&#x8C61;&#x4FDD;&#x5B58;&#x5728; etcd /registry &#x8DEF;&#x5F84;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; --etcd-prefix &#x53C2;&#x6570;&#x8FDB;&#x884C;&#x8C03;&#x6574;&#xFF1B; &#x5B8C;&#x6574; unit &#x89C1; kube-apiserver.service &#x542F;&#x52A8; kube-apiserver12345cp kube-apiserver.service /lib/systemd/system/systemctl daemon-reloadsystemctl enable kube-apiserversystemctl start kube-apiserversystemctl status kube-apiserver &#x9A8C;&#x8BC1;123kubectl get svc kubernetesNAME CLUSTER-IP EXTERNAL-IP PORT(S) AGEkubernetes 10.254.0.1 443/TCP 1d &#x914D;&#x7F6E;&#x548C;&#x542F;&#x52A8; kube-controller-manager&#x521B;&#x5EFA; kube-controller-manager &#x7684; systemd unit &#x6587;&#x4EF6;123456789101112131415161718192021222324vim kube-controller-manager.service [Unit]Description=Kubernetes Controller ManagerDocumentation=https://github.com/GoogleCloudPlatform/kubernetes[Service]ExecStart=/root/local/bin/kube-controller-manager \ --address=127.0.0.1 \ --allocate-node-cidrs=true \ --cluster-cidr=172.30.0.0/16 \ --cluster-name=kubernetes \ --cluster-signing-cert-file=/etc/kubernetes/ssl/ca.pem \ --cluster-signing-key-file=/etc/kubernetes/ssl/ca-key.pem \ --leader-elect=true \ --master=http://192.168.77.201:8080 \ --root-ca-file=/etc/kubernetes/ssl/ca.pem \ --service-account-private-key-file=/etc/kubernetes/ssl/ca-key.pem \ --service-cluster-ip-range=10.254.0.0/16 \ --v=2Restart=on-failureRestartSec=5[Install]WantedBy=multi-user.target --address &#x503C;&#x5FC5;&#x987B;&#x4E3A; 127.0.0.1&#xFF0C;&#x56E0;&#x4E3A;&#x5F53;&#x524D; kube-apiserver &#x671F;&#x671B; scheduler &#x548C; controller-manager &#x5728;&#x540C;&#x4E00;&#x53F0;&#x673A;&#x5668;&#xFF0C;&#x5426;&#x5219;&#xFF1A; 1234$ kubectl get componentstatusesNAME STATUS MESSAGE ERRORcontroller-manager Unhealthy Get http://127.0.0.1:10252/healthz: dial tcp 127.0.0.1:10252: getsockopt: connection refusedscheduler Unhealthy Get http://127.0.0.1:10251/healthz: dial tcp 127.0.0.1:10251: getsockopt: connection refused &#x53C2;&#x8003;&#xFF1A;https://github.com/kubernetes-incubator/bootkube/issues/64 --master=http://{MASTER_IP}:8080&#xFF1A;&#x4F7F;&#x7528;&#x975E;&#x5B89;&#x5168; 8080 &#x7AEF;&#x53E3;&#x4E0E; kube-apiserver &#x901A;&#x4FE1;&#xFF1B; --cluster-cidr &#x6307;&#x5B9A; Cluster &#x4E2D; Pod &#x7684; CIDR &#x8303;&#x56F4;&#xFF0C;&#x8BE5;&#x7F51;&#x6BB5;&#x5728;&#x5404; Node &#x95F4;&#x5FC5;&#x987B;&#x8DEF;&#x7531;&#x53EF;&#x8FBE;(flanneld&#x4FDD;&#x8BC1;)&#xFF1B; --service-cluster-ip-range &#x53C2;&#x6570;&#x6307;&#x5B9A; Cluster &#x4E2D; Service &#x7684;CIDR&#x8303;&#x56F4;&#xFF0C;&#x8BE5;&#x7F51;&#x7EDC;&#x5728;&#x5404; Node &#x95F4;&#x5FC5;&#x987B;&#x8DEF;&#x7531;&#x4E0D;&#x53EF;&#x8FBE;&#xFF0C;&#x5FC5;&#x987B;&#x548C; kube-apiserver &#x4E2D;&#x7684;&#x53C2;&#x6570;&#x4E00;&#x81F4;&#xFF1B; --cluster-signing-* &#x6307;&#x5B9A;&#x7684;&#x8BC1;&#x4E66;&#x548C;&#x79C1;&#x94A5;&#x6587;&#x4EF6;&#x7528;&#x6765;&#x7B7E;&#x540D;&#x4E3A; TLS BootStrap &#x521B;&#x5EFA;&#x7684;&#x8BC1;&#x4E66;&#x548C;&#x79C1;&#x94A5;&#xFF1B; --root-ca-file &#x7528;&#x6765;&#x5BF9; kube-apiserver &#x8BC1;&#x4E66;&#x8FDB;&#x884C;&#x6821;&#x9A8C;&#xFF0C;&#x6307;&#x5B9A;&#x8BE5;&#x53C2;&#x6570;&#x540E;&#xFF0C;&#x624D;&#x4F1A;&#x5728;Pod &#x5BB9;&#x5668;&#x7684; ServiceAccount &#x4E2D;&#x653E;&#x7F6E;&#x8BE5; CA &#x8BC1;&#x4E66;&#x6587;&#x4EF6;&#xFF1B; --leader-elect=true &#x90E8;&#x7F72;&#x591A;&#x53F0;&#x673A;&#x5668;&#x7EC4;&#x6210;&#x7684; master &#x96C6;&#x7FA4;&#x65F6;&#x9009;&#x4E3E;&#x4EA7;&#x751F;&#x4E00;&#x5904;&#x4E8E;&#x5DE5;&#x4F5C;&#x72B6;&#x6001;&#x7684; kube-controller-manager &#x8FDB;&#x7A0B;&#xFF1B; &#x5B8C;&#x6574; unit &#x89C1; kube-controller-manager.service &#x542F;&#x52A8; kube-controller-manager1234cp kube-controller-manager.service /etc/systemd/system/systemctl daemon-reloadsystemctl enable kube-controller-managersystemctl start kube-controller-manager &#x914D;&#x7F6E;&#x548C;&#x542F;&#x52A8; kube-scheduler&#x521B;&#x5EFA; kube-scheduler &#x7684; systemd unit &#x6587;&#x4EF6;12345678910111213141516vim kube-scheduler.service [Unit]Description=Kubernetes SchedulerDocumentation=https://github.com/GoogleCloudPlatform/kubernetes[Service]ExecStart=/root/local/bin/kube-scheduler \ --leader-elect=true \ --master=http://192.168.77.201:8080 \ --address=127.0.0.1 \ --v=2Restart=on-failureRestartSec=5[Install]WantedBy=multi-user.target --address &#x503C;&#x5FC5;&#x987B;&#x4E3A; 127.0.0.1&#xFF0C;&#x56E0;&#x4E3A;&#x5F53;&#x524D; kube-apiserver &#x671F;&#x671B; scheduler &#x548C; controller-manager &#x5728;&#x540C;&#x4E00;&#x53F0;&#x673A;&#x5668;&#xFF1B; --master=http://{MASTER_IP}:8080&#xFF1A;&#x4F7F;&#x7528;&#x975E;&#x5B89;&#x5168; 8080 &#x7AEF;&#x53E3;&#x4E0E; kube-apiserver &#x901A;&#x4FE1;&#xFF1B; --leader-elect=true &#x90E8;&#x7F72;&#x591A;&#x53F0;&#x673A;&#x5668;&#x7EC4;&#x6210;&#x7684; master &#x96C6;&#x7FA4;&#x65F6;&#x9009;&#x4E3E;&#x4EA7;&#x751F;&#x4E00;&#x5904;&#x4E8E;&#x5DE5;&#x4F5C;&#x72B6;&#x6001;&#x7684; kube-controller-manager &#x8FDB;&#x7A0B;&#xFF1B; &#x5B8C;&#x6574; unit &#x89C1; kube-scheduler.service&#x3002; &#x542F;&#x52A8; kube-scheduler1234cp kube-scheduler.service /etc/systemd/system/systemctl daemon-reloadsystemctl enable kube-schedulersystemctl start kube-scheduler &#x9A8C;&#x8BC1; master &#x8282;&#x70B9;&#x529F;&#x80FD;1234567kubectl get componentstatusesNAME STATUS MESSAGE ERRORcontroller-manager Healthy okscheduler Healthy oketcd-0 Healthy {&quot;health&quot;: &quot;true&quot;}etcd-1 Healthy {&quot;health&quot;: &quot;true&quot;}etcd-2 Healthy {&quot;health&quot;: &quot;true&quot;} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[部署 kubernetes 集群 （一）]]></title>
    <url>%2Funcategorized%2F2017%2F01%2F22%2F%E9%83%A8%E7%BD%B2-kubernetes-%E9%9B%86%E7%BE%A4-%EF%BC%88%E4%B8%80%EF%BC%89.html</url>
    <content type="text"><![CDATA[1.&#x7EC4;&#x4EF6;&#x7248;&#x672C;&#x548C;&#x96C6;&#x7FA4;&#x73AF;&#x5883;&#x96C6;&#x7FA4;&#x7EC4;&#x4EF6;&#x548C;&#x7248;&#x672C; Kubernetes 1.6.2 Docker 17.06.0-ce Etcd 3.1.6 Flanneld 0.7.1 vxlan &#x7F51;&#x7EDC; TLS &#x8BA4;&#x8BC1;&#x901A;&#x4FE1; (&#x6240;&#x6709;&#x7EC4;&#x4EF6;&#xFF0C;&#x5982; etcd&#x3001;kubernetes master &#x548C; node) RBAC &#x6388;&#x6743; kubelet TLS BootStrapping kubedns&#x3001;dashboard&#x3001;heapster (influxdb&#x3001;grafana)&#x3001;EFK (elasticsearch&#x3001;fluentd&#x3001;kibana) &#x63D2;&#x4EF6; &#x79C1;&#x6709; docker registry&#xFF0C;&#x4F7F;&#x7528; ceph rgw &#x540E;&#x7AEF;&#x5B58;&#x50A8;&#xFF0C;TLS + HTTP Basic &#x8BA4;&#x8BC1; &#x96C6;&#x7FA4;&#x673A;&#x5668; 192.168.77.201 192.168.77.202 192.168.77.203 &#x672C;&#x7740;&#x6D4B;&#x8BD5;&#x7684;&#x76EE;&#x7684;&#xFF0C;etcd &#x96C6;&#x7FA4;&#x3001;kubernetes master &#x96C6;&#x7FA4;&#x3001;kubernetes node &#x5747;&#x4F7F;&#x7528;&#x8FD9;&#x4E09;&#x53F0;&#x673A;&#x5668;&#x3002; &#x96C6;&#x7FA4;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x540E;&#x7EED;&#x7684;&#x90E8;&#x7F72;&#x6B65;&#x9AA4;&#x5C06;&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x5B9A;&#x4E49;&#x7684;&#x5168;&#x5C40;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF0C;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x673A;&#x5668;&#x3001;&#x7F51;&#x7EDC;&#x60C5;&#x51B5;&#x4FEE;&#x6539;&#xFF1A; 123456789101112131415161718192021222324252627282930313233343536373839NODE_NAME=etcd-host0 # &#x5F53;&#x524D;&#x90E8;&#x7F72;&#x7684;&#x673A;&#x5668;&#x540D;&#x79F0;(&#x968F;&#x4FBF;&#x5B9A;&#x4E49;&#xFF0C;&#x53EA;&#x8981;&#x80FD;&#x533A;&#x5206;&#x4E0D;&#x540C;&#x673A;&#x5668;&#x5373;&#x53EF;)NODE_IP=&quot;192.168.77.201&quot; # &#x5F53;&#x524D;&#x90E8;&#x7F72;&#x7684;&#x673A;&#x5668; IPNODE_IPS=&quot;192.168.77.201 192.168.77.202 192.168.77.203&quot; # etcd &#x96C6;&#x7FA4;&#x6240;&#x6709;&#x673A;&#x5668; IP# etcd &#x96C6;&#x7FA4;&#x95F4;&#x901A;&#x4FE1;&#x7684;IP&#x548C;&#x7AEF;&#x53E3;export ETCD_NODES=etcd-host0=https://192.168.77.201:2380,etcd-host1=192.168.77.202:2380,etcd-host2=https://192.168.77.203:2380# &#x5BFC;&#x5165;&#x7528;&#x5230;&#x7684;&#x5176;&#x5B83;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#xFF1A;ETCD_ENDPOINTS&#x3001;FLANNEL_ETCD_PREFIX&#x3001;CLUSTER_CIDR# TLS Bootstrapping &#x4F7F;&#x7528;&#x7684; Token&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x547D;&#x4EE4; head -c 16 /dev/urandom | od -An -t x | tr -d &apos; &apos; &#x751F;&#x6210;BOOTSTRAP_TOKEN=&quot;5dedacd78457d0511e20e8b0832fc3bc&quot;# &#x5EFA;&#x8BAE;&#x7528; &#x672A;&#x7528;&#x7684;&#x7F51;&#x6BB5; &#x6765;&#x5B9A;&#x4E49;&#x670D;&#x52A1;&#x7F51;&#x6BB5;&#x548C; Pod &#x7F51;&#x6BB5;# &#x670D;&#x52A1;&#x7F51;&#x6BB5; (Service CIDR&#xFF09;&#xFF0C;&#x90E8;&#x7F72;&#x524D;&#x8DEF;&#x7531;&#x4E0D;&#x53EF;&#x8FBE;&#xFF0C;&#x90E8;&#x7F72;&#x540E;&#x96C6;&#x7FA4;&#x5185;&#x4F7F;&#x7528; IP:Port &#x53EF;&#x8FBE;SERVICE_CIDR=&quot;10.254.0.0/16&quot;# POD &#x7F51;&#x6BB5; (Cluster CIDR&#xFF09;&#xFF0C;&#x90E8;&#x7F72;&#x524D;&#x8DEF;&#x7531;&#x4E0D;&#x53EF;&#x8FBE;&#xFF0C;**&#x90E8;&#x7F72;&#x540E;**&#x8DEF;&#x7531;&#x53EF;&#x8FBE; (flanneld &#x4FDD;&#x8BC1;)CLUSTER_CIDR=&quot;172.30.0.0/16&quot;# &#x670D;&#x52A1;&#x7AEF;&#x53E3;&#x8303;&#x56F4; (NodePort Range)NODE_PORT_RANGE=&quot;8400-9000&quot;# etcd &#x96C6;&#x7FA4;&#x670D;&#x52A1;&#x5730;&#x5740;&#x5217;&#x8868;ETCD_ENDPOINTS=&quot;https://192.168.77.201:2379,https://192.168.77.202:2379,https://192.168.77.203:2379&quot;# flanneld &#x7F51;&#x7EDC;&#x914D;&#x7F6E;&#x524D;&#x7F00;FLANNEL_ETCD_PREFIX=&quot;/kubernetes/network&quot;# kubernetes &#x670D;&#x52A1; IP (&#x9884;&#x5206;&#x914D;&#xFF0C;&#x4E00;&#x822C;&#x662F; SERVICE_CIDR &#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;IP)CLUSTER_KUBERNETES_SVC_IP=&quot;10.254.0.1&quot;# &#x96C6;&#x7FA4; DNS &#x670D;&#x52A1; IP (&#x4ECE; SERVICE_CIDR &#x4E2D;&#x9884;&#x5206;&#x914D;)CLUSTER_DNS_SVC_IP=&quot;10.254.0.2&quot;# &#x96C6;&#x7FA4; DNS &#x57DF;&#x540D;CLUSTER_DNS_DOMAIN=&quot;cluster.local.&quot;# &#x66FF;&#x6362;&#x4E3A; kubernetes master &#x96C6;&#x7FA4;&#x4EFB;&#x4E00;&#x673A;&#x5668; IPMASTER_IP=&quot;192.168.77.201&quot;KUBE_APISERVER=&quot;https://${MASTER_IP}:6443&quot; &#x6253;&#x5305;&#x540E;&#x7684;&#x53D8;&#x91CF;&#x5B9A;&#x4E49;&#x89C1; environment.sh&#xFF0C;&#x540E;&#x7EED;&#x90E8;&#x7F72;&#x65F6;&#x4F1A;&#x63D0;&#x793A;&#x5BFC;&#x5165;&#x8BE5;&#x811A;&#x672C;&#xFF1B; &#x5206;&#x53D1;&#x96C6;&#x7FA4;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x5B9A;&#x4E49;&#x811A;&#x672C;&#x628A;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x5B9A;&#x4E49;&#x811A;&#x672C;&#x62F7;&#x8D1D;&#x5230;&#x6240;&#x6709;&#x673A;&#x5668;&#x7684; /root/local/bin &#x76EE;&#x5F55;&#xFF1A; 1cp environment.sh /root/local/bin 2.&#x521B;&#x5EFA;CA&#x8BC1;&#x4E66;&#x548C;&#x79D8;&#x94A5;&#x521B;&#x5EFA; CA &#x8BC1;&#x4E66;&#x548C;&#x79D8;&#x94A5;kubernetes &#x7CFB;&#x7EDF;&#x5404;&#x7EC4;&#x4EF6;&#x9700;&#x8981;&#x4F7F;&#x7528; TLS &#x8BC1;&#x4E66;&#x5BF9;&#x901A;&#x4FE1;&#x8FDB;&#x884C;&#x52A0;&#x5BC6;&#xFF0C;&#x672C;&#x6587;&#x6863;&#x4F7F;&#x7528; CloudFlare &#x7684; PKI &#x5DE5;&#x5177;&#x96C6; cfssl &#x6765;&#x751F;&#x6210; Certificate Authority (CA) &#x8BC1;&#x4E66;&#x548C;&#x79D8;&#x94A5;&#x6587;&#x4EF6;&#xFF0C;CA &#x662F;&#x81EA;&#x7B7E;&#x540D;&#x7684;&#x8BC1;&#x4E66;&#xFF0C;&#x7528;&#x6765;&#x7B7E;&#x540D;&#x540E;&#x7EED;&#x521B;&#x5EFA;&#x7684;&#x5176;&#x5B83; TLS &#x8BC1;&#x4E66;&#x3002; &#x5B89;&#x88C5; CFSSL1234567891011121314151617wget https://pkg.cfssl.org/R1.2/cfssl_linux-amd64chmod +x cfssl_linux-amd64sudo mv cfssl_linux-amd64 /root/local/bin/cfsslwget https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64chmod +x cfssljson_linux-amd64mv cfssljson_linux-amd64 /root/local/bin/cfssljsonwget https://pkg.cfssl.org/R1.2/cfssl-certinfo_linux-amd64chmod +x cfssl-certinfo_linux-amd64mv cfssl-certinfo_linux-amd64 /root/local/bin/cfssl-certinfovim /etc/profileexport PATH=/root/local/bin:$PATHmkdir sslcd sslcfssl print-defaults config &gt; config.jsoncfssl print-defaults csr &gt; csr.json &#x521B;&#x5EFA; CA (Certificate Authority)&#x521B;&#x5EFA; CA &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1A; 12345678910111213141516171819vim ca-config.json{ &quot;signing&quot;: { &quot;default&quot;: { &quot;expiry&quot;: &quot;8760h&quot; }, &quot;profiles&quot;: { &quot;kubernetes&quot;: { &quot;usages&quot;: [ &quot;signing&quot;, &quot;key encipherment&quot;, &quot;server auth&quot;, &quot;client auth&quot; ], &quot;expiry&quot;: &quot;8760h&quot; } } }} ca-config.json&#xFF1A;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x591A;&#x4E2A; profiles&#xFF0C;&#x5206;&#x522B;&#x6307;&#x5B9A;&#x4E0D;&#x540C;&#x7684;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x3001;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x7B49;&#x53C2;&#x6570;&#xFF1B;&#x540E;&#x7EED;&#x5728;&#x7B7E;&#x540D;&#x8BC1;&#x4E66;&#x65F6;&#x4F7F;&#x7528;&#x67D0;&#x4E2A; profile&#xFF1B; signing&#xFF1A;&#x8868;&#x793A;&#x8BE5;&#x8BC1;&#x4E66;&#x53EF;&#x7528;&#x4E8E;&#x7B7E;&#x540D;&#x5176;&#x5B83;&#x8BC1;&#x4E66;&#xFF1B;&#x751F;&#x6210;&#x7684; ca.pem &#x8BC1;&#x4E66;&#x4E2D; CA=TRUE&#xFF1B; server auth&#xFF1A;&#x8868;&#x793A; client &#x53EF;&#x4EE5;&#x7528;&#x8BE5; CA &#x5BF9; server &#x63D0;&#x4F9B;&#x7684;&#x8BC1;&#x4E66;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#xFF1B; client auth&#xFF1A;&#x8868;&#x793A; server &#x53EF;&#x4EE5;&#x7528;&#x8BE5; CA &#x5BF9; client &#x63D0;&#x4F9B;&#x7684;&#x8BC1;&#x4E66;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#xFF1B; &#x521B;&#x5EFA; CA &#x8BC1;&#x4E66;&#x7B7E;&#x540D;&#x8BF7;&#x6C42;&#xFF1A; 1234567891011121314151617$ cat ca-csr.json{ &quot;CN&quot;: &quot;kubernetes&quot;, &quot;key&quot;: { &quot;algo&quot;: &quot;rsa&quot;, &quot;size&quot;: 2048 }, &quot;names&quot;: [ { &quot;C&quot;: &quot;CN&quot;, &quot;ST&quot;: &quot;BeiJing&quot;, &quot;L&quot;: &quot;BeiJing&quot;, &quot;O&quot;: &quot;k8s&quot;, &quot;OU&quot;: &quot;System&quot; } ]} &#x201C;CN&#x201D;&#xFF1A;Common Name&#xFF0C;kube-apiserver &#x4ECE;&#x8BC1;&#x4E66;&#x4E2D;&#x63D0;&#x53D6;&#x8BE5;&#x5B57;&#x6BB5;&#x4F5C;&#x4E3A;&#x8BF7;&#x6C42;&#x7684;&#x7528;&#x6237;&#x540D; (User Name)&#xFF1B;&#x6D4F;&#x89C8;&#x5668;&#x4F7F;&#x7528;&#x8BE5;&#x5B57;&#x6BB5;&#x9A8C;&#x8BC1;&#x7F51;&#x7AD9;&#x662F;&#x5426;&#x5408;&#x6CD5;&#xFF1B; &#x201C;O&#x201D;&#xFF1A;Organization&#xFF0C;kube-apiserver &#x4ECE;&#x8BC1;&#x4E66;&#x4E2D;&#x63D0;&#x53D6;&#x8BE5;&#x5B57;&#x6BB5;&#x4F5C;&#x4E3A;&#x8BF7;&#x6C42;&#x7528;&#x6237;&#x6240;&#x5C5E;&#x7684;&#x7EC4; (Group)&#xFF1B; &#x751F;&#x6210; CA &#x8BC1;&#x4E66;&#x548C;&#x79C1;&#x94A5;&#xFF1A; 123cfssl gencert -initca ca-csr.json | cfssljson -bare cals ca*ca-config.json ca.csr ca-csr.json ca-key.pem ca.pem &#x5206;&#x53D1;&#x8BC1;&#x4E66;&#x5C06;&#x751F;&#x6210;&#x7684; CA &#x8BC1;&#x4E66;&#x3001;&#x79D8;&#x94A5;&#x6587;&#x4EF6;&#x3001;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x62F7;&#x8D1D;&#x5230;&#x6240;&#x6709;&#x673A;&#x5668;&#x7684; /etc/kubernetes/ssl &#x76EE;&#x5F55;&#x4E0B; 123$ sudo mkdir -p /etc/kubernetes/ssl$ sudo cp ca* /etc/kubernetes/ssl$ &#x521B;&#x5EFA; kubernetes &#x8BC1;&#x4E66;&#x7B7E;&#x540D;&#x8BF7;&#x6C42; 1234567891011121314151617181920212223242526272829$ cat kubernetes-csr.json{ &quot;CN&quot;: &quot;kubernetes&quot;, &quot;hosts&quot;: [ &quot;127.0.0.1&quot;, &quot;192.168.77.201&quot;, &quot;192.168.77.202&quot;, &quot;192.168.77.203&quot;, &quot;10.254.0.1&quot;, &quot;kubernetes&quot;, &quot;kubernetes.default&quot;, &quot;kubernetes.default.svc&quot;, &quot;kubernetes.default.svc.cluster&quot;, &quot;kubernetes.default.svc.cluster.local&quot; ], &quot;key&quot;: { &quot;algo&quot;: &quot;rsa&quot;, &quot;size&quot;: 2048 }, &quot;names&quot;: [ { &quot;C&quot;: &quot;CN&quot;, &quot;ST&quot;: &quot;BeiJing&quot;, &quot;L&quot;: &quot;BeiJing&quot;, &quot;O&quot;: &quot;k8s&quot;, &quot;OU&quot;: &quot;System&quot; } ]} &#x5982;&#x679C; hosts &#x5B57;&#x6BB5;&#x4E0D;&#x4E3A;&#x7A7A;&#x5219;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x6388;&#x6743;&#x4F7F;&#x7528;&#x8BE5;&#x8BC1;&#x4E66;&#x7684; IP &#x6216;&#x57DF;&#x540D;&#x5217;&#x8868;&#xFF0C;&#x7531;&#x4E8E;&#x8BE5;&#x8BC1;&#x4E66;&#x540E;&#x7EED;&#x88AB; etcd &#x96C6;&#x7FA4;&#x548C; kubernetes master &#x96C6;&#x7FA4;&#x4F7F;&#x7528;&#xFF0C;&#x6240;&#x4EE5;&#x4E0A;&#x9762;&#x5206;&#x522B;&#x6307;&#x5B9A;&#x4E86; etcd &#x96C6;&#x7FA4;&#x3001;kubernetes master &#x96C6;&#x7FA4;&#x7684;&#x4E3B;&#x673A; IP &#x548C; kubernetes &#x670D;&#x52A1;&#x7684;&#x670D;&#x52A1; IP&#xFF08;&#x4E00;&#x822C;&#x662F; kue-apiserver &#x6307;&#x5B9A;&#x7684; service-cluster-ip-range &#x7F51;&#x6BB5;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;IP&#xFF0C;&#x5982; 10.254.0.1&#x3002; &#x751F;&#x6210; kubernetes &#x8BC1;&#x4E66;&#x548C;&#x79C1;&#x94A5; 123$ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kubernetes-csr.json | cfssljson -bare kubernetes$ ls kubernetes*kubernetes.csr kubernetes-csr.json kubernetes-key.pem kubernetes.pem &#x6216;&#x8005;&#x76F4;&#x63A5;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x4E0A;&#x6307;&#x5B9A;&#x76F8;&#x5173;&#x53C2;&#x6570;&#xFF1A; 1$ echo &apos;{&quot;CN&quot;:&quot;kubernetes&quot;,&quot;hosts&quot;:[&quot;&quot;],&quot;key&quot;:{&quot;algo&quot;:&quot;rsa&quot;,&quot;size&quot;:2048}}&apos; | cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes -hostname=&quot;127.0.0.1,192.168.77.201,192.168.77.202,192.168.77.203,10.254.0.1,kubernetes,kubernetes.default&quot; - | cfssljson -bare kubernetes &#x521B;&#x5EFA; Admin &#x8BC1;&#x4E66;&#x521B;&#x5EFA; admin &#x8BC1;&#x4E66;&#x7B7E;&#x540D;&#x8BF7;&#x6C42; 123456789101112131415161718vim admin-csr.json{ &quot;CN&quot;: &quot;admin&quot;, &quot;hosts&quot;: [], &quot;key&quot;: { &quot;algo&quot;: &quot;rsa&quot;, &quot;size&quot;: 2048 }, &quot;names&quot;: [ { &quot;C&quot;: &quot;CN&quot;, &quot;ST&quot;: &quot;BeiJing&quot;, &quot;L&quot;: &quot;BeiJing&quot;, &quot;O&quot;: &quot;system:masters&quot;, &quot;OU&quot;: &quot;System&quot; } ]} &#x540E;&#x7EED; kube-apiserver &#x4F7F;&#x7528; RBAC &#x5BF9;&#x5BA2;&#x6237;&#x7AEF;(&#x5982; kubelet&#x3001;kube-proxy&#x3001;Pod)&#x8BF7;&#x6C42;&#x8FDB;&#x884C;&#x6388;&#x6743;&#xFF1B; kube-apiserver &#x9884;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E9B; RBAC &#x4F7F;&#x7528;&#x7684; RoleBindings&#xFF0C;&#x5982; cluster-admin &#x5C06; Groupsystem:masters &#x4E0E; Role cluster-admin &#x7ED1;&#x5B9A;&#xFF0C;&#x8BE5; Role &#x6388;&#x4E88;&#x4E86;&#x8C03;&#x7528;kube-apiserver &#x7684;&#x6240;&#x6709; API&#x7684;&#x6743;&#x9650;&#xFF1B; OU &#x6307;&#x5B9A;&#x8BE5;&#x8BC1;&#x4E66;&#x7684; Group &#x4E3A; system:masters&#xFF0C;kubelet &#x4F7F;&#x7528;&#x8BE5;&#x8BC1;&#x4E66;&#x8BBF;&#x95EE; kube-apiserver&#x65F6; &#xFF0C;&#x7531;&#x4E8E;&#x8BC1;&#x4E66;&#x88AB; CA &#x7B7E;&#x540D;&#xFF0C;&#x6240;&#x4EE5;&#x8BA4;&#x8BC1;&#x901A;&#x8FC7;&#xFF0C;&#x540C;&#x65F6;&#x7531;&#x4E8E;&#x8BC1;&#x4E66;&#x7528;&#x6237;&#x7EC4;&#x4E3A;&#x7ECF;&#x8FC7;&#x9884;&#x6388;&#x6743;&#x7684;system:masters&#xFF0C;&#x6240;&#x4EE5;&#x88AB;&#x6388;&#x4E88;&#x8BBF;&#x95EE;&#x6240;&#x6709; API &#x7684;&#x6743;&#x9650;&#xFF1B; &#x751F;&#x6210; admin &#x8BC1;&#x4E66;&#x548C;&#x79C1;&#x94A5; 123cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes admin-csr.json | cfssljson -bare adminls admin*admin.csr admin-csr.json admin-key.pem admin.pem &#x521B;&#x5EFA; Kube-Proxy &#x8BC1;&#x4E66;&#x521B;&#x5EFA; kube-proxy &#x8BC1;&#x4E66;&#x7B7E;&#x540D;&#x8BF7;&#x6C42; 123456789101112131415161718vim kube-proxy-csr.json{ &quot;CN&quot;: &quot;system:kube-proxy&quot;, &quot;hosts&quot;: [], &quot;key&quot;: { &quot;algo&quot;: &quot;rsa&quot;, &quot;size&quot;: 2048 }, &quot;names&quot;: [ { &quot;C&quot;: &quot;CN&quot;, &quot;ST&quot;: &quot;BeiJing&quot;, &quot;L&quot;: &quot;BeiJing&quot;, &quot;O&quot;: &quot;k8s&quot;, &quot;OU&quot;: &quot;System&quot; } ]} CN &#x6307;&#x5B9A;&#x8BE5;&#x8BC1;&#x4E66;&#x7684; User &#x4E3A; system:kube-proxy&#xFF1B; kube-apiserver &#x9884;&#x5B9A;&#x4E49;&#x7684; RoleBinding cluster-admin &#x5C06;User system:kube-proxy &#x4E0E; Rolesystem:node-proxier &#x7ED1;&#x5B9A;&#xFF0C;&#x8BE5; Role &#x6388;&#x4E88;&#x4E86;&#x8C03;&#x7528; kube-apiserver Proxy &#x76F8;&#x5173; API &#x7684;&#x6743;&#x9650;&#xFF1B; &#x751F;&#x6210; kube-proxy &#x5BA2;&#x6237;&#x7AEF;&#x8BC1;&#x4E66;&#x548C;&#x79C1;&#x94A5; 123cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-proxy-csr.json | cfssljson -bare kube-proxyls kube-proxy*kube-proxy.csr kube-proxy-csr.json kube-proxy-key.pem kube-proxy.pem &#x6821;&#x9A8C;&#x8BC1;&#x4E66;&#x4EE5; kubernetes &#x8BC1;&#x4E66;&#x4E3A;&#x4F8B; &#x4F7F;&#x7528; Opsnssl &#x547D;&#x4EE4;123456789101112131415161718192021222324252627282930313233openssl x509 -noout -text -in kubernetes.pemCertificate: Data: Version: 3 (0x2) Serial Number: cc:f1:04:70:82:fb:9e:80:38:8d:9e:2a:a2:d6:c1:1d:b5:85:0a Signature Algorithm: sha256WithRSAEncryption Issuer: C=CN, ST=BeiJing, L=BeiJing, O=k8s, OU=System, CN=kubernetes Validity Not Before: Jul 6 03:05:00 2017 GMT Not After : Jul 6 03:05:00 2018 GMT Subject: C=CN, ST=BeiJing, L=BeiJing, O=k8s, OU=System, CN=kubernetes Subject Public Key Info: Public Key Algorithm: rsaEncryption Public-Key: (2048 bit) Modulus:... Exponent: 65537 (0x10001) X509v3 extensions: X509v3 Key Usage: critical Digital Signature, Key Encipherment X509v3 Extended Key Usage: TLS Web Server Authentication, TLS Web Client Authentication X509v3 Basic Constraints: critical CA:FALSE X509v3 Subject Key Identifier: B3:F3:E3:4C:AD:86:FD:FE:5D:B5:E1:26:94:D3:E2:4C:AE:50:5B:C3 X509v3 Authority Key Identifier: keyid:5D:A9:C1:8C:C3:1D:58:A8:6C:7B:C9:08:1D:3F:09:D3:CA:2B:F8:92 X509v3 Subject Alternative Name: DNS:kubernetes, DNS:kubernetes.default, DNS:kubernetes.default.svc, DNS:kubernetes.default.svc.cluster, DNS:kubernetes.default.svc.cluster.local, IP Address:127.0.0.1, IP Address:192.168.77.201, IP Address:192.168.77.202, IP Address:192.168.77.203, IP Address:10.254.0.1... &#x786E;&#x8BA4; Issuer &#x5B57;&#x6BB5;&#x7684;&#x5185;&#x5BB9;&#x548C; ca-csr.json &#x4E00;&#x81F4;&#xFF1B; &#x786E;&#x8BA4; Subject &#x5B57;&#x6BB5;&#x7684;&#x5185;&#x5BB9;&#x548C; kubernetes-csr.json &#x4E00;&#x81F4;&#xFF1B; &#x786E;&#x8BA4; X509v3 Subject Alternative Name &#x5B57;&#x6BB5;&#x7684;&#x5185;&#x5BB9;&#x548C; kubernetes-csr.json &#x4E00;&#x81F4;&#xFF1B; &#x786E;&#x8BA4; X509v3 Key Usage&#x3001;Extended Key Usage &#x5B57;&#x6BB5;&#x7684;&#x5185;&#x5BB9;&#x548C; ca-config.json &#x4E2D; kubernetesprofile &#x4E00;&#x81F4; &#x4F7F;&#x7528; Cfssl-Certinfo &#x547D;&#x4EE4;12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152cfssl-certinfo -cert kubernetes.pem...{ &quot;subject&quot;: { &quot;common_name&quot;: &quot;kubernetes&quot;, &quot;country&quot;: &quot;CN&quot;, &quot;organization&quot;: &quot;k8s&quot;, &quot;organizational_unit&quot;: &quot;System&quot;, &quot;locality&quot;: &quot;BeiJing&quot;, &quot;province&quot;: &quot;BeiJing&quot;, &quot;names&quot;: [ &quot;CN&quot;, &quot;BeiJing&quot;, &quot;BeiJing&quot;, &quot;k8s&quot;, &quot;System&quot;, &quot;kubernetes&quot; ] }, &quot;issuer&quot;: { &quot;common_name&quot;: &quot;kubernetes&quot;, &quot;country&quot;: &quot;CN&quot;, &quot;organization&quot;: &quot;k8s&quot;, &quot;organizational_unit&quot;: &quot;System&quot;, &quot;locality&quot;: &quot;BeiJing&quot;, &quot;province&quot;: &quot;BeiJing&quot;, &quot;names&quot;: [ &quot;CN&quot;, &quot;BeiJing&quot;, &quot;BeiJing&quot;, &quot;k8s&quot;, &quot;System&quot;, &quot;kubernetes&quot; ] }, &quot;serial_number&quot;: &quot;4570347592092906586131725795238401977456362762&quot;, &quot;sans&quot;: [ &quot;kubernetes&quot;, &quot;kubernetes.default&quot;, &quot;kubernetes.default.svc&quot;, &quot;kubernetes.default.svc.cluster&quot;, &quot;kubernetes.default.svc.cluster.local&quot;, &quot;127.0.0.1&quot;, &quot;192.168.77.201&quot;, &quot;192.168.77.202&quot;, &quot;192.168.77.203&quot;, &quot;10.254.0.1&quot; ], &quot;not_before&quot;: &quot;2017-07-06T03:05:00Z&quot;, &quot;not_after&quot;: &quot;2018-07-06T03:05:00Z&quot;, &quot;sigalg&quot;: &quot;SHA256WithRSA&quot;,... &#x5206;&#x53D1;&#x8BC1;&#x4E66;&#x5C06;&#x751F;&#x6210;&#x7684;&#x8BC1;&#x4E66;&#x548C;&#x79D8;&#x94A5;&#x6587;&#x4EF6;&#xFF08;&#x540E;&#x7F00;&#x540D;&#x4E3A;.pem&#xFF09;&#x62F7;&#x8D1D;&#x5230;&#x6240;&#x6709;&#x673A;&#x5668;&#x7684; /etc/kubernetes/ssl &#x76EE;&#x5F55;&#x4E0B;&#x5907;&#x7528;&#xFF1B; 1234mkdir -p /etc/kubernetes/sslcp *.pem /etc/kubernetes/sslscp *.pem root@node2:/etc/kubernetes/sslscp *.pem root@node3:/etc/kubernetes/ssl 3.&#x90E8;&#x7F72;&#x9AD8;&#x53EF;&#x7528; etcd &#x96C6;&#x7FA4;kuberntes &#x7CFB;&#x7EDF;&#x4F7F;&#x7528; etcd &#x5B58;&#x50A8;&#x6240;&#x6709;&#x6570;&#x636E;&#xFF0C;&#x672C;&#x6587;&#x6863;&#x4ECB;&#x7ECD;&#x90E8;&#x7F72;&#x4E00;&#x4E2A;&#x4E09;&#x8282;&#x70B9;&#x9AD8;&#x53EF;&#x7528; etcd &#x96C6;&#x7FA4;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x8FD9;&#x4E09;&#x4E2A;&#x8282;&#x70B9;&#x590D;&#x7528; kubernetes master &#x673A;&#x5668;&#xFF0C;&#x5206;&#x522B;&#x547D;&#x540D;&#x4E3A;etcd-host0&#x3001;etcd-host1&#x3001;etcd-host2&#xFF1A; etcd-host0&#xFF1A;192.168.77.201 etcd-host1&#xFF1A;192.168.77.201 etcd-host2&#xFF1A;192.168.77.201 &#x4F7F;&#x7528;&#x7684;&#x53D8;&#x91CF;&#x672C;&#x6587;&#x6863;&#x7528;&#x5230;&#x7684;&#x53D8;&#x91CF;&#x5B9A;&#x4E49;&#x5982;&#x4E0B;&#xFF1A; 123456export NODE_NAME=etcd-host0 # &#x5F53;&#x524D;&#x90E8;&#x7F72;&#x7684;&#x673A;&#x5668;&#x540D;&#x79F0;(&#x968F;&#x4FBF;&#x5B9A;&#x4E49;&#xFF0C;&#x53EA;&#x8981;&#x80FD;&#x533A;&#x5206;&#x4E0D;&#x540C;&#x673A;&#x5668;&#x5373;&#x53EF;)export NODE_IP=192.168.77.201 # &#x5F53;&#x524D;&#x90E8;&#x7F72;&#x7684;&#x673A;&#x5668; IPexport NODE_IPS=&quot;192.168.77.201 192.168.77.202 192.168.77.203&quot; # etcd &#x96C6;&#x7FA4;&#x6240;&#x6709;&#x673A;&#x5668; IPexport ETCD_NODES=etcd-host0=https://192.168.77.201:2380,etcd-host1=https://192.168.77.202:2380,etcd-host2=https://192.168.77.203:2380 #etcd &#x96C6;&#x7FA4;&#x95F4;&#x901A;&#x4FE1;&#x7684;IP&#x548C;&#x7AEF;&#x53E3;export ETCDCTL_API=3 #flannel&#x6682;&#x65F6;&#x4E0D;&#x652F;&#x6301;etcd3source /root/local/bin/environment.sh #&#x5BFC;&#x5165;&#x7528;&#x5230;&#x7684;&#x5176;&#x5B83;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#xFF1A;ETCD_ENDPOINTS&#x3001;FLANNEL_ETCD_PREFIX&#x3001;CLUSTER_CIDR &#x4E0B;&#x8F7D;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#x5230; https://github.com/coreos/etcd/releases &#x9875;&#x9762;&#x4E0B;&#x8F7D;&#x6700;&#x65B0;&#x7248;&#x672C;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#xFF1A; 123wget https://github.com/coreos/etcd/releases/download/v3.1.6/etcd-v3.1.6-linux-amd64.tar.gztar -xvf etcd-v3.1.6-linux-amd64.tar.gzsudo mv etcd-v3.1.6-linux-amd64/etcd* /root/local/bin &#x521B;&#x5EFA; TLS &#x79D8;&#x94A5;&#x548C;&#x8BC1;&#x4E66;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x901A;&#x4FE1;&#x5B89;&#x5168;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;(&#x5982; etcdctl) &#x4E0E; etcd &#x96C6;&#x7FA4;&#x3001;etcd &#x96C6;&#x7FA4;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x9700;&#x8981;&#x4F7F;&#x7528; TLS &#x52A0;&#x5BC6;&#xFF0C;&#x672C;&#x8282;&#x521B;&#x5EFA; etcd TLS &#x52A0;&#x5BC6;&#x6240;&#x9700;&#x7684;&#x8BC1;&#x4E66;&#x548C;&#x79C1;&#x94A5;&#x3002; &#x521B;&#x5EFA; etcd &#x8BC1;&#x4E66;&#x7B7E;&#x540D;&#x8BF7;&#x6C42;&#xFF1A; 1234567891011121314151617181920212223vim etcd-csr.json{ &quot;CN&quot;: &quot;etcd&quot;, &quot;hosts&quot;: [ &quot;127.0.0.1&quot;, &quot;192.168.77.201&quot;, &quot;192.168.77.202&quot;, &quot;192.168.77.203&quot; ], &quot;key&quot;: { &quot;algo&quot;: &quot;rsa&quot;, &quot;size&quot;: 2048 }, &quot;names&quot;: [ { &quot;C&quot;: &quot;CN&quot;, &quot;ST&quot;: &quot;BeiJing&quot;, &quot;L&quot;: &quot;BeiJing&quot;, &quot;O&quot;: &quot;k8s&quot;, &quot;OU&quot;: &quot;System&quot; } ]} hosts &#x5B57;&#x6BB5;&#x6307;&#x5B9A;&#x6388;&#x6743;&#x4F7F;&#x7528;&#x8BE5;&#x8BC1;&#x4E66;&#x7684; etcd &#x8282;&#x70B9; IP&#xFF1B; &#x751F;&#x6210; etcd &#x8BC1;&#x4E66;&#x548C;&#x79C1;&#x94A5;&#xFF1A; 12345678910cfssl gencert -ca=/etc/kubernetes/ssl/ca.pem \ -ca-key=/etc/kubernetes/ssl/ca-key.pem \ -config=/etc/kubernetes/ssl/ca-config.json \ -profile=kubernetes etcd-csr.json | cfssljson -bare etcdls etcd*etcd.csr etcd-csr.json etcd-key.pem etcd.pemmkdir -p /etc/etcd/sslcp etcd*.pem /etc/etcd/sslscp etcd*.pem root@node2:/etc/etcd/sslscp etcd*.pem root@node3:/etc/etcd/ssl &#x521B;&#x5EFA; etcd &#x7684; systemd unit &#x6587;&#x4EF6;12345678910111213141516171819202122232425262728293031323334mkdir -p /var/lib/etcd # &#x5FC5;&#x987B;&#x5148;&#x521B;&#x5EFA;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;vim /lib/systemd/system/etcd.service[Unit]Description=Etcd ServerAfter=network.targetAfter=network-online.targetWants=network-online.targetDocumentation=https://github.com/coreos[Service]Type=notifyWorkingDirectory=/var/lib/etcd/ExecStart=/root/local/bin/etcd \ --name=${NODE_NAME} \ --cert-file=/etc/etcd/ssl/etcd.pem \ --key-file=/etc/etcd/ssl/etcd-key.pem \ --peer-cert-file=/etc/etcd/ssl/etcd.pem \ --peer-key-file=/etc/etcd/ssl/etcd-key.pem \ --trusted-ca-file=/etc/kubernetes/ssl/ca.pem \ --peer-trusted-ca-file=/etc/kubernetes/ssl/ca.pem \ --initial-advertise-peer-urls=https://${NODE_IP}:2380 \ --listen-peer-urls=https://${NODE_IP}:2380 \ --listen-client-urls=https://${NODE_IP}:2379,http://127.0.0.1:2379 \ --advertise-client-urls=https://${NODE_IP}:2379 \ --initial-cluster-token=etcd-cluster-0 \ --initial-cluster=${ETCD_NODES} \ --initial-cluster-state=new \ --data-dir=/var/lib/etcdRestart=on-failureRestartSec=5LimitNOFILE=65536[Install]WantedBy=multi-user.target &#x4E0A;&#x9762;&#x7684;&#x7684;&#x8BFB;&#x53D6;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x7684;&#x6709;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x6682;&#x65F6;&#x8FD8;&#x6CA1;&#x6709;&#x5904;&#x7406;&#x7528;&#x4EE5;&#x4E0B;&#x4F7F;&#x7528;&#x7EDD;&#x5BF9;&#x914D;&#x7F6E;&#x6CA1;&#x6709;&#x95EE;&#x9898;123456789101112131415161718192021222324252627282930313233[Unit]Description=Etcd ServerAfter=network.targetAfter=network-online.targetWants=network-online.targetDocumentation=https://github.com/coreos[Service]Type=notifyWorkingDirectory=/var/lib/etcd/EnvironmentFile=-/etc/etcd/etcd.confExecStart=/root/local/bin/etcd \ --name=etcd-host0 \ --cert-file=/etc/etcd/ssl/etcd.pem \ --key-file=/etc/etcd/ssl/etcd-key.pem \ --peer-cert-file=/etc/etcd/ssl/etcd.pem \ --peer-key-file=/etc/etcd/ssl/etcd-key.pem \ --trusted-ca-file=/etc/kubernetes/ssl/ca.pem \ --peer-trusted-ca-file=/etc/kubernetes/ssl/ca.pem \ --initial-advertise-peer-urls=https://192.168.77.201:2380 \ --listen-peer-urls=https://192.168.77.201:2380 \ --listen-client-urls=https://192.168.77.201:2379,http://127.0.0.1:2379 \ --advertise-client-urls=https://192.168.77.201:2379 \ --initial-cluster-token=etcd-cluster-0 \ --initial-cluster=etcd-host0=https://192.168.77.201:2380,etcd-host1=https://192.168.77.202:2380,etcd-host2=https://192.168.77.203:2380 \ --initial-cluster-state=new \ --data-dir=/var/lib/etcdRestart=on-failureRestartSec=5LimitNOFILE=65536[Install]WantedBy=multi-user.target &#x4E0A;&#x9762;&#x7684;etcd.service&#x9700;&#x8981;&#x590D;&#x5236;&#x5230;&#x96C6;&#x7FA4;&#x7684;2&#x53F0;node&#x8282;&#x70B9;&#xFF0C;&#x9664;&#x4E86;&#x2013;initial-cluster&#x4E0D;&#x9700;&#x8981;&#x52A8;&#xFF0C;&#x2013;name=etcd-host0&#x4FEE;&#x6539;&#x4E3A;&#x5BF9;&#x5E94;&#x7684;&#x8282;&#x70B9;&#x540D;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0D;&#x662F;hostname&#xFF0C;&#x5176;&#x4ED6;&#x53C2;&#x6570;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x6210;&#x5F53;&#x524D;&#x8282;&#x70B9;&#x7684;ip&#xFF1B; &#x6307;&#x5B9A; etcd &#x7684;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x548C;&#x6570;&#x636E;&#x76EE;&#x5F55;&#x4E3A; /var/lib/etcd&#xFF0C;&#x9700;&#x5728;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x524D;&#x521B;&#x5EFA;&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;&#xFF1B; &#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x901A;&#x4FE1;&#x5B89;&#x5168;&#xFF0C;&#x9700;&#x8981;&#x6307;&#x5B9A; etcd &#x7684;&#x516C;&#x79C1;&#x94A5;(cert-file&#x548C;key-file)&#x3001;Peers &#x901A;&#x4FE1;&#x7684;&#x516C;&#x79C1;&#x94A5;&#x548C; CA &#x8BC1;&#x4E66;(peer-cert-file&#x3001;peer-key-file&#x3001;peer-trusted-ca-file)&#x3001;&#x5BA2;&#x6237;&#x7AEF;&#x7684;CA&#x8BC1;&#x4E66;&#xFF08;trusted-ca-file&#xFF09;&#xFF1B; --initial-cluster-state &#x503C;&#x4E3A; new &#x65F6;&#xFF0C;--name &#x7684;&#x53C2;&#x6570;&#x503C;&#x5FC5;&#x987B;&#x4F4D;&#x4E8E; --initial-cluster &#x5217;&#x8868;&#x4E2D;&#xFF1B; &#x5B8C;&#x6574; unit &#x6587;&#x4EF6;&#x89C1;&#xFF1A;etcd.service &#x542F;&#x52A8; etcd &#x670D;&#x52A1;12345cp etcd.service /etc/systemd/system/systemctl daemon-reloadsystemctl enable etcdsystemctl start etcdsystemctl status etcd &#x6700;&#x5148;&#x542F;&#x52A8;&#x7684; etcd &#x8FDB;&#x7A0B;&#x4F1A;&#x5361;&#x4F4F;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF0C;&#x7B49;&#x5F85;&#x5176;&#x5B83;&#x8282;&#x70B9;&#x4E0A;&#x7684; etcd &#x8FDB;&#x7A0B;&#x52A0;&#x5165;&#x96C6;&#x7FA4;&#xFF0C;&#x4E3A;&#x6B63;&#x5E38;&#x73B0;&#x8C61;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x7684;&#x76F8;&#x5173;&#x53C2;&#x6570;&#x5728;&#x6240;&#x6709;&#x7684; etcd &#x8282;&#x70B9;&#x91CD;&#x590D;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;&#x6240;&#x6709;&#x673A;&#x5668;&#x7684; etcd &#x670D;&#x52A1;&#x90FD;&#x5DF2;&#x542F;&#x52A8;&#x3002; &#x5982;&#x679C;&#x6709;&#x9632;&#x706B;&#x5899;&#xFF0C;&#x9700;&#x8981;&#x5F00;&#x653E;2379&#xFF0C;2380firewall-cmd --permanent --zone=public --add-port=2379/tcpfirewall-cmd --permanent --zone=public --add-port=2380/tcp &#x9A8C;&#x8BC1;&#x670D;&#x52A1;&#x90E8;&#x7F72;&#x5B8C; etcd &#x96C6;&#x7FA4;&#x540E;&#xFF0C;&#x5728;&#x4EFB;&#x4E00; etcd &#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x4E0A;&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#xFF1A; 1234567for ip in ${NODE_IPS}; do ETCDCTL_API=3 /root/local/bin/etcdctl \ --endpoints=https://${ip}:2379 \ --cacert=/etc/kubernetes/ssl/ca.pem \ --cert=/etc/etcd/ssl/etcd.pem \ --key=/etc/etcd/ssl/etcd-key.pem \ endpoint health; done &#x8FD4;&#x56DE;&#x4EE5;&#x4E0B;&#x4FE1;&#x606F;&#x5C31;&#x6210;&#x529F;&#x4E86;1234562017-07-06 11:49:21.473944 I | warning: ignoring ServerName for user-provided CA for backwards compatibility is deprecatedhttps://192.168.77.201:2379 is healthy: successfully committed proposal: took = 1.618919ms2017-07-06 11:49:21.510179 I | warning: ignoring ServerName for user-provided CA for backwards compatibility is deprecatedhttps://192.168.77.202:2379 is healthy: successfully committed proposal: took = 1.718529ms2017-07-06 11:49:21.544829 I | warning: ignoring ServerName for user-provided CA for backwards compatibility is deprecatedhttps://192.168.77.203:2379 is healthy: successfully committed proposal: took = 1.99899ms &#x4E09;&#x53F0; etcd &#x7684;&#x8F93;&#x51FA;&#x5747;&#x4E3A; healthy &#x65F6;&#x8868;&#x793A;&#x96C6;&#x7FA4;&#x670D;&#x52A1;&#x6B63;&#x5E38;&#xFF08;&#x5FFD;&#x7565; warning &#x4FE1;&#x606F;&#xFF09;&#x3002; 4.&#x90E8;&#x7F72; kubectl &#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;kubectl &#x9ED8;&#x8BA4;&#x4ECE; ~/.kube/config &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x83B7;&#x53D6;&#x8BBF;&#x95EE; kube-apiserver &#x5730;&#x5740;&#x3001;&#x8BC1;&#x4E66;&#x3001;&#x7528;&#x6237;&#x540D;&#x7B49;&#x4FE1;&#x606F;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x914D;&#x7F6E;&#x8BE5;&#x6587;&#x4EF6;&#xFF0C;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x65F6;&#x51FA;&#x9519;&#xFF1A; 12kubectl get podsThe connection to the server localhost:8080 was refused - did you specify the right host or port? &#x672C;&#x6587;&#x6863;&#x4ECB;&#x7ECD;&#x4E0B;&#x8F7D;&#x548C;&#x914D;&#x7F6E; kubernetes &#x96C6;&#x7FA4;&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177; kubectl &#x7684;&#x6B65;&#x9AA4;&#x3002; &#x9700;&#x8981;&#x5C06;&#x4E0B;&#x8F7D;&#x7684; kubectl &#x4E8C;&#x8FDB;&#x5236;&#x7A0B;&#x5E8F;&#x548C;&#x751F;&#x6210;&#x7684; ~/.kube/config &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x62F7;&#x8D1D;&#x5230;&#x6240;&#x6709;&#x4F7F;&#x7528; kubectl &#x547D;&#x4EE4;&#x7684;&#x673A;&#x5668;&#x3002; &#x4F7F;&#x7528;&#x7684;&#x53D8;&#x91CF;&#x672C;&#x6587;&#x6863;&#x7528;&#x5230;&#x7684;&#x53D8;&#x91CF;&#x5B9A;&#x4E49;&#x5982;&#x4E0B;&#xFF1A; 123# &#x66FF;&#x6362;&#x4E3A; kubernetes maste &#x96C6;&#x7FA4;&#x4EFB;&#x4E00;&#x673A;&#x5668; IPexport MASTER_IP=192.168.77.201 export KUBE_APISERVER=&quot;https://${MASTER_IP}:6443&quot; &#x53D8;&#x91CF; KUBE_APISERVER &#x6307;&#x5B9A; kubelet &#x8BBF;&#x95EE;&#x7684; kube-apiserver &#x7684;&#x5730;&#x5740;&#xFF0C;&#x540E;&#x7EED;&#x88AB;&#x5199;&#x5165; ~/.kube/config &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1B; &#x4E0B;&#x8F7D; kubectl12345wget https://dl.k8s.io/v1.6.2/kubernetes-client-linux-amd64.tar.gztar -xzvf kubernetes-client-linux-amd64.tar.gzcp kubernetes/client/bin/kube* /root/local/bin/chmod a+x /root/local/bin/kube*export PATH=/root/local/bin:$PATH &#x521B;&#x5EFA;-admin-&#x8BC1;&#x4E66;kubectl &#x4E0E; kube-apiserver &#x7684;&#x5B89;&#x5168;&#x7AEF;&#x53E3;&#x901A;&#x4FE1;&#xFF0C;&#x9700;&#x8981;&#x4E3A;&#x5B89;&#x5168;&#x901A;&#x4FE1;&#x63D0;&#x4F9B; TLS &#x8BC1;&#x4E66;&#x548C;&#x79D8;&#x94A5;&#x3002; &#x521B;&#x5EFA; admin &#x8BC1;&#x4E66;&#x7B7E;&#x540D;&#x8BF7;&#x6C42; 123456789101112131415161718vim admin-csr.json{ &quot;CN&quot;: &quot;admin&quot;, &quot;hosts&quot;: [], &quot;key&quot;: { &quot;algo&quot;: &quot;rsa&quot;, &quot;size&quot;: 2048 }, &quot;names&quot;: [ { &quot;C&quot;: &quot;CN&quot;, &quot;ST&quot;: &quot;BeiJing&quot;, &quot;L&quot;: &quot;BeiJing&quot;, &quot;O&quot;: &quot;system:masters&quot;, &quot;OU&quot;: &quot;System&quot; } ]} &#x540E;&#x7EED; kube-apiserver &#x4F7F;&#x7528; RBAC &#x5BF9;&#x5BA2;&#x6237;&#x7AEF;(&#x5982; kubelet&#x3001;kube-proxy&#x3001;Pod)&#x8BF7;&#x6C42;&#x8FDB;&#x884C;&#x6388;&#x6743;&#xFF1B; kube-apiserver &#x9884;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E9B; RBAC &#x4F7F;&#x7528;&#x7684; RoleBindings&#xFF0C;&#x5982; cluster-admin &#x5C06; Group system:masters &#x4E0E; Role cluster-admin &#x7ED1;&#x5B9A;&#xFF0C;&#x8BE5; Role &#x6388;&#x4E88;&#x4E86;&#x8C03;&#x7528;kube-apiserver &#x6240;&#x6709; API&#x7684;&#x6743;&#x9650;&#xFF1B; O &#x6307;&#x5B9A;&#x8BE5;&#x8BC1;&#x4E66;&#x7684; Group &#x4E3A; system:masters&#xFF0C;kubelet &#x4F7F;&#x7528;&#x8BE5;&#x8BC1;&#x4E66;&#x8BBF;&#x95EE; kube-apiserver &#x65F6; &#xFF0C;&#x7531;&#x4E8E;&#x8BC1;&#x4E66;&#x88AB; CA &#x7B7E;&#x540D;&#xFF0C;&#x6240;&#x4EE5;&#x8BA4;&#x8BC1;&#x901A;&#x8FC7;&#xFF0C;&#x540C;&#x65F6;&#x7531;&#x4E8E;&#x8BC1;&#x4E66;&#x7528;&#x6237;&#x7EC4;&#x4E3A;&#x7ECF;&#x8FC7;&#x9884;&#x6388;&#x6743;&#x7684; system:masters&#xFF0C;&#x6240;&#x4EE5;&#x88AB;&#x6388;&#x4E88;&#x8BBF;&#x95EE;&#x6240;&#x6709; API &#x7684;&#x6743;&#x9650;&#xFF1B; hosts &#x5C5E;&#x6027;&#x503C;&#x4E3A;&#x7A7A;&#x5217;&#x8868;&#xFF1B; &#x751F;&#x6210; admin &#x8BC1;&#x4E66;&#x548C;&#x79C1;&#x94A5;&#xFF1A; 12345678cfssl gencert -ca=/etc/kubernetes/ssl/ca.pem \ -ca-key=/etc/kubernetes/ssl/ca-key.pem \ -config=/etc/kubernetes/ssl/ca-config.json \ -profile=kubernetes admin-csr.json | cfssljson -bare adminls admin*admin.csr admin-csr.json admin-key.pem admin.pemcp admin*.pem /etc/kubernetes/ssl/rm admin.csr admin-csr.json &#x521B;&#x5EFA; kubectl kubeconfig &#x6587;&#x4EF6;12345678910111213141516# &#x8BBE;&#x7F6E;&#x96C6;&#x7FA4;&#x53C2;&#x6570;kubectl config set-cluster kubernetes \ --certificate-authority=/etc/kubernetes/ssl/ca.pem \ --embed-certs=true \ --server=${KUBE_APISERVER}# &#x8BBE;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;&#x8BA4;&#x8BC1;&#x53C2;&#x6570;kubectl config set-credentials admin \ --client-certificate=/etc/kubernetes/ssl/admin.pem \ --embed-certs=true \ --client-key=/etc/kubernetes/ssl/admin-key.pem# &#x8BBE;&#x7F6E;&#x4E0A;&#x4E0B;&#x6587;&#x53C2;&#x6570;kubectl config set-context kubernetes \ --cluster=kubernetes \ --user=admin# &#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x4E0A;&#x4E0B;&#x6587;$ kubectl config use-context kubernetes admin.pem &#x8BC1;&#x4E66; O &#x5B57;&#x6BB5;&#x503C;&#x4E3A; system:masters&#xFF0C;kube-apiserver &#x9884;&#x5B9A;&#x4E49;&#x7684; RoleBinding cluster-admin &#x5C06; Group system:masters &#x4E0E; Role cluster-admin &#x7ED1;&#x5B9A;&#xFF0C;&#x8BE5; Role &#x6388;&#x4E88;&#x4E86;&#x8C03;&#x7528;kube-apiserver &#x76F8;&#x5173; API &#x7684;&#x6743;&#x9650;&#xFF1B; &#x751F;&#x6210;&#x7684; kubeconfig &#x88AB;&#x4FDD;&#x5B58;&#x5230; ~/.kube/config &#x6587;&#x4EF6;&#xFF1B; &#x5206;&#x53D1; kubeconfig &#x6587;&#x4EF6;&#x5C06; ~/.kube/config &#x6587;&#x4EF6;&#x62F7;&#x8D1D;&#x5230;&#x8FD0;&#x884C; kubelet &#x547D;&#x4EE4;&#x7684;&#x673A;&#x5668;&#x7684; ~/.kube/ &#x76EE;&#x5F55;&#x4E0B;&#x3002; &#x5F85;&#x7EED; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[如何接受一个新业务的运维工作？]]></title>
    <url>%2F%E8%81%8C%E4%B8%9A%E8%A7%84%E5%88%92%2F2016%2F05%2F02%2F%E5%A6%82%E4%BD%95%E6%8E%A5%E5%8F%97%E4%B8%80%E4%B8%AA%E6%96%B0%E4%B8%9A%E5%8A%A1%E7%9A%84%E8%BF%90%E7%BB%B4%E5%B7%A5%E4%BD%9C.html</url>
    <content type="text"><![CDATA[&#x5BF9;&#x4E11;&#x8BDD;&#x8BF4;&#x524D;&#x5934;&#xFF1A;&#x5148;&#x8DDF;&#x7814;&#x53D1;leader&#x6C9F;&#x901A;&#xFF0C;&#x704C;&#x8F93;&#x8FD0;&#x7EF4;&#x7406;&#x5FF5;&#xFF0C;&#x4E11;&#x8BDD;&#x8BF4;&#x5728;&#x524D;&#x5934;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x505A;&#x4FDD;&#x59C6;&#x5F0F;&#x8FD0;&#x7EF4;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x81F4;&#x529B;&#x4E8E;&#x7EBF;&#x4E0A;&#x670D;&#x52A1;&#x5B89;&#x5168;&#x3001;&#x7A33;&#x5B9A;&#x3001;&#x4F4E;&#x6210;&#x672C;&#x3001;&#x5FEB;&#x901F;&#x8FED;&#x4EE3;&#xFF0C;&#x4ECE;&#x8FD0;&#x7EF4;&#x89C6;&#x89D2;&#x63D0;&#x9AD8;&#x4EA7;&#x54C1;&#x529B;&#x3002;&#x5F00;&#x53D1;&#x673A;&#x3001;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;&#xFF0C;&#x7814;&#x53D1;&#x81EA;&#x5DF1;&#x641E;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x534F;&#x52A9;&#x5E2E;&#x5FD9;&#xFF0C;&#x505A;&#x4E13;&#x4E1A;&#x7684;&#x54A8;&#x8BE2;&#x670D;&#x52A1;&#xFF0C;&#x60F3;&#x8BA9;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x64CD;&#x5200;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x7684;&#x53D8;&#x66F4;&#xFF0C;&#x514D;&#x8C08;&#xFF01; &#x4E1A;&#x52A1;&#x6982;&#x8981;&#x4E86;&#x89E3;&#x4E86;&#x89E3;&#x4E1A;&#x52A1;&#x76F8;&#x5173;&#x7684;&#x4EBA;&#xFF0C;&#x5BF9;&#x5E94;&#x7684;&#x7814;&#x53D1;&#x540C;&#x5B66;&#x3001;&#x7814;&#x53D1;leader&#x3001;&#x6D4B;&#x8BD5;&#x540C;&#x5B66;&#x3001;&#x6D4B;&#x8BD5;leader&#x3001;&#x4EA7;&#x54C1;&#x7ECF;&#x7406;&#x5206;&#x522B;&#x662F;&#x8C01;&#xFF0C;&#x8054;&#x7CFB;&#x65B9;&#x5F0F;&#x5B58;&#x4E0B;&#x6765;&#xFF0C;&#x62C9;&#x4E2A;&#x7FA4;&#xFF0C;&#x51FA;&#x4E86;&#x95EE;&#x9898;&#x53EF;&#x4EE5;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x7684;&#x4EBA;&#x3002; &#x4E86;&#x89E3;&#x670D;&#x52A1;&#x662F;&#x5E72;&#x5565;&#x7684;&#xFF0C;&#x89E3;&#x51B3;&#x4E86;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF0C;&#x4E1A;&#x754C;&#x6709;&#x5BF9;&#x6807;&#x7684;&#x5F00;&#x6E90;&#x4EA7;&#x54C1;&#x5417;&#xFF0C;&#x65B9;&#x4FBF;&#x6211;&#x4EEC;&#x5FEB;&#x901F;&#x8BA4;&#x8BC6;&#x8FD9;&#x4E2A;&#x4EA7;&#x54C1;&#x3002; &#x4E86;&#x89E3;&#x670D;&#x52A1;&#x7684;&#x4E0A;&#x4E0B;&#x6E38;&#xFF0C;&#x4F9D;&#x8D56;&#x54EA;&#x4E9B;&#x670D;&#x52A1;&#xFF0C;&#x54EA;&#x4E9B;&#x670D;&#x52A1;&#x4F9D;&#x8D56;&#x6211;&#xFF0C;&#x5BF9;&#x5E94;&#x7684;&#x63A5;&#x53E3;&#x4EBA;&#x662F;&#x8C01;&#xFF0C;&#x8FD9;&#x91CC;&#x5148;&#x7B80;&#x5355;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#x5373;&#x53EF;&#x3002; &#x4E86;&#x89E3;&#x670D;&#x52A1;&#x90E8;&#x7F72;&#x60C5;&#x51B5;&#xFF0C;&#x90E8;&#x7F72;&#x5728;&#x54EA;&#x4E9B;&#x673A;&#x623F;&#xFF0C;&#x7528;&#x4EC0;&#x4E48;&#x8BED;&#x8A00;&#x7F16;&#x5199;&#x7684;&#xFF0C;&#x57FA;&#x7840;&#x7F51;&#x7EDC;&#x3001;&#x4E13;&#x7EBF;&#x5E26;&#x5BBD;&#x3001;&#x673A;&#x623F;&#x51FA;&#x53E3;&#x662F;&#x5426;&#x9760;&#x8C31;&#xFF0C;&#x662F;&#x5426;&#x66FE;&#x56E0;&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#x5BFC;&#x81F4;&#x8FC7;&#x95EE;&#x9898;&#xFF0C;&#x5F53;&#x524D;&#x4E3B;&#x8981;&#x75DB;&#x70B9;&#x662F;&#x4EC0;&#x4E48;&#x3002; &#x4E1A;&#x52A1;&#x4E32;&#x8BB2;&#x8981;&#x6C42;&#x7814;&#x53D1;&#x540C;&#x5B66;&#xFF08;&#x6216;&#x8005;&#x4E0A;&#x4E00;&#x4EFB;&#x8FD0;&#x7EF4;&#x540C;&#x5B66;&#xFF09;&#x51C6;&#x5907;PPT&#xFF0C;&#x505A;&#x4E00;&#x4E2A;&#x4E1A;&#x52A1;&#x4E32;&#x8BB2;&#xFF0C;&#x8BB2;&#x89E3;&#x4E00;&#x4E9B;&#x7814;&#x53D1;&#x540C;&#x5B66;&#x5E0C;&#x671B;&#x4F20;&#x8FBE;&#x7ED9;&#x8FD0;&#x7EF4;&#x540C;&#x5B66;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x8BB2;&#x89E3;&#x4E00;&#x4E9B;&#x8FD0;&#x7EF4;&#x540C;&#x5B66;&#x5E0C;&#x671B;&#x4ECE;&#x7814;&#x53D1;&#x8FD9;&#x5F97;&#x5230;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x6BD4;&#x5982;&#xFF1A;&#x8BE6;&#x7EC6;&#x90E8;&#x7F72;&#x62D3;&#x6251;&#x3001;&#x670D;&#x52A1;&#x6574;&#x4F53;&#x67B6;&#x6784;&#x3001;&#x6570;&#x636E;&#x6D41;&#x3001;&#x63D0;&#x6D4B;&#x53D8;&#x66F4;&#x6D41;&#x7A0B;&#x3001;&#x76D1;&#x63A7;&#x65B9;&#x5F0F;&#x3001;&#x90E8;&#x7F72;&#x5230;&#x4E86;&#x54EA;&#x4E9B;&#x673A;&#x5668;&#x3001;&#x673A;&#x5668;&#x767B;&#x5F55;&#x65B9;&#x5F0F;&#x3001;&#x6BCF;&#x4E2A;&#x673A;&#x5668;&#x4E0A;&#x662F;&#x4EC0;&#x4E48;&#x6A21;&#x5757;&#x3001;OS&#x53C2;&#x6570;&#x662F;&#x5426;&#x6709;&#x8C03;&#x4F18;&#xFF0C;&#x8003;&#x91CF;&#x662F;&#x4EC0;&#x4E48;&#x3001;&#x7528;&#x5230;&#x4E86;&#x54EA;&#x4E9B;&#x7B2C;&#x4E09;&#x65B9;&#x8F6F;&#x4EF6;&#xFF0C;&#x8003;&#x91CF;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x6BD4;&#x5982;&#x4E3A;&#x5565;&#x7528;&#x4E86;tomcat&#x800C;&#x4E0D;&#x662F;resin&#x3001;&#x76F8;&#x5173;wiki&#x3001;&#x6545;&#x969C;&#x5904;&#x7406;&#x9884;&#x6848;&#x3001;&#x5E38;&#x89C1;&#x6545;&#x969C;&#x3001;&#x5F53;&#x524D;&#x7EBF;&#x4E0A;&#x95EE;&#x9898;&#x2026;&#x2026;&#x7B49;&#x7B49; &#x5982;&#x679C;&#x4E1A;&#x52A1;&#x6709;&#x5355;&#x70B9;&#xFF0C;&#x4E0D;&#x63A5;&#xFF0C;&#x8BA9;&#x7814;&#x53D1;&#x6539;&#x9020;&#x3002;&#x5982;&#x679C;&#x8FD0;&#x7EF4;&#x7684;&#x8001;&#x677F;&#x7684;&#x8001;&#x677F;&#x5F3A;&#x5236;&#x8981;&#x6C42;&#xFF0C;&#x4E11;&#x8BDD;&#x8BF4;&#x524D;&#x5934;&#xFF1A;&#x56E0;&#x5355;&#x70B9;&#x5BFC;&#x81F4;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x8FD0;&#x7EF4;&#x4E0D;&#x80CC;&#x9505;&#x3002; &#x8D44;&#x4EA7;&#x68B3;&#x7406;&#x6B63;&#x5F0F;&#x51C6;&#x5907;&#x63A5;&#x624B;&#xFF0C;&#x7B2C;&#x4E00;&#x6B65;&#xFF0C;&#x68B3;&#x7406;&#x8D44;&#x4EA7;&#x3002;&#x6BD4;&#x5982;&#x7528;&#x5230;&#x4E86;&#x54EA;&#x4E9B;&#x57DF;&#x540D;&#xFF0C;&#x8FD9;&#x4E9B;&#x57DF;&#x540D;&#x5BF9;&#x5E94;&#x54EA;&#x4E9B;&#x4E1A;&#x52A1;&#x3001;&#x54EA;&#x4E9B;&#x865A;IP&#xFF0C;&#x5206;&#x522B;&#x662F;&#x63D0;&#x4F9B;&#x4E86;&#x4EC0;&#x4E48;&#x670D;&#x52A1;&#x3001;&#x54EA;&#x4E9B;&#x673A;&#x5668;&#xFF0C;&#x5206;&#x522B;&#x90E8;&#x7F72;&#x4E86;&#x4EC0;&#x4E48;&#x6A21;&#x5757;&#x3001;&#x4E1A;&#x52A1;&#x5728;&#x54EA;&#x4E9B;&#x673A;&#x623F;&#x3001;&#x7528;&#x4E86;&#x591A;&#x5C11;&#x5E26;&#x5BBD;&#x3001;&#x603B;&#x5E26;&#x5BBD;&#x60C5;&#x51B5;&#x3001;&#x662F;&#x5426;&#x6709;&#x5176;&#x4ED6;&#x4E1A;&#x52A1;&#x5171;&#x7528;&#x4E89;&#x62A2;&#x3002; &#x673A;&#x5668;&#x9700;&#x8981;&#x62FF;&#x5230;&#x66F4;&#x8BE6;&#x5C3D;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x6BD4;&#x5982;&#x673A;&#x5668;&#x914D;&#x7F6E;&#x3001;&#x673A;&#x67B6;&#x4F4D;&#x3001;IP&#x3001;&#x7BA1;&#x7406;&#x5361;IP&#x7B49;&#x7B49;&#xFF0C;&#x516C;&#x53F8;&#x5E94;&#x8BE5;&#x6709;&#x4E2A;CMDB&#x4F9B;&#x67E5;&#x8BE2;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#xFF0C;&#x8FD0;&#x7EF4;&#x540C;&#x5B66;&#xFF0C;&#x9700;&#x8981;&#x4F60;&#x53BB;&#x6784;&#x5EFA;&#x8FD9;&#x4E2A;CMDB&#x3002; &#x540E;&#x9762;&#x8981;&#x8003;&#x8651;&#x673A;&#x5668;&#x662F;&#x5426;&#x9700;&#x8981;&#x6709;&#x5907;&#x673A;&#x3001;&#x5907;&#x4EF6;&#xFF0C;&#x673A;&#x578B;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x7EDF;&#x4E00;&#x3002; &#x57FA;&#x7840;&#x76D1;&#x63A7;&#x77E5;&#x9053;&#x6709;&#x54EA;&#x4E9B;&#x8D44;&#x4EA7;&#x4E86;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5BF9;&#x8FD9;&#x4E9B;&#x8D44;&#x4EA7;&#x505A;&#x76D1;&#x63A7;&#x4E86;&#xFF0C;&#x6BD4;&#x5982;&#x57DF;&#x540D;&#x8FDE;&#x901A;&#x6027;&#x76D1;&#x63A7;/&#x5EF6;&#x8FDF;&#x76D1;&#x63A7;&#x3001;&#x865A;IP&#x7684;&#x8FDE;&#x901A;&#x6027;&#x76D1;&#x63A7;/&#x5EF6;&#x8FDF;&#x76D1;&#x63A7;&#x3001;&#x673A;&#x5668;&#x5B95;&#x673A;&#x76D1;&#x63A7;&#x3001;&#x673A;&#x5668;&#x786C;&#x4EF6;&#x76D1;&#x63A7;&#x3001;sshd/crond&#x7B49;&#x7CFB;&#x7EDF;&#x8FDB;&#x7A0B;&#x76D1;&#x63A7;&#x3001;&#x7CFB;&#x7EDF;&#x8FD0;&#x884C;&#x7684;&#x8FDB;&#x7A0B;&#x603B;&#x6570;&#x76D1;&#x63A7;&#x3001;&#x7CFB;&#x7EDF;&#x53C2;&#x6570;&#x914D;&#x7F6E;&#x76D1;&#x63A7;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x770B;&#x6211;&#x4E4B;&#x524D;&#x7684;&#x6587;&#x7AE0;&#x300A;&#x5B8C;&#x5907;&#x7684;&#x76D1;&#x63A7;&#x5E94;&#x8986;&#x76D6;&#x4EC0;&#x4E48;&#x300B; &#x670D;&#x52A1;&#x68B3;&#x7406;&#x5403;&#x900F;&#x4E4B;&#x524D;&#x4E32;&#x8BB2;&#x65F6;&#x7ED9;&#x7684;&#x67B6;&#x6784;&#x56FE;&#x3001;&#x6570;&#x636E;&#x6D41;&#x56FE;&#x3001;&#x90E8;&#x7F72;&#x62D3;&#x6251;&#x56FE;&#x3002;&#x4ECE;&#x8FD0;&#x7EF4;&#x5C42;&#x9762;&#xFF0C;&#x6700;&#x597D;&#x8FD8;&#x8981;&#x77E5;&#x9053;&#x516C;&#x53F8;&#x7F51;&#x7EDC;&#x62D3;&#x6251;&#x56FE;&#x3002; &#x4E86;&#x89E3;&#x6BCF;&#x4E2A;&#x6A21;&#x5757;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x90E8;&#x7F72;&#x5728;&#x54EA;&#x4E9B;&#x673A;&#x5668;&#x4E0A;&#xFF0C;&#x90E8;&#x7F72;&#x5728;&#x54EA;&#x4E2A;&#x76EE;&#x5F55;&#xFF0C;&#x7528;&#x4EC0;&#x4E48;&#x8D26;&#x53F7;&#x542F;&#x52A8;&#x7684;&#xFF0C;&#x65E5;&#x5FD7;&#x6253;&#x5230;&#x54EA;&#x91CC;&#x4E86;&#xFF0C;&#x7528;&#x4EC0;&#x4E48;&#x8BED;&#x8A00;&#x7F16;&#x5199;&#x7684;&#xFF0C;&#x600E;&#x4E48;&#x4E0A;&#x7EBF;&#x7684;&#xFF0C;&#x4E3B;&#x8981;&#x5403;CPU&#x8D44;&#x6E90;&#x8FD8;&#x662F;&#x5185;&#x5B58;&#x8FD8;&#x662F;&#x78C1;&#x76D8;&#x8FD8;&#x662F;IO&#xFF0C;&#x9700;&#x8981;&#x9884;&#x7559;&#x591A;&#x5C11;&#x8D44;&#x6E90;&#xFF0C;&#x5E73;&#x65F6;&#x5229;&#x7528;&#x7387;&#x662F;&#x591A;&#x5C11;&#xFF0C;&#x5E94;&#x8BE5;&#x914D;&#x7F6E;&#x591A;&#x5927;&#x7684;&#x9608;&#x503C;&#x505A;&#x76D1;&#x63A7;&#xFF0C;&#x662F;&#x5426;&#x9700;&#x8981;watchdog&#x81EA;&#x52A8;&#x62C9;&#x8D77;&#xFF0C;&#x65E5;&#x5FD7;&#x91CC;&#x51FA;&#x73B0;&#x54EA;&#x4E9B;&#x5173;&#x952E;&#x5B57;&#x9700;&#x8981;&#x62A5;&#x8B66;&#xFF0C;&#x4EE5;&#x53CA;&#x5176;&#x4ED6;&#x5404;&#x79CD;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x95EE;&#x9898;&#x3002; &#x4E1A;&#x52A1;&#x76D1;&#x63A7;&#x57FA;&#x672C;&#x7684;&#x8FDB;&#x7A0B;&#x3001;&#x7AEF;&#x53E3;&#x5B58;&#x6D3B;&#x6027;&#x76D1;&#x63A7;&#xFF0C;&#x673A;&#x5668;&#x5229;&#x7528;&#x7387;&#x76D1;&#x63A7;&#x3001;&#x65E5;&#x5FD7;&#x5173;&#x952E;&#x5B57;&#x76D1;&#x63A7;&#x3001;&#x65E5;&#x5FD7;&#x4E0D;&#x6EDA;&#x52A8;&#x76D1;&#x63A7;&#x3001;&#x5173;&#x8054;&#x7684;&#x670D;&#x52A1;&#x7684;&#x76D1;&#x63A7;&#x7B49;&#x7B49;&#xFF0C;&#x540E;&#x9762;&#x4F1A;&#x505A;API&#x7C92;&#x5EA6;&#x7684;&#x76D1;&#x63A7;&#xFF0C;&#x6765;&#x63A8;&#x52A8;&#x4E1A;&#x52A1;&#x4F18;&#x5316;&#x3002; &#x6807;&#x51C6;&#x5316;&#x6539;&#x9020;&#x673A;&#x5668;&#x547D;&#x540D;&#x65B9;&#x5F0F;&#x3001;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x53D1;&#x884C;&#x7248;&#x3001;OS&#x7248;&#x672C;&#x3001;&#x7B2C;&#x4E09;&#x65B9;&#x8F6F;&#x4EF6;&#xFF0C;&#x6BD4;&#x5982;jdk&#x3001;tomcat&#x3001;nginx&#xFF0C;&#x90FD;&#x8981;&#x7EDF;&#x4E00;&#xFF0C;&#x505A;&#x6807;&#x51C6;&#x5316;&#x65B9;&#x6848;&#x3002; &#x670D;&#x52A1;&#x6269;&#x5BB9;&#x3001;&#x53D8;&#x66F4;&#x3001;&#x4E0B;&#x7EBF;&#x505A;&#x4E00;&#x952E;&#x5316;&#xFF0C;&#x6BCF;&#x6B21;&#x5347;&#x7EA7;&#x53EA;&#x9700;&#x8981;&#x7ED9;&#x4E2A;&#x7248;&#x672C;&#x53F7;&#x5373;&#x53EF;&#xFF0C;&#x6B64;&#x65F6;&#x7814;&#x53D1;&#x64CD;&#x4F5C;&#x8FD8;&#x662F;&#x8FD0;&#x7EF4;&#x64CD;&#x4F5C;&#x6548;&#x679C;&#x4E00;&#x6837;&#xFF0C;&#x6545;&#x800C;&#x53EF;&#x4EE5;&#x4EA4;&#x7ED9;&#x7814;&#x53D1;&#x4E0A;&#x7EBF;&#xFF0C;&#x91CA;&#x653E;&#x8FD0;&#x7EF4;&#x4EBA;&#x529B;&#xFF0C;&#x6743;&#x9650;&#x8981;&#x63A7;&#x5236;&#x597D;&#x3002; &#x91CD;&#x590D;&#x7684;&#x5E38;&#x89C4;&#x64CD;&#x4F5C;&#x4E5F;&#x8981;&#x56FA;&#x5316;&#x6210;&#x811A;&#x672C;&#xFF0C;&#x4E00;&#x952E;&#x5B8C;&#x6210;&#x3002; &#x68B3;&#x7406;&#x6545;&#x969C;&#x81EA;&#x6108;&#x573A;&#x666F;&#xFF0C;&#x770B;&#x5E73;&#x65F6;&#x6709;&#x54EA;&#x4E9B;&#x6545;&#x969C;&#x7684;&#x5904;&#x7406;&#x65B9;&#x5F0F;&#x662F;&#x56FA;&#x5B9A;&#x7684;&#xFF0C;&#x62BD;&#x8C61;&#x4E3A;&#x811A;&#x672C;&#xFF0C;&#x62A5;&#x8B66;&#x4E4B;&#x540E;&#x81EA;&#x52A8;&#x89E6;&#x53D1;&#xFF0C;&#x65E0;&#x4EBA;&#x503C;&#x5B88;&#x5904;&#x7406;&#x3002; &#x516C;&#x53F8;&#x5982;&#x679C;&#x6709;&#x4E00;&#x4E9B;&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#xFF0C;&#x6BD4;&#x5982;&#x540D;&#x5B57;&#x670D;&#x52A1;&#x3001;MQ&#x3001;&#x65E5;&#x5FD7;&#x5E73;&#x53F0;&#xFF0C;&#x63A8;&#x52A8;&#x7814;&#x53D1;&#x6539;&#x9020;&#xFF0C;&#x5C06;&#x65B0;&#x670D;&#x52A1;&#x63A5;&#x5165;&#x3002;&#x5982;&#x679C;&#x516C;&#x53F8;&#x8FD8;&#x6CA1;&#x6709;&#x8FD9;&#x4E9B;&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#xFF0C;&#x4F5C;&#x4E3A;&#x8FD0;&#x7EF4;&#x8FD9;&#x4E2A;&#x89D2;&#x8272;&#xFF0C;&#x53EF;&#x4EE5;&#x7740;&#x624B;&#x641E;&#x8D77;&#x3002; SOP&#x68B3;&#x7406;&#x6545;&#x969C;&#x9884;&#x6848;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x7EBF;&#x4E0A;&#x6CA1;&#x51FA;&#x6545;&#x969C;&#x4E4B;&#x524D;&#xFF0C;&#x5C31;&#x5E94;&#x8BE5;&#x63D0;&#x524D;&#x53BB;&#x60F3;&#xFF0C;&#x670D;&#x52A1;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x4EC0;&#x4E48;&#x6545;&#x969C;&#xFF0C;&#x5982;&#x679C;&#x771F;&#x51FA;&#x4E86;&#xFF0C;&#x5E94;&#x8BE5;&#x5982;&#x4F55;&#x5904;&#x7406;&#xFF0C;&#x628A;&#x5904;&#x7406;&#x6B65;&#x9AA4;&#x63D0;&#x524D;&#x8BB0;&#x5F55;&#x4E0B;&#x6765;&#x3002;&#x6BD5;&#x7ADF;&#xFF0C;&#x7EBF;&#x4E0A;&#x51FA;&#x6545;&#x969C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4EBA;&#x90FD;&#x6BD4;&#x8F83;&#x7D27;&#x5F20;&#xFF0C;&#x76F4;&#x63A5;&#x770B;&#x7740;&#x9884;&#x6848;&#x5904;&#x7406;&#xFF0C;&#x5C31;&#x8E0F;&#x5B9E;&#x4E0D;&#x5C11;&#xFF0C;&#x4E0D;&#x5BB9;&#x6613;&#x51FA;&#x9519;&#x3002; &#x6545;&#x969C;&#x6F14;&#x7EC3;&#x5149;&#x6709;&#x9884;&#x6848;&#x6CA1;&#x6709;&#x6F14;&#x7EC3;&#xFF0C;&#x662F;&#x4E0D;&#x9760;&#x8C31;&#x7684;&#xFF0C;&#x6CA1;&#x6709;&#x7ECF;&#x8FC7;&#x9A8C;&#x8BC1;&#x7684;&#x9884;&#x6848;&#x662F;&#x4E0D;&#x53EF;&#x4FE1;&#x4EFB;&#x7684;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x641E;&#x4E2A;&#x653E;&#x706B;&#x6F14;&#x4E60;&#xFF0C;&#x628A;&#x6A21;&#x5757;&#x641E;&#x6302;&#x8BD5;&#x4E00;&#x628A;&#xFF0C;&#x628A;&#x673A;&#x5668;&#x641E;&#x6302;&#x8BD5;&#x4E00;&#x628A;&#xFF0C;&#x5BF9;&#x7EBF;&#x4E0A;&#x7A33;&#x5B9A;&#x6027;&#x7EDD;&#x5BF9;&#x4F1A;&#x6709;&#x63D0;&#x5347;&#x3002; &#x7279;&#x522B;&#x662F;&#x7814;&#x53D1;&#x8BF4;&#x8FD9;&#x4E2A;&#x6A21;&#x5757;&#x6302;&#x6389;&#xFF0C;&#x53EF;&#x7528;&#x6027;&#x80AF;&#x5B9A;&#x6CA1;&#x5F71;&#x54CD;&#xFF0C;OK&#xFF0C;&#x641E;&#x6302;&#x8BD5;&#x8BD5;&#x5148;&#x3002;&#x5F88;&#x53EF;&#x80FD;&#x4F1A;&#x6253;&#x4ED6;&#x8138;&#xFF0C;-_-|| &#x6709;&#x4E9B;&#x573A;&#x666F;&#x6F14;&#x7EC3;&#x662F;&#x4F1A;&#x6709;&#x635F;&#x7684;&#x3002;&#x8FD9;&#x79CD;&#x573A;&#x666F;&#x8FD8;&#x8981;&#x4E0D;&#x8981;&#x6F14;&#x7EC3;&#xFF1F;&#x8FD9;&#x4E2A;&#x9700;&#x8981;case by case&#x7684;&#x770B;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x60C5;&#x51B5;&#x90FD;&#x662F;&#x8981;&#x505A;&#x6F14;&#x7EC3;&#x4F1A;&#x66F4;&#x597D;&#xFF0C;&#x6BD5;&#x7ADF;&#xFF0C;&#x4EBA;&#x5728;&#x8FD9;&#x76EF;&#x7740;&#x7684;&#x65F6;&#x5019;&#x51FA;&#x95EE;&#x9898;&#xFF0C;&#x6BD4;&#x665A;&#x4E0A;&#x7761;&#x7740;&#x4E86;&#x51FA;&#x4E86;&#x95EE;&#x9898;&#x8981;&#x5F3A;&#x592A;&#x591A;&#x3002;&#x5F53;&#x7136;&#xFF0C; &#x5927;&#x89C4;&#x6A21;&#x57FA;&#x7840;&#x7F51;&#x7EDC;&#x6545;&#x969C;&#x8FD9;&#x79CD;&#x6F14;&#x7EC3;&#xFF0C;&#x8FD8;&#x662F;&#x7B97;&#x4E86;&#x5427;&#xFF0C;&#x901A;&#x5E38;&#x7684;&#x4E1A;&#x52A1;&#x90FD;&#x662F;&#x4E0D;&#x5177;&#x5907;&#x673A;&#x623F;&#x7EA7;&#x5BB9;&#x707E;&#x7684;&#xFF0C;&#x5475;&#x5475; &#x4E0A;&#x9762;&#x505A;&#x5B8C;&#x4E86;&#xFF0C;&#x57FA;&#x672C;&#x5DE5;&#x4F5C;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x3002;&#x4E0A;&#x9762;&#x5F88;&#x591A;&#x4E8B;&#x60C5;&#x90FD;&#x662F;&#x4E00;&#x6B21;&#x6027;&#x7684;&#xFF0C;&#x90A3;&#x672A;&#x6765;&#x7684;&#x5927;&#x628A;&#x65F6;&#x95F4;&#x8FD0;&#x7EF4;&#x505A;&#x5565;&#xFF1F; &#x9664;&#x4E86;&#x518D;&#x82B1;&#x8D39;&#x90E8;&#x5206;&#x65F6;&#x95F4;&#x505A;&#x7EBF;&#x4E0A;&#x95EE;&#x9898;&#x5904;&#x7406;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x628A;&#x4E3B;&#x8981;&#x7CBE;&#x529B;&#x6765;&#x63D0;&#x5347;&#x4E1A;&#x52A1;&#x4EA7;&#x54C1;&#x529B;&#x3002;&#x505A;&#x7CBE;&#x7EC6;&#x5316;&#x8FD0;&#x7EF4;&#xFF0C;&#x8FD8;&#x8BB0;&#x5F97;&#x8FD0;&#x7EF4;&#x4E5D;&#x5B57;&#x771F;&#x8A00;&#x4E48;&#xFF1F;&#x201C;&#x5B89;&#x5168;&#x7A33;&#x5B9A;&#x9AD8;&#x6548;&#x4F4E;&#x6210;&#x672C;&#x201D;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x7684;&#x5DE5;&#x4F5C;&#x65B9;&#x5411;&#x3002;&#x4E0B;&#x9762;&#x4E3E;&#x51E0;&#x4E2A;&#x4F8B;&#x5B50;&#x3002; &#x518D;&#x8C08;&#x4E1A;&#x52A1;&#x76D1;&#x63A7;&#x4E0A;&#x9762;&#x8C08;&#x5230;&#x8FC7;&#x4E00;&#x6B21;&#x4E1A;&#x52A1;&#x76D1;&#x63A7;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x4E00;&#x4E9B;&#x901A;&#x7528;&#x7684;&#x76D1;&#x63A7;&#x6307;&#x6807;&#x3002;&#x6211;&#x4EEC;&#x5BF9;&#x4EA7;&#x54C1;&#x4E86;&#x89E3;&#x8DB3;&#x591F;&#x4E4B;&#x540E;&#xFF0C;&#x5E94;&#x8BE5;&#x505A;&#x4E00;&#x4E9B;&#x4E1A;&#x52A1;&#x7279;&#x6709;&#x7684;&#x76D1;&#x63A7;&#xFF0C;&#x63A8;&#x52A8;&#x7814;&#x53D1;&#x53BB;&#x505A;&#x4E5F;&#x53EF;&#x4EE5;&#xFF0C;&#x8FBE;&#x5230;&#x6548;&#x679C;&#x5C31;&#x597D;&#x3002; &#x6BD4;&#x5982;&#x4F60;&#x8FD0;&#x7EF4;&#x4E86;&#x4E00;&#x4E2A;MQ&#xFF0C;&#x6D88;&#x606F;&#x5806;&#x79EF;&#x91CF;&#x662F;&#x9700;&#x8981;&#x76D1;&#x63A7;&#x6EF4;&#xFF1B;&#x6BD4;&#x5982;&#x4F60;&#x8FD0;&#x7EF4;&#x4E86;&#x4E00;&#x4E2A;RPC&#x670D;&#x52A1;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x4E09;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x8FD9;&#x4E09;&#x4E2A;&#x63A5;&#x53E3;&#x7684;&#x54CD;&#x5E94;&#x65F6;&#x957F;&#x3001;&#x6210;&#x529F;&#x7387;&#x662F;&#x9700;&#x8981;&#x76D1;&#x63A7;&#x6EF4;&#xFF1B;&#x6BD4;&#x5982;&#x4F60;&#x8FD0;&#x7EF4;&#x4E86;&#x4E00;&#x4E2A;S3&#x670D;&#x52A1;&#xFF0C;&#x6BCF;&#x4E2A;&#x6876;&#x7684;&#x77ED;&#x671F;&#x5E26;&#x5BBD;&#x589E;&#x91CF;&#x4F60;&#x662F;&#x9700;&#x8981;&#x76D1;&#x63A7;&#x6EF4;&#xFF1B;&#x6709;&#x90A3;&#x4E48;&#x70B9;&#x611F;&#x89C9;&#x4E86;&#x4E48;&#xFF1F; :) API&#x6210;&#x529F;&#x7387;&#x3001;&#x5EF6;&#x8FDF;&#x7EDF;&#x8BA1;&#x5728;&#x6D41;&#x91CF;&#x5165;&#x53E3;&#x7684;nginx&#x505A;&#x6240;&#x6709;&#x4E1A;&#x52A1;&#x7EBF;&#x7684;&#x6240;&#x6709;API&#x7684;&#x6210;&#x529F;&#x7387;&#x548C;&#x5EF6;&#x8FDF;&#x7EDF;&#x8BA1;&#xFF0C;&#x662F;&#x975E;&#x5E38;&#x6709;&#x5FC5;&#x8981;&#x7684;&#x3002;&#x628A;&#x6210;&#x529F;&#x7387;&#x6BD4;&#x8F83;&#x4F4E;&#x7684;TopN&#x627E;&#x51FA;&#x6765;&#xFF0C;&#x628A;&#x5EF6;&#x8FDF;&#x6BD4;&#x8F83;&#x5927;&#x7684;TopN&#x627E;&#x51FA;&#x6765;&#xFF0C;&#x8BA9;&#x4E1A;&#x52A1;&#x53BB;&#x4F18;&#x5316;&#x3002;&#x8001;&#x677F;&#x4F1A;&#x559C;&#x6B22;&#x8FD9;&#x4E2A;&#x7684;&#x3002; &#x7EBF;&#x4E0A;&#x95EE;&#x9898;&#x68B3;&#x7406;&#x6574;&#x7406;&#x7EBF;&#x4E0A;&#x6240;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x6328;&#x4E2A;&#x89E3;&#x51B3;&#xFF0C;&#x8FD0;&#x7EF4;&#x53EF;&#x4EE5;&#x641E;&#x5B9A;&#x7684;&#x8FD0;&#x7EF4;&#x641E;&#x5B9A;&#xFF0C;&#x8FD0;&#x7EF4;&#x641E;&#x4E0D;&#x5B9A;&#x7684;&#x627E;&#x7814;&#x53D1;&#x8981;&#x6392;&#x671F;&#xFF0C;&#x6BCF;&#x5468;&#x89E3;&#x51B3;&#x4E86;&#x591A;&#x5C11;&#x95EE;&#x9898;&#xFF0C;&#x8FD8;&#x6709;&#x591A;&#x5C11;&#x95EE;&#x9898;&#x5F85;&#x89E3;&#x51B3;&#xFF0C;&#x7528;&#x5468;&#x62A5;&#x7684;&#x65B9;&#x5F0F;&#x4F53;&#x73B0;&#x51FA;&#x6765;&#x3002; &#x6210;&#x672C;&#x4F18;&#x5316;&#x901A;&#x8FC7;&#x670D;&#x52A1;&#x6DF7;&#x90E8;&#x3001;&#x6216;&#x8005;&#x7EDF;&#x4E00;&#x7684;&#x8D44;&#x6E90;&#x8C03;&#x5EA6;&#x5E73;&#x53F0;&#x6765;&#x8282;&#x7701;&#x673A;&#x5668;&#x8D44;&#x6E90;&#xFF0C;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x4FBF;&#x5B9C;&#x7684;&#x4E5F;&#x597D;&#x51E0;&#x4E07;&#x5462;&#xFF0C;&#x8FD9;&#x4E2A;&#x4E8B;&#x662F;&#x6BD4;&#x8F83;&#x5BB9;&#x6613;&#x6709;&#x4EA7;&#x51FA;&#x7684;&#x3002; &#x5BB9;&#x91CF;&#x89C4;&#x5212;&#x5BB9;&#x91CF;&#x89C4;&#x5212;&#x548C;&#x6210;&#x672C;&#x4F18;&#x5316;&#x5B9E;&#x9645;&#x662F;&#x7D27;&#x5BC6;&#x76F8;&#x5173;&#x7684;&#xFF0C;&#x5BB9;&#x91CF;&#x89C4;&#x5212;&#x7684;&#x91CD;&#x70B9;&#x662F;&#x6839;&#x636E;&#x81EA;&#x7136;&#x589E;&#x91CF;&#x548C;&#x8FD0;&#x8425;&#x9700;&#x6C42;&#xFF0C;&#x63D0;&#x524D;&#x89C4;&#x5212;&#x51C6;&#x5907;&#x76F8;&#x5E94;&#x7684;&#x5BB9;&#x91CF;&#xFF0C;&#x5BB9;&#x91CF;&#x53EF;&#x80FD;&#x5305;&#x62EC;&#x5E26;&#x5BBD;&#x3001;&#x4E13;&#x7EBF;&#x3001;&#x7F51;&#x7EDC;&#x8BBE;&#x5907;&#x3001;&#x673A;&#x5668;&#x7B49;&#x7B49;&#xFF1B;&#x5F53;&#x4E1A;&#x52A1;&#x91CF;&#x4E0B;&#x6765;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x817E;&#x632A;&#x76F8;&#x5173;&#x8D44;&#x6E90;&#x652F;&#x6301;&#x5176;&#x4ED6;&#x4E1A;&#x52A1;&#x7EBF;&#xFF0C;&#x8BA9;&#x8FD9;&#x4E9B;&#x786C;&#x4EF6;&#x5C3D;&#x91CF;&#x6EE1;&#x8D1F;&#x8377;&#x8FD0;&#x8F6C;&#xFF0C;&#x7269;&#x6709;&#x6240;&#x503C;&#x3002; &#x4E1A;&#x52A1;&#x7CBE;&#x7EC6;&#x5316;&#x8FD0;&#x7EF4;&#x53EF;&#x4EE5;&#x60F3;&#x51FA;&#x5404;&#x79CD;&#x4E8B;&#x60C5;&#x6765;&#x641E;&#xFF0C;&#x9664;&#x4E86;&#x505A;&#x8FD9;&#x4E8B;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x9700;&#x8981;&#x957F;&#x671F;&#x6295;&#x5165;&#x7684;&#x662F;&#x6784;&#x5EFA;&#x8FD0;&#x7EF4;&#x57FA;&#x7840;&#x5E73;&#x53F0;&#xFF0C;&#x50CF;&#x4EC0;&#x4E48;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x3001;&#x90E8;&#x7F72;&#x7CFB;&#x7EDF;&#x3001;&#x4EA7;&#x54C1;&#x5E93;&#x3001;&#x8D44;&#x6E90;&#x5229;&#x7528;&#x7387;&#x5E73;&#x53F0;&#x3001;&#x57DF;&#x540D;&#x7BA1;&#x7406;&#x3001;&#x56DB;&#x4E03;&#x5C42;&#x63A5;&#x5165;&#x914D;&#x7F6E;&#x5E73;&#x53F0;&#x3001;&#x65E5;&#x5FD7;&#x5E73;&#x53F0;&#x3001;Trace&#x7CFB;&#x7EDF;&#x7B49;&#x7B49;&#x7B49;&#x7B49;&#xFF0C;&#x55EF;&#xFF0C;&#x5176;&#x5B9E;&#x8FD0;&#x7EF4;&#x8FD8;&#x662F;&#x633A;&#x5FD9;&#x7684;&#x3002; &#x5173;&#x4E8E;&#x6C9F;&#x901A;&#x6700;&#x540E;&#x8BF4;&#x4E00;&#x70B9;&#xFF0C;&#x63A5;&#x624B;&#x4E00;&#x4E2A;&#x65B0;&#x4E1A;&#x52A1;&#x8FD0;&#x7EF4;&#xFF0C;&#x52BF;&#x5FC5;&#x4E0E;&#x7814;&#x53D1;&#x6709;&#x5404;&#x79CD;&#x6C9F;&#x901A;&#xFF0C;&#x6BCF;&#x6B21;&#x6C9F;&#x901A;&#x90FD;&#x8981;&#x5199;&#x4F1A;&#x8BAE;&#x7EAA;&#x8981;&#xFF0C;&#x53D1;&#x90AE;&#x4EF6;&#x51FA;&#x6765;&#xFF0C;&#x8DDF;&#x8FDB;&#x4EBA;&#x662F;&#x8C01;&#xFF0C;&#x65F6;&#x95F4;&#x70B9;&#x662F;&#x5565;&#x65F6;&#x5019;&#x90FD;&#x8981;&#x5199;&#x660E;&#x767D;&#xFF0C;&#x90AE;&#x4EF6;&#x53D1;&#x9001;&#x53CC;&#x65B9;&#x56E2;&#x961F;&#x90AE;&#x4EF6;&#x7EC4;&#xFF0C;cc&#x5404;&#x65B9;&#x8001;&#x5927;&#x3002;&#x4E8B;&#x540E;&#x5173;&#x952E;&#x8282;&#x70B9;&#x505A;check&#xFF0C;&#x5982;&#x672A;&#x5B8C;&#x6210;&#xFF0C;&#x7EBF;&#x4E0B;&#x6C9F;&#x901A;&#xFF0C;&#x8FBE;&#x6210;&#x4E00;&#x81F4;&#x540E;&#x8FFD;&#x6B64;&#x90AE;&#x4EF6;&#x7ED9;&#x7ED3;&#x8BBA;&#xFF0C;&#x8BF4;&#x660E;&#x5EF6;&#x671F;&#x539F;&#x56E0;&#x4EE5;&#x53CA;&#x65B0;&#x7684;&#x65F6;&#x95F4;&#x70B9;&#x3002;&#x5982;&#x679C;&#x6C9F;&#x901A;&#x4E0D;&#x7545;&#xFF0C;&#x8BA9;&#x8001;&#x5927;&#x53BB;&#x534F;&#x8C03;&#x3002; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
      <categories>
        <category>职业规划</category>
      </categories>
      <tags>
        <tag>职业规划</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[完备的监控应覆盖什么？]]></title>
    <url>%2F%E8%81%8C%E4%B8%9A%E8%A7%84%E5%88%92%2F2016%2F03%2F03%2F%E5%AE%8C%E5%A4%87%E7%9A%84%E7%9B%91%E6%8E%A7%E5%BA%94%E8%A6%86%E7%9B%96%E4%BB%80%E4%B9%88.html</url>
    <content type="text"><![CDATA[&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x4E92;&#x8054;&#x7F51;&#x516C;&#x53F8;&#xFF0C;&#x8981;&#x5BF9;&#x54EA;&#x4E9B;&#x65B9;&#x9762;&#x505A;&#x4E86;&#x76D1;&#x63A7;&#xFF0C;&#x624D;&#x80FD;&#x79F0;&#x5F97;&#x4E0A;&#x5B8C;&#x5907;&#xFF1F;&#x4ECA;&#x5929;&#x7B14;&#x8005;&#x629B;&#x7816;&#x5F15;&#x7389;&#xFF0C;&#x7ED9;&#x51FA;&#x4E00;&#x4E2A;&#x5217;&#x8868;&#xFF0C;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#xFF0C;&#x6B22;&#x8FCE;&#x4E1A;&#x754C;&#x540C;&#x4EC1;&#x8865;&#x5145;&#xFF0C;&#x5171;&#x540C;&#x8FDB;&#x6B65;:)&#x2003; &#x7F51;&#x7EDC;&#x76D1;&#x63A7;&#x7EC8;&#x7AEF;&#x5BA2;&#x6237;&#x8981;&#x60F3;&#x8BBF;&#x95EE;&#x4F60;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x52BF;&#x5FC5;&#x8981;&#x7ECF;&#x8FC7;&#x4E00;&#x7CFB;&#x5217;&#x7F51;&#x7EDC;&#x94FE;&#x8DEF;&#xFF0C;&#x8FD9;&#x662F;&#x6211;&#x4EEC;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x7740;&#x773C;&#x70B9; &#x7F51;&#x7EDC;&#x8D28;&#x91CF;&#x5168;&#x56FD;&#x5404;&#x5730;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x5730;&#x533A;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x8FD0;&#x8425;&#x5546;&#xFF0C;&#x8BBF;&#x95EE;&#x4F60;&#x7684;&#x7F51;&#x7AD9;&#x7684;&#x8D28;&#x91CF;&#xFF0C;&#x6BD4;&#x5982;&#x5EF6;&#x8FDF;&#x662F;&#x591A;&#x5C11;&#xFF0C;&#x662F;&#x5426;&#x4E0D;&#x901A;&#x4E86; &#x516C;&#x7F51;&#x51FA;&#x53E3;&#x670D;&#x52A1;&#x90E8;&#x7F72;&#x5728;&#x67D0;&#x4E2A;IDC&#xFF0C;IDC&#x7684;&#x516C;&#x7F51;&#x51FA;&#x53E3;&#x662F;&#x4E0D;&#x662F;&#x62E5;&#x585E;&#x4E86;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x65AD;&#x4E86; &#x4E13;&#x7EBF;&#x5E26;&#x5BBD;&#x670D;&#x52A1;&#x53EF;&#x80FD;&#x662F;&#x4F9D;&#x8D56;&#x5176;&#x4ED6;&#x670D;&#x52A1;&#x7684;&#xFF0C;&#x800C;&#x88AB;&#x4F9D;&#x8D56;&#x7684;&#x670D;&#x52A1;&#x5374;&#x4E0D;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x673A;&#x623F;&#xFF0C;&#x4E2D;&#x95F4;&#x901A;&#x8FC7;&#x4E13;&#x7EBF;&#x8FDE;&#x901A;&#xFF0C;&#x90A3;&#x4E48;&#x4E13;&#x7EBF;&#x7684;&#x8D28;&#x91CF;&#x5C31;&#x9700;&#x8981;&#x5173;&#x6CE8;&#x4E86;&#xFF0C;&#x5178;&#x578B;&#x7684;&#x6BD4;&#x5982;&#x4E22;&#x5305;&#x60C5;&#x51B5;&#xFF0C;&#x662F;&#x5426;&#x8FDE;&#x901A;&#xFF0C;&#x5E26;&#x5BBD;&#x662F;&#x5426;&#x5230;&#x8FBE;&#x4E0A;&#x9650; &#x7F51;&#x7EDC;&#x8BBE;&#x5907;&#x5404;&#x79CD;&#x4EA4;&#x6362;&#x673A;&#x3001;&#x8DEF;&#x7531;&#x5668;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x6302;&#x4E86;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x4E22;&#x5305;&#x4E86;&#xFF0C;&#x786C;&#x4EF6;&#x662F;&#x5426;&#x6545;&#x969C;&#x4E86; &#x673A;&#x5668;&#x76D1;&#x63A7;&#x8FD9;&#x4E2A;&#x5927;&#x5BB6;&#x901A;&#x5E38;&#x4E0D;&#x4F1A;&#x5FFD;&#x7565;&#xFF0C;&#x6BD5;&#x7ADF;&#x4F60;&#x7684;&#x670D;&#x52A1;&#x662F;&#x5728;&#x673A;&#x5668;&#x4E0A;&#x8DD1;&#x7684;&#x561B;&#xFF0C;&#x7B80;&#x5355;&#x5520;&#x53E8;&#x4E00;&#x4E0B; &#x673A;&#x5668;&#x786C;&#x4EF6;&#x6BD4;&#x5982;&#x78C1;&#x76D8;&#x662F;&#x4E0D;&#x662F;&#x53EA;&#x8BFB;&#x4E86;&#xFF0C;raid&#x662F;&#x4E0D;&#x662F;&#x6545;&#x969C;&#x4E86;&#xFF0C;&#x5185;&#x5B58;&#x662F;&#x4E0D;&#x662F;&#x6545;&#x969C;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FDC;&#x7A0B;&#x63A7;&#x5236;&#x5361;&#x7BA1;&#x7406; &#x673A;&#x5668;&#x8FD0;&#x884C;&#x6001;&#x6BD4;&#x5982;&#x78C1;&#x76D8;&#x662F;&#x4E0D;&#x662F;&#x6EE1;&#x4E86;&#xFF0C;CPU&#x662F;&#x4E0D;&#x662F;&#x6301;&#x7EED;&#x8DD1;&#x6EE1;&#xFF0C;&#x5185;&#x5B58;&#x662F;&#x4E0D;&#x662F;&#x5FEB;&#x5403;&#x5149;&#x4E86;&#xFF0C;IO&#x6301;&#x7EED;100%&#xFF0C;&#x7F51;&#x5361;&#x662F;&#x4E0D;&#x662F;&#x4E22;&#x5305;&#x4E86;&#xFF0C;&#x7CFB;&#x7EDF;&#x8FDB;&#x7A0B;&#x603B;&#x6570;&#x662F;&#x4E0D;&#x662F;&#x8FC7;&#x591A;&#x4E86;&#xFF0C;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x53E5;&#x67C4;&#x662F;&#x4E0D;&#x662F;&#x8FC7;&#x591A;&#x4E86;&#x3002; &#x673A;&#x5668;&#x914D;&#x7F6E;&#x6BD4;&#x5982;ulimit&#x914D;&#x7F6E;&#x662F;&#x5426;&#x5408;&#x7406;&#xFF0C;&#x4E00;&#x4E9B;&#x7CFB;&#x7EDF;&#x53C2;&#x6570;&#x6BD4;&#x5982;nf_conntrack_max&#x914D;&#x7F6E;&#x662F;&#x5426;&#x5408;&#x7406;&#x3002; &#x7CFB;&#x7EDF;&#x8FDB;&#x7A0B;&#x6BD4;&#x5982;ntp&#x662F;&#x5426;&#x5DE5;&#x4F5C;&#x6B63;&#x5E38;&#xFF0C;&#x7CFB;&#x7EDF;&#x65F6;&#x95F4;&#x662F;&#x5426;&#x504F;&#x5DEE;&#x592A;&#x5927;&#xFF0C;sshd&#x8FDB;&#x7A0B;&#x662F;&#x5426;&#x5DE5;&#x4F5C;&#x6B63;&#x5E38;&#xFF0C;crond&#x662F;&#x5426;&#x6302;&#x4E86; &#x4E1A;&#x52A1;&#x76D1;&#x63A7;&#x670D;&#x52A1;&#x672C;&#x8EAB;&#x8FD0;&#x884C;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x81EA;&#x7136;&#x4E5F;&#x662F;&#x8981;&#x76D1;&#x63A7;&#x7684; &#x5B58;&#x6D3B;&#x6027;&#x8FDB;&#x7A0B;&#x662F;&#x5426;&#x8FD8;&#x5728;&#xFF0C;&#x7AEF;&#x53E3;&#x662F;&#x5426;&#x8FD8;&#x5728;&#x76D1;&#x542C;&#xFF0C;LOG&#x662F;&#x5426;&#x4E0D;&#x518D;&#x6EDA;&#x52A8; &#x5F02;&#x5E38;&#x65E5;&#x5FD7;&#x6BD4;&#x5982;&#x629B;&#x4E86;Exception&#xFF0C;&#x51FA;&#x73B0;&#x4E86;ERROR&#x3001;FATAL&#x3001;ALERT&#x7B49;&#x5173;&#x952E;&#x5B57; &#x5065;&#x5EB7;&#x6307;&#x6807;&#x8FD9;&#x4E2A;&#x7ECF;&#x5E38;&#x5BB9;&#x6613;&#x5FFD;&#x89C6;&#xFF0C;&#x9700;&#x8981;&#x7814;&#x53D1;&#x914D;&#x5408;&#xFF0C;&#x80FD;&#x591F;&#x53CD;&#x6620;&#x670D;&#x52A1;&#x81EA;&#x8EAB;&#x5065;&#x5EB7;&#x72B6;&#x51B5;&#x7684;&#x6307;&#x6807;&#xFF0C;&#x8DDF;&#x4E1A;&#x52A1;&#x81EA;&#x8EAB;&#x76F8;&#x5173;&#x3002;&#x6BD4;&#x5982;MQ&#xFF0C;&#x80FD;&#x591F;&#x53CD;&#x6620;MQ&#x5065;&#x5EB7;&#x72B6;&#x51B5;&#x7684;&#x53EF;&#x80FD;&#x662F;&#x6D88;&#x606F;&#x5806;&#x79EF;&#x91CF;&#x3002; &#x63A5;&#x53E3;&#x76D1;&#x63A7;&#x670D;&#x52A1;&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x7684;API&#xFF0C;&#x5176;&#x6210;&#x529F;&#x7387;&#x3001;&#x5EF6;&#x8FDF;&#x60C5;&#x51B5;&#x3001;QPS&#x7B49;&#x7B49;&#x3002;&#x4E00;&#x4E9B;&#x4EBA;&#x505A;&#x7684;&#x57DF;&#x540D;&#x76D1;&#x63A7;&#x4E5F;&#x53EF;&#x4EE5;&#x5F52;&#x5230;&#x8FD9;&#x91CC;&#x3002; &#x5468;&#x8FB9;&#x4F9D;&#x8D56;&#x6BD4;&#x5982;&#x4F60;&#x4F9D;&#x8D56;&#x7684;&#x5176;&#x4ED6;&#x670D;&#x52A1;&#x662F;&#x5426;&#x5065;&#x5EB7;&#xFF0C;&#x6BD4;&#x5982;&#x7528;&#x5230;&#x7684;HTTPS&#x8BC1;&#x4E66;&#x662F;&#x5426;&#x8FC7;&#x671F; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
      <categories>
        <category>职业规划</category>
      </categories>
      <tags>
        <tag>职业规划</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Firewalld Rich and Direct Rules: Setting up RHEL 7 Server as a Router]]></title>
    <url>%2FLinux%2F2016%2F02%2F12%2FFirewalld-Rich-and-Direct-Rules-Setting-up-RHEL-7-Server-as-a-Router.html</url>
    <content type="text"><![CDATA[Document links document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>route</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Setting up a MariaDB Server with SELinux on RHEL 7]]></title>
    <url>%2FRHCE%2F2016%2F02%2F10%2FSetting-up-a-MariaDB-Server-with-SELinux-on-RHEL-7.html</url>
    <content type="text"><![CDATA[Document links document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
      <categories>
        <category>RHCE</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Configure Aggregated Network Links on RHEL 7: Bonding and Teaming]]></title>
    <url>%2FRHCE%2F2016%2F02%2F06%2FConfigure-Aggregated-Network-Links-on-RHEL-7-Bonding-and-Teaming.html</url>
    <content type="text"><![CDATA[Configure network bonding and teaming on RHEL 7. Aggregated Network LinksThere are two ways to configure aggregated network links on RHEL 7, via bonding or via teaming. Network bonding enables two or more network interfaces to act as one, simultaneously increasing the bandwidth and providing redundancy. Network teaming is designed to implement the concept in a different way by providing a small kernel driver to implement the fast handling of packet flows, and various user-space applications to do everything else in user space. The existing bonding driver is unaffected, network teaming is offered as an alternative and does not replace bonding in RHEL 7. Before We BeginWe have two virtual machines in our lab, with two network interfaces each. One machine will be configured for network bonding, and one for network teaming. Basic IPv6 configuration for network teaming will be covered. To avoid problems, we are going to configure networking from the console and not from Secure Shell (SSH). If we do something wrong, at least we won&#x2019;t lose connectivity. Caveat for VirtualBoxFor those using VirtualBox to configure bonding or teaming, ensure that network adapters have promiscuous mode set to &#x201C;Allow All&#x201D;, and then enable promisc mode on the links, for example:12# ip link set eth0 promisc on# ip link set eth1 promisc on The above works OK for testing, but won&#x2019;t persist after reboot. Either add to /etc/rc.local, or write a systemd service to handle it. Configure Network BondingEnsure that the bonding module is loaded:1# modprobe bonding While not required, feel free to check nmcli examples, where example 6 is about adding a bonding master and two slaves. You may find them useful.1# man 5 nmcli-examples A bond interface can be created with either the nmcli or the nmtui utilities. We use nmcli since we find it faster and easier to use. We are going to delete any existing network configuration to save ourselves some headache:1234# nmcli cNAME UUID TYPE DEVICEenp0s8 00cb8299-feb9-55b6-a378-3fdc720e0bc6 802-3-ethernet enp0s8enp0s17 8512e951-6012-c639-73b1-5b4d7b469f7f 802-3-ethernet enp0s17 We see that we have two network cards with predictable network interface names configured. Delete exiting configuration:1# nmcli c del enp0s8 enp0s17 Create a bonding interface named mybond0 with an active-backup mode:1# nmcli c add type bond ifname mybond0 con-name mybond0 mode active-backup document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
      <categories>
        <category>RHCE</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[一台电脑绑定多个GitHub帐号教程]]></title>
    <url>%2FGit%2F2016%2F02%2F02%2F%E4%B8%80%E5%8F%B0%E7%94%B5%E8%84%91%E7%BB%91%E5%AE%9A%E5%A4%9A%E4%B8%AAgithub%E5%B8%90%E5%8F%B7%E6%95%99%E7%A8%8B.html</url>
    <content type="text"><![CDATA[&#x601D;&#x8DEF;ssh &#x65B9;&#x5F0F;&#x94FE;&#x63A5;&#x5230; Github&#xFF0C;&#x9700;&#x8981;&#x552F;&#x4E00;&#x7684;&#x516C;&#x94A5;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x540C;&#x4E00;&#x53F0;&#x7535;&#x8111;&#x7ED1;&#x5B9A;&#x4E24;&#x4E2A;Github &#x5E10;&#x53F7;&#xFF0C;&#x9700;&#x8981;&#x4E24;&#x4E2A;&#x6761;&#x4EF6;:1.&#x80FD;&#x591F;&#x751F;&#x6210;&#x4E24;&#x5BF9; &#x79C1;&#x94A5;/&#x516C;&#x94A5;2.push &#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x533A;&#x5206;&#x4E24;&#x4E2A;&#x8D26;&#x6237;&#xFF0C;&#x63A8;&#x9001;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x4ED3;&#x5E93; &#x89E3;&#x51B3;&#x65B9;&#x6848;:1.&#x751F;&#x6210; &#x79C1;&#x94A5;/&#x516C;&#x94A5; &#x65F6;&#xFF0C;&#x5BC6;&#x94A5;&#x6587;&#x4EF6;&#x547D;&#x540D;&#x907F;&#x514D;&#x91CD;&#x590D;2.&#x8BBE;&#x7F6E;&#x4E0D;&#x540C; Host &#x5BF9;&#x5E94;&#x540C;&#x4E00; HostName &#x4F46;&#x5BC6;&#x94A5;&#x4E0D;&#x540C;3.&#x53D6;&#x6D88; git &#x5168;&#x5C40;&#x7528;&#x6237;&#x540D;/&#x90AE;&#x7BB1;&#x8BBE;&#x7F6E;&#xFF0C;&#x4E3A;&#x6BCF;&#x4E2A;&#x4ED3;&#x5E93;&#x72EC;&#x7ACB;&#x8BBE;&#x7F6E; &#x7528;&#x6237;&#x540D;/&#x90AE;&#x7BB1; &#x64CD;&#x4F5C;&#x65B9;&#x6CD5;1.&#x67E5;&#x770B;&#x5DF2;&#x6709; &#x5BC6;&#x94A5;Mac &#x4E0B;&#x8F93;&#x5165;&#x547D;&#x4EE4; ls ~/.ssh/&#xFF0C;&#x770B;&#x5230; id_rsa &#x4E0E; id_rsa_pub &#x5219;&#x8BF4;&#x660E;&#x5DF2;&#x7ECF;&#x6709;&#x4E00;&#x5BF9;&#x5BC6;&#x94A5;&#x3002;2.&#x751F;&#x6210;&#x65B0;&#x7684;&#x516C;&#x94A5;&#xFF0C;&#x5E76;&#x547D;&#x540D;&#x4E3A; id_rsa_2 (&#x4FDD;&#x8BC1;&#x4E0E;&#x4E4B;&#x524D;&#x5BC6;&#x94A5;&#x6587;&#x4EF6;&#x540D;&#x79F0;&#x4E0D;&#x540C;&#x5373;&#x53EF;)ssh-keygen -t rsa -f ~/.ssh/id_rsa_2 -C &#x201C;yourmail@xxx.com&#x201D;3.&#x5728; .ssh &#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x65B0;&#x5EFA; config &#x6587;&#x4EF6;&#x5E76;&#x7F16;&#x8F91;&#xFF0C;&#x53E6;&#x4E0D;&#x540C; Host &#x5B9E;&#x9645;&#x6620;&#x5C04;&#x5230;&#x540C;&#x4E00; HostName&#xFF0C;&#x4F46;&#x5BC6;&#x94A5;&#x6587;&#x4EF6;&#x4E0D;&#x540C;&#x3002;Host &#x524D;&#x7F00;&#x53EF;&#x81EA;&#x5B9A;&#x4E49;&#xFF0C;&#x4F8B;&#x5B50;&#x4E2D;wolf712345678910# default Host github.comHostName github.comUser gitIdentityFile ~/.ssh/id_rsa# rzxwang Host rzxwang.github.comHostName github.comUser gitIdentityFile ~/.ssh/id_rsa_2 4.&#x5C06;&#x751F;&#x6210;&#x7684; id_rsa.pub&#xFF0C;id_rsa_2.pub&#x5185;&#x5BB9;copy &#x5230;&#x5BF9;&#x5E94;&#x7684;GitHub Repository SSH-KEY&#x4E2D;5.&#x6D4B;&#x8BD5; ssh &#x94FE;&#x63A5;123456# &#x6B64;&#x5904;&#x6D4B;&#x8BD5;&#x4E3A;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#xFF0C;&#x5BF9;&#x5E94;&#x7684;KEY&#x662F;id_rsassh -T git@github.com# &#x6B64;&#x5904;&#x6D4B;&#x8BD5;&#x4E3A;rzxwang.github.com&#x914D;&#x7F6E;&#xFF0C;&#x5BF9;&#x5E94;&#x7684;KEY&#x662F;id_rsa_2ssh -T git@rzxwang.github.com# Hi rzxwang! You&apos;ve successfully authenticated, but GitHub does not provide shell access.# &#x51FA;&#x73B0;&#x4E0A;&#x8FB9;&#x8FD9;&#x53E5;&#xFF0C;&#x8868;&#x793A;&#x94FE;&#x63A5;&#x6210;&#x529F; 6.&#x5C06;&#x9879;&#x76EE; clone &#x5230;&#x672C;&#x5730;&#xFF0C; folder-name &#x662F;&#x672C;&#x5730;&#x6587;&#x4EF6;&#x5939;&#x8DEF;&#x5F84;1git clone git@rzxwang.github.com:rzxwang/rzxwang.github.io.git wofl7.org 7.&#x53D6;&#x6D88;&#x5168;&#x5C40; &#x7528;&#x6237;&#x540D;/&#x90AE;&#x7BB1;&#x8BBE;&#x7F6E;&#xFF0C;&#x5E76;&#x8FDB;&#x5165;&#x9879;&#x76EE;&#x6587;&#x4EF6;&#x5939;&#x5355;&#x72EC;&#x8BBE;&#x7F6E;123456# &#x53D6;&#x6D88;&#x5168;&#x5C40; &#x7528;&#x6237;&#x540D;/&#x90AE;&#x7BB1; &#x914D;&#x7F6E;git config &#x2013;global &#x2013;unset user.namegit config &#x2013;global &#x2013;unset user.email# &#x5355;&#x72EC;&#x8BBE;&#x7F6E;&#x6BCF;&#x4E2A;repo &#x7528;&#x6237;&#x540D;/&#x90AE;&#x7BB1;git config user.email &#x201C;xxxx@xx.com&#x201D;git config user.name &#x201C;xxxx&#x201D; 8.&#x547D;&#x4EE4;&#x884C;&#x8FDB;&#x5165;&#x9879;&#x76EE;&#x76EE;&#x5F55;&#xFF0C;&#x91CD;&#x5EFA; origin (rzxwang &#x4E3A;&#x76F8;&#x5E94;&#x9879;&#x76EE;&#x5730;&#x5740;)12git remote rm origingit remote add origin git@rzxwang.github.com:rzxwang/rzxwang.github.io.git 9.&#x6210;&#x529F;&#xFF0C;&#x53EF;&#x4EE5; push &#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;.1git push origin master document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[使用 NGINX 流控和 fail2ban 防止 CC 攻击]]></title>
    <url>%2Funcategorized%2F2016%2F01%2F24%2F%E4%BD%BF%E7%94%A8-NGINX-%E6%B5%81%E6%8E%A7%E5%92%8C-fail2ban-%E9%98%B2%E6%AD%A2-CC-%E6%94%BB%E5%87%BB.html</url>
    <content type="text"><![CDATA[&#x80CC;&#x666F;&#x77E5;&#x8BC6;CC &#x653B;&#x51FB;&#x653B;&#x51FB;&#x8005;&#x901A;&#x8FC7;&#x521B;&#x5EFA;&#x5927;&#x91CF;&#x8BF7;&#x6C42;&#x5BFC;&#x81F4;&#x670D;&#x52A1;&#x5668;&#x8D44;&#x6E90;&#x8017;&#x5C3D;&#xFF0C;&#x4E3B;&#x8981;&#x9488;&#x5BF9;&#x7279;&#x5B9A;&#x670D;&#x52A1;&#x63A5;&#x53E3;&#xFF0C;&#x5C5E;&#x4E8E;&#x5B9E;&#x73B0; DoS &#x653B;&#x51FB;&#x7684;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#xFF08;DoS &#x653B;&#x51FB;&#x66F4;&#x591A;&#x662F;&#x9488;&#x5BF9;&#x7F51;&#x7EDC;&#x7AEF;&#x53E3;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5177;&#x4F53;&#x670D;&#x52A1;&#x63A5;&#x53E3;&#xFF09;&#x3002; NGINX &#x6D41;&#x63A7; limit_req_zone&#xFF1A;&#x901A;&#x8FC7;&#x201C;&#x6F0F;&#x6876;&#x201D;&#x7B97;&#x6CD5;&#x9650;&#x5236;&#x6BCF;&#x4E2A; IP &#x53D1;&#x8D77;&#x7684;&#x8BF7;&#x6C42;&#x9891;&#x7387;&#x3002; limit_conn_zone&#xFF1A;&#x9650;&#x5236;&#x6BCF;&#x4E2A; IP &#x53D1;&#x8D77;&#x7684;&#x8FDE;&#x63A5;&#x6570;&#x3002;fail2ban&#x901A;&#x8FC7;&#x5339;&#x914D;&#x670D;&#x52A1;&#x5668;&#x65E5;&#x5FD7;&#x64CD;&#x4F5C; iptables &#x6765;&#x9650;&#x5236;&#x5BA2;&#x6237;&#x7AEF;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;&#x3002; &#x5B9E;&#x8DF5;&#x914D;&#x7F6E; NGINX &#x90E8;&#x5206;&#x5728; http &#x90E8;&#x5206;&#x4E2D;&#x914D;&#x7F6E;&#xFF1A; 12limit_req_zone $binary_remote_addr zone=sym:10m rate=5r/s;limit_conn_zone $binary_remote_addr zone=conn_sym:10m; &#x7136;&#x540E;&#x5728;&#x9700;&#x8981;&#x6D41;&#x63A7;&#x7684; location &#x90E8;&#x5206;&#x914D;&#x7F6E;&#xFF1A; 12limit_req zone=sym burst=5;limit_conn conn_sym 10; &#x91CD;&#x542F; NGINX &#x540E;&#x5F53;&#x6709;&#x8D85;&#x6D41;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x65F6;&#x5C06;&#x5728; NGINX error.log&#xFF08;&#x9ED8;&#x8BA4;&#x5728; /var/log/nginx/error.log&#xFF09; &#x4E2D;&#x770B;&#x5230;&#x7C7B;&#x4F3C;&#x8BB0;&#x5F55;&#xFF1A;12017/02/12 18:03:57 [error]15965#15965: *61240 limiting requests, excess: 6.000 by zone &quot;sym&quot;, client: 121.41.106.121, server: hacpai.com, request: &quot;GET / HTTP/1.0&quot;, host: &quot;hacpai.com&quot; &#x6B64;&#x65F6;&#x8BF7;&#x6C42;&#x5DF2;&#x7ECF;&#x88AB; NGINX &#x9650;&#x6D41;&#xFF0C;&#x4F46;&#x662F;&#x5BA2;&#x6237;&#x7AEF;&#x4ECD;&#x7136;&#x80FD;&#x591F;&#x7EE7;&#x7EED;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#xFF0C;&#x5360;&#x7528;&#x670D;&#x52A1;&#x5668;&#x8D44;&#x6E90;&#x3002; fail2ban &#x90E8;&#x5206;&#x65B0;&#x5EFA; /etc/fail2ban/jail.d/sym.conf &#x6587;&#x4EF6;&#xFF0C;&#x52A0;&#x5165;&#x5982;&#x4E0B;&#x5185;&#x5BB9;&#xFF1A;12345678910[sym-cc]enabled = trueport = https,httpfilter = symlogpath = /var/log/nginx/*error.logmaxretry = 120findtime = 60bantime = 120action = iptables-multiport[name=Sym, port=&quot;https,http&quot;, protocol=tcp] sendmail-whois-lines[name=Sym, dest=youremail@gmail.com] findtime 60 &#x79D2;&#x5185;&#x5982;&#x679C;&#x6709;&#x8D85;&#x8FC7; maxretry 120 &#x6B21;&#x5339;&#x914D;&#x5230;&#x5219;&#x7981;&#x6B62;&#x8FDE;&#x63A5; bantime 120 &#x79D2;&#x3002;&#x7981;&#x6B62;&#x8FDE;&#x63A5;&#x901A;&#x8FC7;&#x64CD;&#x4F5C; iptables &#x5B9E;&#x73B0; &#x3002;&#xFF08;&#x8981;&#x53D1;&#x9001;&#x90AE;&#x4EF6;&#xFF0C;&#x9700;&#x8981;&#x5B89;&#x88C5;&#x914D;&#x7F6E;&#x597D; sendmail&#xFF09; &#x91CD;&#x542F; fail2ban &#x540E;&#x5F53;&#x53D1;&#x751F;&#x8D85;&#x6D41;&#x65F6;&#x53EF;&#x4EE5;&#x5728; /var/log/fail2ban.log &#x4E2D;&#x770B;&#x5230;&#x7C7B;&#x4F3C;&#x8BB0;&#x5F55;&#xFF1A; 12017-02-12 18:01:26,968 fail2ban.actions: WARNING [sym-cc] Ban 121.41.106.121 &#x53E6;&#x5916;&#xFF1A; fail2ban-client status&#x3001;fail2ban-client status sym-cc &#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x5F53;&#x524D;&#x7981;&#x6B62;&#x4FE1;&#x606F; fail2ban-regex /var/log/nginx/error.log /etc/fail2ban/filter.d/sym.conf &#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x914D;&#x7F6E;&#x5339;&#x914D;&#x60C5;&#x51B5;&#x3002;&#x6CE8;&#x610F;&#x4E8B;&#x9879; fail2ban &#x670D;&#x52A1;&#x91CD;&#x542F;&#x53EF;&#x80FD;&#x8F83;&#x6162;&#xFF0C;&#x8010;&#x5FC3;&#x7B49;&#x5F85; findtime &#x4E0D;&#x8981;&#x5C0F;&#x4E8E; 60 &#x79D2; action &#x7528; iptables-multiport &#x540C;&#x65F6;&#x8BBE;&#x7F6E; HTTPS &#x548C; HTTP &#x53EF;&#x80FD;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x624B;&#x52A8;&#x52A0;&#x5165;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x542F;&#x52A8;&#x9879; &#x5982;&#x679C; NGINX &#x5F00;&#x4E86; access_log&#xFF0C;&#x5176;&#x5B9E;&#x4E5F;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7C97;&#x66B4;&#x4E00;&#x70B9;&#x76F4;&#x63A5;&#x5C06; fail2ban &#x914D;&#x7F6E;&#x5230;&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x4E0A;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x4E0D;&#x7528;&#x914D;&#x7F6E; NGINX &#x6D41;&#x63A7;&#x6A21;&#x5757;&#x4E86;&#xFF0C;&#x4E0D;&#x8FC7;&#x7F3A;&#x70B9;&#x662F;&#x5931;&#x53BB;&#x4E86;&#x201C;&#x5F39;&#x6027;&#x201D;&#x3002; NGINX&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684; NGINX &#x6D41;&#x63A7;&#x6A21;&#x5757;&#x7684;&#x201C;&#x5F39;&#x6027;&#x201D;&#x4E3B;&#x8981;&#x6307;&#x7684;&#x662F; limit_req_zone &#x6A21;&#x5757;&#x4E2D; burst &#x548C; nodelay&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x7EC4;&#x5408;&#x4F7F;&#x7528;&#x3002; rate&#xFF1A;&#x6309;&#x7167;&#x56FA;&#x5B9A;&#x901F;&#x7387;&#x201C;&#x6F0F;&#x8BF7;&#x6C42;&#x201D;&#x7ED9;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x5668; burst&#xFF1A;&#x53EF;&#x7406;&#x89E3;&#x4E3A;&#x6876;&#x5927;&#x5C0F;&#xFF0C;&#x80FD;&#x88C5;&#x591A;&#x5C11;&#x4E2A;&#x8BF7;&#x6C42; nodelay&#xFF1A;&#x5E26;&#x4E86;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x8BDD;&#x5728;&#x6876;&#x88C5;&#x4E0D;&#x4E0B;&#x65F6;&#x5C06;&#x8BF7;&#x6C42;&#x201C;&#x5168;&#x90E8;&#x5012;&#x7ED9;&#x201D;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x5668;&#xFF1B;&#x5982;&#x679C;&#x4E0D;&#x5E26;&#x7684;&#x8BDD;&#x8BF7;&#x6C42;&#x8FD8;&#x662F;&#x6309;&#x7167;&#x901F;&#x7387;&#x6162;&#x6162;&#x6F0F;&#x65E5;&#x5FD7;&#x6E05;&#x7406; &#x9700;&#x8981;&#x5B9A;&#x65F6;&#x6E05;&#x7406; NGINX&#x3001;fail2ban &#x65E5;&#x5FD7;&#xFF0C;&#x9632;&#x6B62;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x5360;&#x7528;&#x8FC7;&#x5927;&#x3002; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[jetbrains 激活服务器搭建]]></title>
    <url>%2Funcategorized%2F2016%2F01%2F24%2Fjetbrains-%E6%BF%80%E6%B4%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA.html</url>
    <content type="text"><![CDATA[&#x4E00;&#x53F0;VPS&#x8FDE;vps&#x90FD;&#x6CA1;&#x6709;&#xFF0C;&#x5C0F;&#x62F3;&#x5934;&#x4F60;&#x6015;&#x4E0D;&#x6015;(&#xE07; &#x2022;&#x300;_&#x2022;&#x301;)&#xE07; &#x3002; &#x90A3;&#x4F60;&#x7528;&#x6211;&#x7684;&#x5427;&#xFF0C;&#x256E;(&#x256F;&#x25BD;&#x2570;)&#x256D; &#x3002; &#x4E00;&#x952E;&#x811A;&#x672C;&#x5EFA;&#x8BAE;&#x5728;&#x7279;&#x6743;&#x6A21;&#x5F0F;&#x4E0B;&#x8FD0;&#x884C;&#xFF0C;&#x5373;sudo -s&#x4E00;&#x4E0B; wget http://home.ustc.edu.cn/~mmmwhy/jetbrain.sh &amp;&amp; sh ./jetbrain.sh&#x811A;&#x672C;&#x5185;&#x5BB9;12345678910111213141516171819202122#!/bin/bashcurl -o 86 &quot;http://home.ustc.edu.cn/~mmmwhy/86&quot;chmod 777 86echo &quot;&#x8BF7;&#x8F93;&#x5165;jetbains&#x6FC0;&#x6D3B;&#x670D;&#x52A1;&#x5668;&#x7684;&#x7AEF;&#x53E3; [1-65535]:&quot;read -p &quot;(&#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;: 104):&quot; httpport[ -z &quot;$httpport&quot; ] &amp;&amp; httpport=&quot;104&quot;echo &quot;&#x8BF7;&#x8F93;&#x5165;jetbains&#x7528;&#x6237;&#x540D;(&#x4EC5;&#x82F1;&#x6587;):&quot;read -p &quot;(&#x9ED8;&#x8BA4;&#x7528;&#x6237;&#x540D;: feiyang):&quot; name[ -z &quot;$name&quot; ] &amp;&amp; name=&quot;feiyang&quot;ip=`curl -m 10 -s http://members.3322.org/dyndns/getip`echo &quot;&#x60A8;&#x9009;&#x62E9;&#x7684;&#x7AEF;&#x53E3;&#x662F;&#xFF1A;${httpport},&#x7528;&#x6237;&#x540D;&#x662F;&#xFF1A;${name}&quot;echo -e &quot;&#x672C;&#x5730; IP : \033[41;37m ${ip} \033[0m&quot;echo &quot;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&quot;echo &quot; &quot;echo -e &quot; License sever&#x5730;&#x5740;&#x586B;&#x5199;&#x4E3A; \033[41;37m http://${ip}:${httpport} \033[0m&quot;echo &quot; &quot;echo &quot;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&quot;echo &quot; &quot;echo &quot; &quot;echo &quot; &quot;screen -dmS IntelliJIDEALicenseServer -d -m ./86 -p ${httpport} -u ${name}exit 1 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[Linux启动流程]]></title>
    <url>%2Funcategorized%2F2015%2F01%2F24%2FLinux%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B.html</url>
    <content type="text"><![CDATA[&#x80CC;&#x666F;&#x6545;&#x4E8B;&#xFF1A;&#x4E3A;&#x5565;&#x60F3;&#x8D77;&#x6765;&#x5199;Linux&#x542F;&#x52A8;&#x6D41;&#x7A0B;&#x4E86;&#x5462;&#xFF0C;&#x8FD9;&#x4E2A;&#x5462;&#x8981;&#x4ECE;&#x4E00;&#x4E2A;&#x6708;&#x4EE5;&#x524D;&#x8BF4;&#x8D77;&#xFF0C;&#x871C;&#x6C41;&#x5C34;&#x5C2C;~~~&#x3002;&#x6211;&#x5AB3;&#x5987;&#x7528;&#x7684;Ubuntu&#xFF0C;&#x7136;&#x540E;&#x5979;&#x9700;&#x8981;&#x88C5;&#x5F88;&#x591A;&#x73AF;&#x5883;&#xFF0C;&#x4E0D;&#x77E5;&#x9053;&#x4E3A;&#x4F55;&#x5185;&#x6838;&#x8001;&#x662F;&#x66F4;&#x65B0;&#xFF0C;&#x7ED3;&#x679C;&#x5C31;&#x662F;&#x540E;&#x9762;&#x88C5;&#x4E1C;&#x897F;&#x7684;&#x65F6;&#x5019;&#x63D0;&#x793A;/boot&#x5206;&#x533A;&#x7A7A;&#x95F4;&#x4E0D;&#x8DB3;&#x65E0;&#x6CD5;&#x5B89;&#x88C5;&#xFF0C;&#x4F46;&#x6211;&#x5929;&#x771F;&#x53EF;&#x7231;&#x7684;&#x5AB3;&#x5987;&#x4E0D;&#x4F1A;&#x6E05;&#x5440;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x5C31;&#x6765;&#x4E86;&#xFF0C;&#x4E00;&#x770B;&#x7B80;&#x5355;&#x554A;&#xFF0C;&#x5220;&#x5457;&#xFF0C;&#x51E1;&#x4E8B;&#x603B;&#x6709;BUT&#xFF0C;&#x6211;&#x89C9;&#x5F97;&#x8FD9;&#x4E2A;&#x4E8B;&#x60C5;&#x561B;&#x8981;&#x6E05;&#x5C31;&#x8981;&#x6E05;&#x5F7B;&#x5E95;&#xFF0C;&#x5C31;&#x4E0D;rm-rf&#x4E86;&#xFF0C;&#x76F4;&#x63A5;&#x5378;&#x5B89;&#x88C5;&#x5305;&#x591A;&#x6E05;&#x723D;&#xFF0C;&#x4E8E;&#x662F;&#x4E4E;&#x7CFB;&#x7EDF;&#x6302;&#x4E86;&#xFF0C;&#x5241;&#x624B;&#x554A;&#x6253;&#x4EC0;&#x4E48;&#x901A;&#x914D;&#x7B26;&#x3002;&#x3002;&#x3002;&#x4E0D;&#x8FC7;&#x603B;&#x7ED3;&#x4E00;&#x4E0B;&#x8FD8;&#x662F;&#x5BF9;&#x7CFB;&#x7EDF;&#x5C42;&#x8BA4;&#x8BC6;&#x4E0D;&#x591F;&#x751F;&#x52A8;&#xFF0C;&#x6240;&#x4EE5;&#x5C31;&#x8865;&#x4E00;&#x7BC7;&#x65E5;&#x5FD7;&#xFF0C;&#x4E07;&#x4E00;&#x6211;&#x6700;&#x68D2;&#x7684;&#x5AB3;&#x5987;&#x770B;&#x5230;&#x4E86;&#x5462;&#xFF0C;&#x90A3;&#x5C31;&#x70B9;&#x70B9;&#x70B9;~ &#x8BA1;&#x7B97;&#x673A;&#x5982;&#x4F55;&#x542F;&#x52A8;&#x7684;&#x53C8;&#x770B;&#x4E86;&#x4E00;&#x904D;&#x962E;&#x4E00;&#x5CF0;&#x5173;&#x4E8E;&#x8FD9;&#x4E2A;&#x7684;&#x6587;&#x7AE0;&#xFF0C;&#x89C9;&#x5F97;&#x81EA;&#x5DF1;&#x5C31;&#x5148;&#x4E0D;&#x5199;&#x4E86;&#xFF0C;&#x540E;&#x7EED;&#x81EA;&#x5DF1;&#x518D;&#x7406;&#x89E3;&#x7740;&#x5199;&#x5427;&#x3002;&#x3002;&#x65F6;&#x95F4;&#x6709;&#x9650;&#x554A;&#xFF0C;&#x53C2;&#x8003;&#x8BA1;&#x7B97;&#x673A;&#x662F;&#x5982;&#x4F55;&#x542F;&#x52A8;&#x7684; &#x7CFB;&#x7EDF;&#x5982;&#x4F55;&#x542F;&#x52A8;&#x7684;&#x8BF4;&#x660E;&#x4E00;&#x4E0B;&#x8FD9;&#x4E9B;&#x56FE;&#x90FD;&#x662F;&#x901A;&#x8FC7;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x6293;&#x8FC7;&#x6765;&#x7684;&#xFF0C;&#x5E76;&#x4E0D;&#x662F;&#x6211;&#x753B;&#x7684;&#x3002;&#x66F4;&#x8BE6;&#x7EC6;&#x7684;&#x8BF4;&#x660E;&#x770B;&#x53C2;&#x8003;&#x5730;&#x5740;&#x91CC;&#x7684;&#x6587;&#x7AE0;&#x91CC;&#x9762;&#x5199;&#x7684;&#x5F88;&#x597D;&#x3002;&#x6765;&#x770B;&#x770B;&#x4E0A;&#x56FE;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C31;&#x662F;Linux&#x7CFB;&#x7EDF;&#x542F;&#x52A8;&#x7684;&#x6D41;&#x7A0B;&#x4E0D;&#x8FC7;&#x6BD4;&#x8F83;&#x7B80;&#x7565;&#xFF0C;&#x4F46;&#x8981;&#x70B9;&#x90FD;&#x5728;&#xFF0C;&#x4E0B;&#x5F20;&#x56FE;&#x4F1A;&#x66F4;&#x8BE6;&#x5C3D;&#x4E00;&#x70B9;&#xFF0C;&#x63A5;&#x7740;&#x770B;&#x5427;&#x8FD9;&#x5F20;&#x56FE;&#x5C31;&#x66F4;&#x8BE6;&#x7EC6;&#x70B9;&#x4E86;&#xFF0C;&#x4E0D;&#x8FC7;&#x8FD8;&#x6709;&#x66F4;&#x8BE6;&#x5C3D;&#x7684;&#xFF0C;Look&#x4E0B;&#x9762;&#x55EF;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x5F88;&#x5C34;&#x5C2C;&#x4E86;&#xFF0C;&#x611F;&#x89C9;&#x770B;&#x56FE;&#x5C31;&#x591F;&#x4E86;&#xFF0C;&#x6211;&#x4E5F;&#x5C31;&#x4E0D;&#x5570;&#x55E6;&#x4E86;&#xFF0C;&#x86EE;&#x597D;~~ document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
  </entry>
  <entry>
    <title><![CDATA[运维蓝图思考]]></title>
    <url>%2F%E8%81%8C%E4%B8%9A%E8%A7%84%E5%88%92%2F2015%2F01%2F02%2F%E8%BF%90%E7%BB%B4%E8%93%9D%E5%9B%BE%E6%80%9D%E8%80%83.html</url>
    <content type="text"><![CDATA[&#x6700;&#x8FD1;&#x5728;&#x505A;2015&#x5E74;&#x89C4;&#x5212;&#xFF0C;&#x601D;&#x8003;&#x8FD0;&#x7EF4;&#x5230;&#x5E95;&#x5E94;&#x8BE5;&#x5E72;&#x54EA;&#x4E9B;&#x4E8B;&#xFF0C;&#x5F97;&#x51FA;&#x5982;&#x4E0B;&#x56FE;&#x8868;&#x4E00;&#x5F20;&#xFF0C;&#x6B22;&#x8FCE;&#x5404;&#x4F4D;&#x540C;&#x4EC1;&#x4E00;&#x8D77;&#x8BA8;&#x8BBA;&#x3002;&#x2003; &#x8FD0;&#x7EF4;&#x84DD;&#x56FE; &#x5B9A;&#x6807;&#x51C6;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x7EBF;&#x4E0A;&#x73AF;&#x5883;&#x662F;&#x7EDF;&#x4E00;&#x7684;&#x3001;&#x5E72;&#x51C0;&#x7684;&#x3001;&#x89C4;&#x8303;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5C31;&#x8981;&#x5B9A;&#x6807;&#x51C6;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A; &#x673A;&#x578B;&#xFF1A;&#x7EBF;&#x4E0A;&#x673A;&#x578B;&#x5C3D;&#x91CF;&#x5C11;&#xFF0C;&#x7701;&#x5F97;&#x5149;&#x5404;&#x79CD;&#x673A;&#x578B;&#x7684;&#x5907;&#x673A;&#x5C31;&#x4E00;&#x5927;&#x5806;&#xFF0C;&#x6D6A;&#x8D39;&#x6210;&#x672C;&#xFF0C;&#x9488;&#x5BF9;&#x5C11;&#x91CF;&#x673A;&#x578B;&#x505A;&#x7CBE;&#xFF0C;&#x7A33;&#x5B9A;&#x6027;&#x4E5F;&#x66F4;&#x5BB9;&#x6613;&#x505A; OS&#xFF1A;&#x6BD4;&#x5982;&#x7EDF;&#x4E00;CentOS6.8&#xFF0C;&#x7EDF;&#x4E00;kernel&#xFF0C;&#x7EDF;&#x4E00;&#x5404;&#x79CD;&#x4F18;&#x5316;&#x914D;&#x7F6E;&#xFF0C;&#x66F4;&#x5B89;&#x5168;&#xFF0C;&#x66F4;&#x7A33;&#x5B9A; &#x7B2C;&#x4E09;&#x65B9;&#x8F6F;&#x4EF6;&#xFF1A;&#x6BD4;&#x5982;MySQL&#x3001;Tomcat&#x3001;Nginx&#xFF0C;&#x5C3D;&#x91CF;&#x7EDF;&#x4E00;&#x7248;&#x672C;&#xFF0C;&#x7EDF;&#x4E00;&#x6269;&#x5C55;&#xFF0C;&#x7EDF;&#x4E00;&#x90E8;&#x7F72;&#x65B9;&#x5F0F;&#xFF0C;&#x7EDF;&#x4E00;&#x76D1;&#x63A7;&#x65B9;&#x5F0F; &#x53D1;&#x5E03;&#x6807;&#x51C6;&#xFF1A;&#x6BD4;&#x5982;&#x542F;&#x505C;&#x811A;&#x672C;&#xFF0C;&#x542F;&#x52A8;&#x8D26;&#x53F7;&#xFF0C;LOG&#x683C;&#x5F0F;&#x3001;&#x5207;&#x5206;&#x65B9;&#x5F0F;&#xFF0C;&#x90E8;&#x7F72;&#x8DEF;&#x5F84;&#xFF0C;watchdog &#x76D1;&#x63A7;&#x6807;&#x51C6;&#xFF1A;&#x5236;&#x5B9A;&#x6307;&#x6807;&#x9EC4;&#x9875;&#xFF0C;&#x673A;&#x5668;&#x3001;&#x7F51;&#x7EDC;&#x3001;&#x4E1A;&#x52A1;&#x7A0B;&#x5E8F;&#x3001;&#x4E2D;&#x95F4;&#x4EF6;&#x7B49;&#x7B49;&#x90FD;&#x8981;&#x5982;&#x4F55;&#x76D1;&#x63A7;&#xFF0C;&#x7A0B;&#x5E8F;&#x5982;&#x4F55;&#x5410;&#x51FA;&#x53CD;&#x5E94;&#x81EA;&#x8EAB;&#x5065;&#x5EB7;&#x72B6;&#x51B5;&#x7684;&#x6307;&#x6807;&#x5747;&#x8981;&#x5B9A;&#x89C4;&#x8303; &#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x8FD0;&#x7EF4;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x652F;&#x6491;&#x6027;&#x7684;&#x90E8;&#x95E8;&#xFF0C;&#x6CA1;&#x529E;&#x6CD5;&#x8D5A;&#x94B1;&#xFF0C;&#x4F46;&#x53EF;&#x4EE5;&#x7701;&#x94B1;&#xFF0C;&#x628A;&#x8D44;&#x6E90;&#x5C3D;&#x91CF;&#x5408;&#x7406;&#x5229;&#x7528;&#x8D77;&#x6765;&#xFF0C;&#x82B1;&#x66F4;&#x5C11;&#x7684;&#x94B1;&#x529E;&#x66F4;&#x591A;&#x7684;&#x4E8B; &#x505A;&#x597D;&#x9884;&#x7B97;&#xFF0C;&#x5BB9;&#x91CF;&#x89C4;&#x5212;&#xFF0C;&#x770B;&#x4E1A;&#x52A1;&#x589E;&#x91CF;&#x5F97;&#x51FA;&#x9884;&#x7B97;&#x673A;&#x5668;&#x91CF; &#x5404;&#x79CD;&#x673A;&#x578B;&#x9700;&#x8981;&#x5907;&#x673A;&#x914D;&#x6BD4;&#xFF0C;&#x907F;&#x514D;&#x67D0;&#x673A;&#x5668;&#x574F;&#x4E86;&#x4E4B;&#x540E;&#x627E;&#x4E0D;&#x5230;&#x5907;&#x673A;&#x53EF;&#x6362; &#x673A;&#x5668;&#x751F;&#x547D;&#x5468;&#x671F;&#x7BA1;&#x7406;&#xFF0C;&#x6D41;&#x8F6C;&#x6D41;&#x7A0B;&#xFF0C;&#x6BD4;&#x5982;&#x4E0A;&#x7EBF;&#xFF0C;&#x4E0B;&#x7EBF;&#xFF0C;&#x6545;&#x969C;&#xFF0C;&#x501F;&#x7528;&#x7B49;&#x7B49; &#x901A;&#x8FC7;&#x7C7B;&#x4F3C;&#x670D;&#x52A1;&#x6811;&#x8FD9;&#x6837;&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x5206;&#x95E8;&#x522B;&#x7C7B;&#x7684;&#x7BA1;&#x7406;&#x673A;&#x5668;&#xFF0C;&#x77E5;&#x9053;&#x6BCF;&#x4E2A;&#x673A;&#x5668;&#x7684;&#x7528;&#x9014; &#x901A;&#x8FC7;&#x7C7B;&#x4F3C;Borg&#x8FD9;&#x6837;&#x7684;&#x7EDF;&#x4E00;&#x8C03;&#x5EA6;&#x7CFB;&#x7EDF;&#xFF0C;&#x6DF7;&#x90E8;&#x670D;&#x52A1;&#xFF0C;&#x63D0;&#x5347;&#x8D44;&#x6E90;&#x5229;&#x7528;&#x7387; &#x76D1;&#x63A7;&#x76D1;&#x63A7;&#x4F5C;&#x4E3A;&#x8FD0;&#x7EF4;&#x7684;&#x773C;&#x775B;&#xFF0C;&#x7A33;&#x5B9A;&#x6027;&#x7684;&#x5FC5;&#x8981;&#x4FDD;&#x969C;&#xFF0C;&#x5FC5;&#x987B;&#x8981;&#x505A;&#x597D;&#xFF0C;&#x505A;&#x5168;&#x9762;&#xFF0C;&#x505A;&#x7A33;&#x5B9A;&#xFF0C;&#x6240;&#x6709;&#x670D;&#x52A1;&#x90FD;&#x6302;&#x4E86;&#xFF0C;&#x76D1;&#x63A7;&#x4E0D;&#x80FD;&#x6302; &#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x81EA;&#x8EAB;&#x6784;&#x5EFA;&#xFF0C;&#x76D1;&#x63A7;&#x6570;&#x636E;&#x91CF;&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x662F;&#x8FD0;&#x7EF4;&#x7CFB;&#x7EDF;&#x4E2D;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x6709;&#x96BE;&#x5EA6;&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x7684;&#x6BD4;&#x5982;Borgmon&#x3001;Gorilla&#x3001;OpenTSDB&#x3001;Zabbix+Grafana&#x3001;Ganglia&#x7B49; &#x673A;&#x5668;&#x6027;&#x80FD;&#x76D1;&#x63A7;&#x3001;&#x57FA;&#x7840;&#x73AF;&#x5883;&#x76D1;&#x63A7;&#x3001;&#x65E5;&#x5FD7;&#x76D1;&#x63A7;&#x3001;&#x7F51;&#x7EDC;&#x76D1;&#x63A7;&#x3001;&#x8BBF;&#x95EE;&#x8D28;&#x91CF;&#x76D1;&#x63A7;&#x3001;&#x4E1A;&#x52A1;&#x76D1;&#x63A7;&#xFF0C;&#x7B49;&#x7B49;&#x7B49;&#x7B49;&#xFF0C;&#x6CA1;&#x6709;&#x6700;&#x5168;&#xFF0C;&#x53EA;&#x6709;&#x66F4;&#x5168; &#x90E8;&#x5206;&#x95EE;&#x9898;&#x62A5;&#x8B66;&#x4E4B;&#x540E;&#xFF0C;&#x5904;&#x7406;&#x6B65;&#x9AA4;&#x662F;&#x91CD;&#x590D;&#x7684;&#x56FA;&#x5316;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x573A;&#x666F;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x6545;&#x969C;&#x81EA;&#x6108;&#xFF0C;&#x65E0;&#x4EBA;&#x503C;&#x5B88;&#x81EA;&#x52A8;&#x5904;&#x7406;&#xFF0C;&#x5373;&#x4F7F;&#x65E0;&#x6CD5;&#x81EA;&#x52A8;&#x5904;&#x7406;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x6293;&#x73B0;&#x573A;&#xFF0C;&#x63D0;&#x4F9B;&#x540E;&#x7EED;&#x5206;&#x6790;&#x4F9D;&#x636E; &#x5B89;&#x5168;&#x6240;&#x8C13;&#x5B89;&#x5168;&#x65E0;&#x5C0F;&#x4E8B;&#xFF0C;&#x5B89;&#x5168;&#x76F4;&#x63A5;&#x5173;&#x7CFB;&#x5230;&#x4E00;&#x4E2A;&#x516C;&#x53F8;&#x7684;&#x5B58;&#x4EA1;&#xFF0C;&#x6709;&#x7684;&#x516C;&#x53F8;&#x4F1A;&#x628A;&#x5B89;&#x5168;&#x56E2;&#x961F;&#x653E;&#x5230;&#x8FD0;&#x7EF4;&#x90E8;&#x95E8;&#x4E0B;&#x9762;&#xFF0C;&#x6709;&#x7684;&#x662F;&#x5355;&#x62CE;&#x51FA;&#x6765;&#xFF0C;&#x4E0D;&#x7BA1;&#x7EC4;&#x7EC7;&#x7ED3;&#x6784;&#x600E;&#x4E48;&#x5212;&#x5206;&#xFF0C;&#x5B89;&#x5168;&#x90FD;&#x662F;&#x8FD0;&#x7EF4;&#x4E00;&#x5B9A;&#x8981;&#x91CD;&#x70B9;&#x5173;&#x6CE8;&#x7684; &#x767B;&#x5F55;&#x63A7;&#x5236;&#x548C;&#x64CD;&#x4F5C;&#x5BA1;&#x8BA1;&#xFF0C;&#x6BD4;&#x5982;&#x5404;&#x4E2A;&#x516C;&#x53F8;&#x505A;&#x7684;&#x5821;&#x5792;&#x673A;&#x3001;&#x8DF3;&#x677F;&#x673A;&#xFF0C;&#x63A7;&#x5236;&#x54EA;&#x4E9B;&#x4EBA;&#x53EF;&#x4EE5;&#x767B;&#x5F55;&#x54EA;&#x4E9B;&#x673A;&#x5668;&#xFF0C;&#x800C;&#x4E14;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#x5747;&#x6709;&#x8BB0;&#x5F55;&#xFF0C;&#x5747;&#x53EF;&#x5BA1;&#x8BA1; &#x5B89;&#x5168;&#x63A5;&#x5165;&#xFF0C;&#x6BD4;&#x5982;&#x9632;DDOS&#xFF0C;&#x6D41;&#x91CF;&#x6E05;&#x6D17;&#xFF0C;&#x5728;&#x516C;&#x53F8;&#x6240;&#x6709;&#x670D;&#x52A1;&#x4E4B;&#x524D;&#xFF0C;&#x653E;&#x7F6E;&#x4E00;&#x9053;&#x8BA9;&#x4EBA;&#x4FE1;&#x8D56;&#x7684;&#x957F;&#x57CE; &#x670D;&#x52A1;&#x5B89;&#x5168;&#xFF0C;&#x6BD4;&#x5982;&#x7814;&#x53D1;&#x540C;&#x5B66;&#x4F7F;&#x7528;&#x7EDF;&#x4E00;&#x7684;&#x6846;&#x67B6;&#xFF0C;&#x907F;&#x514D;&#x4E00;&#x4E9B;&#x7F16;&#x7801;&#x4E0A;&#x7684;&#x5B89;&#x5168;&#x6F0F;&#x6D1E;&#xFF0C;&#x518D;&#x7ECF;&#x5E38;&#x505A;&#x4E00;&#x4E0B;&#x6F0F;&#x6D1E;&#x626B;&#x63CF;&#xFF0C;&#x626B;&#x626B;&#x66F4;&#x5065;&#x5EB7; &#x707E;&#x96BE;&#x7BA1;&#x7406;&#x7EBF;&#x4E0A;&#x670D;&#x52A1;&#x7A33;&#x5B9A;&#x6027;&#x662F;&#x8FD0;&#x7EF4;&#x540C;&#x5B66;&#x7684;&#x7B2C;&#x4E00;&#x8981;&#x52A1;&#xFF0C;&#x707E;&#x96BE;&#x7BA1;&#x7406;&#xFF0C;&#x662F;&#x5176;&#x4E2D;&#x91CD;&#x8981;&#x4E00;&#x73AF; &#x9996;&#x5148;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x672C;&#x8EAB;&#xFF0C;&#x4E0A;&#x7EBF;&#x4E4B;&#x524D;&#x5C31;&#x8981;&#x8003;&#x8651;&#x597D;&#x600E;&#x4E48;&#x505A;&#x5BB9;&#x707E;&#xFF0C;&#x6709;&#x5355;&#x70B9;&#x7684;&#x7CFB;&#x7EDF;&#x663E;&#x7136;&#x662F;&#x8FC7;&#x4E0D;&#x4E86;&#x51C6;&#x5165;&#x7684;&#xFF0C;&#x8FD0;&#x7EF4;&#x540C;&#x5B66;&#x4E0D;&#x80FD;&#x63A5; &#x91CD;&#x8981;&#x6570;&#x636E;&#x5FC5;&#x987B;&#x505A;&#x597D;&#x5907;&#x4EFD;&#xFF0C;&#x53EA;&#x5907;&#x4EFD;&#x6CA1;&#x6F14;&#x7EC3;&#x53EF;&#x80FD;&#x4F1A;&#x6B65;&#x4E86;gitlab&#x7684;&#x540E;&#x5C18;&#xFF0C;&#x6240;&#x4EE5;&#x5B9A;&#x671F;&#x6F14;&#x7EC3;&#x5FC5;&#x4E0D;&#x53EF;&#x5C11;&#xFF0C;&#x53E6;&#x5916;&#x63D0;&#x524D;&#x627E;&#x597D;&#x64C5;&#x957F;&#x6570;&#x636E;&#x6062;&#x590D;&#x7684;&#x4F19;&#x4F34;&#xFF0C;&#x7701;&#x5F97;&#x4E34;&#x65F6;&#x62B1;&#x4F5B;&#x811A; &#x7EBF;&#x4E0A;&#x6240;&#x6709;&#x53D8;&#x66F4;&#x64CD;&#x4F5C;&#xFF0C;&#x6545;&#x969C;&#x5904;&#x7406;&#xFF0C;&#x9700;&#x6C42;&#x5904;&#x7406;&#x90FD;&#x8981;&#x6709;&#x5B8C;&#x5584;&#x7684;SOP&#xFF0C;&#x65B0;&#x4EBA;&#x6765;&#x4E86;&#xFF0C;&#x770B;&#x7740;SOP&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x641E;&#x5B9A; &#x5B95;&#x673A;&#x6F14;&#x7EC3;&#xFF0C;&#x5B9A;&#x671F;&#x5DE1;&#x68C0;&#x8981;&#x5E38;&#x505A;&#xFF0C;&#x9884;&#x6599;&#x5916;&#x7684;&#x6545;&#x969C;&#x662F;&#x6211;&#x4EEC;&#x6700;&#x4E0D;&#x5E0C;&#x671B;&#x770B;&#x5230;&#x7684; &#x8BBF;&#x95EE;&#x8D28;&#x91CF;&#x516C;&#x53F8;&#x505A;&#x7684;&#x4E1A;&#x52A1;&#x5982;&#x679C;&#x662F;To C&#x7684;&#xFF0C;&#x8FD9;&#x5757;&#x5C31;&#x91CD;&#x8981;&#x4E86;&#xFF0C;&#x4E92;&#x8054;&#x7F51;&#x5BA2;&#x6237;&#x90FD;&#x6CA1;&#x591A;&#x5C11;&#x8010;&#x5FC3;&#xFF0C;&#x4E0D;&#x8981;&#x8BA9;&#x5BA2;&#x6237;&#x611F;&#x89C9;&#x7F51;&#x7AD9;&#x54CD;&#x5E94;&#x6162;&#xFF0C;&#x8FD9;&#x4F1A;&#x76F4;&#x63A5;&#x5BFC;&#x81F4;&#x5BA2;&#x6237;&#x6D41;&#x5931; &#x8BBF;&#x95EE;&#x8D28;&#x91CF;&#x8981;&#x505A;&#x5168;&#x56FD;&#x751A;&#x81F3;&#x5168;&#x7403;&#x76D1;&#x63A7;&#xFF0C;&#x5404;&#x4E2A;&#x7701;&#x5E02;&#xFF0C;&#x5404;&#x4E2A;&#x4E3B;&#x8981;&#x94FE;&#x8DEF;&#xFF0C;&#x641E;&#x4E2A;&#x5927;&#x5C4F;&#xFF0C;&#x5168;&#x56FD;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x8D28;&#x91CF;&#x6E05;&#x6670;&#x53EF;&#x89C1; &#x901A;&#x8FC7;CDN&#xFF0C;&#x56FE;&#x7247;&#x4F18;&#x5316;&#xFF0C;&#x7F13;&#x5B58;&#x7B56;&#x7565;&#xFF0C;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#x7B49;&#x7B49;&#x624B;&#x6BB5;&#xFF0C;&#x8BA9;&#x7F51;&#x7AD9;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#x53D8;&#x6210;&#x4E0E;&#x53CB;&#x5546;&#x7ADE;&#x4E89;&#x7684;&#x4E00;&#x5927;&#x4F18;&#x52BF; &#x53D8;&#x66F4;&#x7BA1;&#x7406;&#x5BF9;&#x7EBF;&#x4E0A;&#x505A;&#x53D8;&#x66F4;&#xFF0C;&#x662F;&#x5BFC;&#x81F4;&#x7EBF;&#x4E0A;&#x95EE;&#x9898;&#x7684;&#x4E00;&#x5927;&#x6E90;&#x5934;&#xFF0C;&#x8FD9;&#x5757;&#x8981;&#x5355;&#x72EC;&#x62CE;&#x51FA;&#x6765;&#x8BF4;&#x8BF4; &#x7CFB;&#x7EDF;&#x7EC4;&#x4EA4;&#x4ED8;&#x673A;&#x5668;&#x4E4B;&#x540E;&#xFF0C;&#x9996;&#x5148;&#x8981;&#x6839;&#x636E;&#x81EA;&#x8EAB;&#x4E1A;&#x52A1;&#x7279;&#x70B9;&#x505A;&#x4E00;&#x6B21;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x5BF9;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x505A;&#x4E00;&#x4E9B;&#x914D;&#x7F6E;&#xFF0C;&#x5B89;&#x88C5;&#x4E00;&#x4E9B;&#x5FC5;&#x8981;&#x7684;&#x8F6F;&#x4EF6;&#xFF0C;&#x6BD4;&#x5982;&#x673A;&#x5668;&#x6302;&#x8F7D;&#x5230;&#x670D;&#x52A1;&#x6811;&#x81EA;&#x52A8;&#x89E6;&#x53D1;&#x521D;&#x59CB;&#x5316;&#x7B56;&#x7565; &#x5927;&#x70B9;&#x7684;&#x516C;&#x53F8;&#xFF0C;&#x6BCF;&#x5929;&#x51E0;&#x5343;&#x6B21;&#x53D1;&#x5E03;&#x5F88;&#x6B63;&#x5E38;&#xFF0C;&#x6709;&#x4E2A;&#x90E8;&#x7F72;&#x5E73;&#x53F0;&#x5F88;&#x91CD;&#x8981;&#xFF0C;&#x5386;&#x53F2;&#x7248;&#x672C;&#x8981;&#x53EF;&#x56DE;&#x6EAF;&#xFF0C;&#x4E00;&#x952E;&#x56DE;&#x6EDA;&#xFF0C;&#x652F;&#x6301;&#x5404;&#x79CD;&#x7B56;&#x7565;&#x5404;&#x79CD;&#x5E76;&#x53D1;&#x5EA6;&#x4E0A;&#x7EBF;&#xFF0C;&#x5177;&#x5907;&#x5206;&#x53D1;&#x5927;&#x6587;&#x4EF6;&#x5230;&#x51E0;&#x4E07;&#x751A;&#x81F3;&#x51E0;&#x5341;&#x4E07;&#x53F0;&#x673A;&#x5668;&#x7684;&#x80FD;&#x529B; &#x5173;&#x8054;&#x5173;&#x7CFB;&#x7C7B;&#x578B;&#x7684;&#x914D;&#x7F6E;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x7EDF;&#x4E00;&#x7684;&#x540D;&#x5B57;&#x670D;&#x52A1;&#x89E3;&#x51B3;&#xFF0C;&#x5F00;&#x5173;&#x7C7B;&#x7684;&#x914D;&#x7F6E;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x4E2D;&#x5FC3;&#x5316;&#x914D;&#x7F6E;&#x4E2D;&#x5FC3;&#x6216;&#x8005;&#x91C7;&#x7528;&#x4E00;&#x6B21;&#x53D1;&#x5E03;&#x89E3;&#x51B3;&#xFF0C;&#x6BCF;&#x4E2A;&#x7A0B;&#x5E8F;&#x5982;&#x679C;&#x90FD;&#x652F;&#x6301;reload&#x914D;&#x7F6E;&#x5012;&#x662F;&#x4E0D;&#x9519; &#x7F16;&#x7A0B;&#x6846;&#x67B6;&#x7F16;&#x7A0B;&#x6846;&#x67B6;&#x597D;&#x50CF;&#x8DDF;&#x8FD0;&#x7EF4;&#x65E0;&#x5173;&#xFF0C;&#x5B9E;&#x5219;&#x4E0D;&#x7136;&#x3002;&#x7EDF;&#x4E00;&#x7684;&#x7F16;&#x7A0B;&#x6846;&#x67B6;&#x4F1A;&#x8BA9;&#x8FD0;&#x7EF4;&#x590D;&#x6742;&#x5EA6;&#x964D;&#x4F4E;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x5728;&#x6846;&#x67B6;&#x4E2D;&#x5D4C;&#x5165;&#x8FD0;&#x7EF4;&#x903B;&#x8F91;&#xFF0C;&#x4E0D;&#x8003;&#x8651;&#x8FD0;&#x7EF4;&#x7684;&#x67B6;&#x6784;&#x5E08;&#x4E0D;&#x662F;&#x597D;&#x67B6;&#x6784;&#x5E08; &#x7EDF;&#x4E00;RPC&#x6846;&#x67B6;&#xFF0C;&#x7EDF;&#x4E00;&#x91CD;&#x8BD5;&#x7B56;&#x7565;&#xFF0C;&#x7EDF;&#x4E00;&#x540D;&#x5B57;&#x670D;&#x52A1;&#xFF0C;&#x7EDF;&#x4E00;&#x914D;&#x7F6E;&#x7BA1;&#x7406;&#xFF0C;&#x7EDF;&#x4E00;watchdog&#xFF0C;&#x7EDF;&#x4E00;&#x76D1;&#x63A7;&#x65B9;&#x5F0F;&#xFF0C;&#x7EDF;&#x4E00;&#x65E5;&#x5FD7;&#x6253;&#x5370;&#x2026; &#x591A;&#x73AF;&#x5883;&#x652F;&#x6301;&#xFF1A;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#xFF0C;&#x5355;&#x6D4B;&#x73AF;&#x5883;&#xFF0C;&#x96C6;&#x6D4B;&#x73AF;&#x5883;&#xFF0C;&#x5C0F;&#x6D41;&#x91CF;&#x73AF;&#x5883;&#xFF0C;&#x7EBF;&#x4E0A;&#x73AF;&#x5883;&#x2026;&#x7528;&#x540C;&#x4E00;&#x4E2A;&#x53D1;&#x5E03;&#x5305;&#x4E0A;&#x7EBF;&#xFF0C;&#x641E;&#x5B9A;&#x914D;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x95EE;&#x9898; &#x670D;&#x52A1;&#x6CBB;&#x7406;&#x65B9;&#x9762;&#xFF0C;&#x6BD4;&#x5982;&#x63A5;&#x53E3;&#x6743;&#x9650;&#x63A7;&#x5236;&#xFF0C;&#x63A5;&#x53E3;&#x7248;&#x672C;&#x7BA1;&#x7406;&#xFF0C;&#x6D41;&#x63A7;&#xFF0C;&#x8DEF;&#x7531;&#x89C4;&#x5219;&#xFF0C;&#x7B49;&#x7B49; &#x81EA;&#x52A8;&#x5316;&#x5E73;&#x53F0;&#x8FD0;&#x7EF4;&#x8FD9;&#x4E2A;&#x884C;&#x5F53;&#xFF0C;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;console&#x4E00;&#x4E2A;pash&#x5C31;&#x4E07;&#x4E8B;&#x5927;&#x5409;&#x7684;&#xFF0C;&#x4E5F;&#x9700;&#x8981;&#x76F8;&#x5173;&#x7CFB;&#x7EDF;&#x7684;&#x652F;&#x6301;&#xFF0C;&#x63D0;&#x9AD8;&#x5DE5;&#x4F5C;&#x6548;&#x7387;&#xFF0C;&#x63D0;&#x9AD8;&#x7A33;&#x5B9A;&#x6027; &#x53D1;&#x5E03;&#x4E4B;&#x524D;&#xFF1A;&#x7248;&#x672C;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#xFF0C;&#x6BD4;&#x5982;gitlab&#x3001;&#x7F16;&#x8BD1;&#x6253;&#x5305;&#x5E73;&#x53F0;&#x3001;&#x5236;&#x54C1;&#x7BA1;&#x7406;&#x4ED3;&#x5E93; &#x53D1;&#x5E03;&#x4E2D;&#xFF1A;&#x673A;&#x5668;&#x7BA1;&#x7406;&#x5206;&#x7EC4;&#x7CFB;&#x7EDF;&#xFF0C;&#x90E8;&#x7F72;&#x7CFB;&#x7EDF;&#xFF0C;&#x5927;&#x6587;&#x4EF6;&#x5206;&#x53D1;&#x5DE5;&#x5177; &#x53D1;&#x5E03;&#x4E4B;&#x540E;&#xFF1A;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#xFF0C;&#x8D44;&#x6E90;&#x5229;&#x7528;&#x7387;&#x5E73;&#x53F0; &#x65E5;&#x5E38;&#x5DE5;&#x4F5C;&#xFF1A;&#x521D;&#x59CB;&#x5316;&#x5E73;&#x53F0;&#x6765;&#x521D;&#x59CB;&#x5316;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#xFF0C;&#x8DF3;&#x677F;&#x673A;&#x3001;&#x5821;&#x5792;&#x673A;&#x63A7;&#x5236;&#x767B;&#x5F55;&#xFF0C;&#x5DE5;&#x5355;&#x7CFB;&#x7EDF;&#x7B49;&#x7B49; &#x7ED3;&#x8BED;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x516C;&#x53F8;&#x6CE8;&#x91CD;&#x670D;&#x52A1;&#x7A33;&#x5B9A;&#x6027;&#x3001;&#x5B89;&#x5168;&#x6027;&#xFF0C;&#x6CE8;&#x91CD;&#x6210;&#x672C;&#x63A7;&#x5236;&#xFF0C;&#x90A3;&#x5C31;&#x5E94;&#x8BE5;&#x6CE8;&#x91CD;&#x8FD0;&#x7EF4;&#xFF0C;&#x8FD9;&#x7FA4;&#x9ED8;&#x9ED8;&#x5DE5;&#x4F5C;&#x5728;&#x670D;&#x52A1;&#x80CC;&#x540E;&#x7684;&#x80CC;&#x9505;&#x4FA0;&#xFF0C;&#x8BF7;&#x73CD;&#x60DC;&#xFF01; document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });]]></content>
      <categories>
        <category>职业规划</category>
      </categories>
      <tags>
        <tag>职业规划</tag>
      </tags>
  </entry>
</search>
